!function e(t,i,s){function a(n,o){if(!i[n]){if(!t[n]){var l="function"==typeof require&&require;if(!o&&l)return l(n,!0);if(r)return r(n,!0);var d=new Error("Cannot find module '"+n+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[n]={exports:{}};t[n][0].call(h.exports,(function(e){return a(t[n][1][e]||e)}),h,h.exports,e,t,i,s)}return i[n].exports}for(var r="function"==typeof require&&require,n=0;n<s.length;n++)a(s[n]);return a}({1:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t,i){(t=(0,a.default)(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i;return e};var s,a=(s=e("./toPropertyKey.js"))&&s.__esModule?s:{default:s}},{"./toPropertyKey.js":4}],2:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){(0,a.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e};var s,a=(s=e("./defineProperty.js"))&&s.__esModule?s:{default:s};function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}},{"./defineProperty.js":1}],3:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t){if("object"!==(0,a.default)(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!==(0,a.default)(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)};var s,a=(s=e("./typeof.js"))&&s.__esModule?s:{default:s}},{"./typeof.js":5}],4:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e){var t=(0,a.default)(e,"string");return"symbol"===(0,s.default)(t)?t:String(t)};var s=r(e("./typeof.js")),a=r(e("./toPrimitive.js"));function r(e){return e&&e.__esModule?e:{default:e}}},{"./toPrimitive.js":3,"./typeof.js":5}],5:[function(e,t,i){"use strict";function s(e){return i.default=s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=s},{}],6:[function(e,t,i){!function(){"use strict";if("object"==typeof window)if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var e=function(e){for(var t=window.document,i=a(t);i;)i=a(t=i.ownerDocument);return t}(),t=[],i=null,s=null;n.prototype.THROTTLE_TIMEOUT=100,n.prototype.POLL_INTERVAL=null,n.prototype.USE_MUTATION_OBSERVER=!0,n._setupCrossOriginUpdater=function(){return i||(i=function(e,i){s=e&&i?m(e,i):{top:0,bottom:0,left:0,right:0,width:0,height:0},t.forEach((function(e){e._checkForIntersections()}))}),i},n._resetCrossOriginUpdater=function(){i=null,s=null},n.prototype.observe=function(e){if(!this._observationTargets.some((function(t){return t.element==e}))){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(e.ownerDocument),this._checkForIntersections()}},n.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter((function(t){return t.element!=e})),this._unmonitorIntersections(e.ownerDocument),0==this._observationTargets.length&&this._unregisterInstance()},n.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},n.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},n.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter((function(e,t,i){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==i[t-1]}))},n.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map((function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}}));return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},n.prototype._monitorIntersections=function(t){var i=t.defaultView;if(i&&-1==this._monitoringDocuments.indexOf(t)){var s=this._checkForIntersections,r=null,n=null;if(this.POLL_INTERVAL?r=i.setInterval(s,this.POLL_INTERVAL):(o(i,"resize",s,!0),o(t,"scroll",s,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in i&&(n=new i.MutationObserver(s)).observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this._monitoringDocuments.push(t),this._monitoringUnsubscribes.push((function(){var e=t.defaultView;e&&(r&&e.clearInterval(r),l(e,"resize",s,!0)),l(t,"scroll",s,!0),n&&n.disconnect()})),t!=(this.root&&this.root.ownerDocument||e)){var d=a(t);d&&this._monitorIntersections(d.ownerDocument)}}},n.prototype._unmonitorIntersections=function(t){var i=this._monitoringDocuments.indexOf(t);if(-1!=i){var s=this.root&&this.root.ownerDocument||e,r=this._observationTargets.some((function(e){var i=e.element.ownerDocument;if(i==t)return!0;for(;i&&i!=s;){var r=a(i);if((i=r&&r.ownerDocument)==t)return!0}return!1}));if(!r){var n=this._monitoringUnsubscribes[i];if(this._monitoringDocuments.splice(i,1),this._monitoringUnsubscribes.splice(i,1),n(),t!=s){var o=a(t);o&&this._unmonitorIntersections(o.ownerDocument)}}}},n.prototype._unmonitorAllIntersections=function(){var e=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var t=0;t<e.length;t++)e[t]()},n.prototype._checkForIntersections=function(){if(this.root||!i||s){var e=this._rootIsInDom(),t=e?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(s){var a=s.element,n=h(a),o=this._rootContainsTarget(a),l=s.entry,d=e&&o&&this._computeTargetAndRootIntersection(a,n,t),p=s.entry=new r({time:window.performance&&performance.now&&performance.now(),target:a,boundingClientRect:n,rootBounds:i&&!this.root?null:t,intersectionRect:d});l?e&&o?this._hasCrossedThreshold(l,p)&&this._queuedEntries.push(p):l&&l.isIntersecting&&this._queuedEntries.push(p):this._queuedEntries.push(p)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},n.prototype._computeTargetAndRootIntersection=function(t,a,r){if("none"!=window.getComputedStyle(t).display){for(var n=a,o=g(t),l=!1;!l&&o;){var p=null,c=1==o.nodeType?window.getComputedStyle(o):{};if("none"==c.display)return null;if(o==this.root||9==o.nodeType)if(l=!0,o==this.root||o==e)i&&!this.root?!s||0==s.width&&0==s.height?(o=null,p=null,n=null):p=s:p=r;else{var u=g(o),y=u&&h(u),b=u&&this._computeTargetAndRootIntersection(u,y,r);y&&b?(o=u,p=m(y,b)):(o=null,n=null)}else{var f=o.ownerDocument;o!=f.body&&o!=f.documentElement&&"visible"!=c.overflow&&(p=h(o))}if(p&&(n=d(p,n)),!n)break;o=o&&g(o)}return n}},n.prototype._getRootRect=function(){var t;if(this.root)t=h(this.root);else{var i=e.documentElement,s=e.body;t={top:0,left:0,right:i.clientWidth||s.clientWidth,width:i.clientWidth||s.clientWidth,bottom:i.clientHeight||s.clientHeight,height:i.clientHeight||s.clientHeight}}return this._expandRectByRootMargin(t)},n.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map((function(t,i){return"px"==t.unit?t.value:t.value*(i%2?e.width:e.height)/100})),i={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return i.width=i.right-i.left,i.height=i.bottom-i.top,i},n.prototype._hasCrossedThreshold=function(e,t){var i=e&&e.isIntersecting?e.intersectionRatio||0:-1,s=t.isIntersecting?t.intersectionRatio||0:-1;if(i!==s)for(var a=0;a<this.thresholds.length;a++){var r=this.thresholds[a];if(r==i||r==s||r<i!=r<s)return!0}},n.prototype._rootIsInDom=function(){return!this.root||c(e,this.root)},n.prototype._rootContainsTarget=function(t){return c(this.root||e,t)&&(!this.root||this.root.ownerDocument==t.ownerDocument)},n.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},n.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},window.IntersectionObserver=n,window.IntersectionObserverEntry=r}function a(e){try{return e.defaultView&&e.defaultView.frameElement||null}catch(e){return null}}function r(e){this.time=e.time,this.target=e.target,this.rootBounds=p(e.rootBounds),this.boundingClientRect=p(e.boundingClientRect),this.intersectionRect=p(e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0}),this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,i=t.width*t.height,s=this.intersectionRect,a=s.width*s.height;this.intersectionRatio=i?Number((a/i).toFixed(4)):this.isIntersecting?1:0}function n(e,t){var i,s,a,r=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(r.root&&1!=r.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(i=this._checkForIntersections.bind(this),s=this.THROTTLE_TIMEOUT,a=null,function(){a||(a=setTimeout((function(){i(),a=null}),s))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(r.rootMargin),this.thresholds=this._initThresholds(r.threshold),this.root=r.root||null,this.rootMargin=this._rootMarginValues.map((function(e){return e.value+e.unit})).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}function o(e,t,i,s){"function"==typeof e.addEventListener?e.addEventListener(t,i,s||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,i)}function l(e,t,i,s){"function"==typeof e.removeEventListener?e.removeEventListener(t,i,s||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,i)}function d(e,t){var i=Math.max(e.top,t.top),s=Math.min(e.bottom,t.bottom),a=Math.max(e.left,t.left),r=Math.min(e.right,t.right),n=r-a,o=s-i;return n>=0&&o>=0&&{top:i,bottom:s,left:a,right:r,width:n,height:o}||null}function h(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function p(e){return!e||"x"in e?e:{top:e.top,y:e.top,bottom:e.bottom,left:e.left,x:e.left,right:e.right,width:e.width,height:e.height}}function m(e,t){var i=t.top-e.top,s=t.left-e.left;return{top:i,left:s,height:t.height,width:t.width,bottom:i+t.height,right:s+t.width}}function c(e,t){for(var i=t;i;){if(i==e)return!0;i=g(i)}return!1}function g(t){var i=t.parentNode;return 9==t.nodeType&&t!=e?a(t):i&&11==i.nodeType&&i.host?i.host:i&&i.assignedSlot?i.assignedSlot.parentNode:i}}()},{}],7:[function(e,t,i){var s,a,r=t.exports={};function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function l(e){if(s===setTimeout)return setTimeout(e,0);if((s===n||!s)&&setTimeout)return s=setTimeout,setTimeout(e,0);try{return s(e,0)}catch(t){try{return s.call(null,e,0)}catch(t){return s.call(this,e,0)}}}!function(){try{s="function"==typeof setTimeout?setTimeout:n}catch(e){s=n}try{a="function"==typeof clearTimeout?clearTimeout:o}catch(e){a=o}}();var d,h=[],p=!1,m=-1;function c(){p&&d&&(p=!1,d.length?h=d.concat(h):m=-1,h.length&&g())}function g(){if(!p){var e=l(c);p=!0;for(var t=h.length;t;){for(d=h,h=[];++m<t;)d&&d[m].run();m=-1,t=h.length}d=null,p=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===o||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function u(e,t){this.fun=e,this.array=t}function y(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];h.push(new u(e,t)),1!==h.length||p||l(g)},u.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=y,r.addListener=y,r.once=y,r.off=y,r.removeListener=y,r.removeAllListeners=y,r.emit=y,r.prependListener=y,r.prependOnceListener=y,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],8:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.__DO_NOT_USE__ActionTypes=void 0,i.applyMiddleware=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){return function(){var i=e.apply(void 0,arguments),s=function(){throw new Error(r(15))},n={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},o=t.map((function(e){return e(n)}));return s=c.apply(void 0,o)(i.dispatch),(0,a.default)((0,a.default)({},i),{},{dispatch:s})}}},i.bindActionCreators=function(e,t){if("function"==typeof e)return m(e,t);if("object"!=typeof e||null===e)throw new Error(r(16));var i={};for(var s in e){var a=e[s];"function"==typeof a&&(i[s]=m(a,t))}return i},i.combineReducers=function(e){for(var t=Object.keys(e),i={},s=0;s<t.length;s++){var a=t[s];0,"function"==typeof e[a]&&(i[a]=e[a])}var n,o=Object.keys(i);0;try{!function(e){Object.keys(e).forEach((function(t){var i=e[t];if(void 0===i(void 0,{type:l.INIT}))throw new Error(r(12));if(void 0===i(void 0,{type:l.PROBE_UNKNOWN_ACTION()}))throw new Error(r(13))}))}(i)}catch(e){n=e}return function(e,t){if(void 0===e&&(e={}),n)throw n;for(var s=!1,a={},l=0;l<o.length;l++){var d=o[l],h=i[d],p=e[d],m=h(p,t);if(void 0===m){t&&t.type;throw new Error(r(14))}a[d]=m,s=s||m!==p}return(s=s||o.length!==Object.keys(e).length)?a:e}},i.compose=c,i.createStore=h,i.legacy_createStore=void 0;var s,a=(s=e("@babel/runtime/helpers/esm/objectSpread2"))&&s.__esModule?s:{default:s};function r(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var n="function"==typeof Symbol&&Symbol.observable||"@@observable",o=function(){return Math.random().toString(36).substring(7).split("").join(".")},l={INIT:"@@redux/INIT"+o(),REPLACE:"@@redux/REPLACE"+o(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+o()}};function d(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function h(e,t,i){var s;if("function"==typeof t&&"function"==typeof i||"function"==typeof i&&"function"==typeof arguments[3])throw new Error(r(0));if("function"==typeof t&&void 0===i&&(i=t,t=void 0),void 0!==i){if("function"!=typeof i)throw new Error(r(1));return i(h)(e,t)}if("function"!=typeof e)throw new Error(r(2));var a=e,o=t,p=[],m=p,c=!1;function g(){m===p&&(m=p.slice())}function u(){if(c)throw new Error(r(3));return o}function y(e){if("function"!=typeof e)throw new Error(r(4));if(c)throw new Error(r(5));var t=!0;return g(),m.push(e),function(){if(t){if(c)throw new Error(r(6));t=!1,g();var i=m.indexOf(e);m.splice(i,1),p=null}}}function b(e){if(!d(e))throw new Error(r(7));if(void 0===e.type)throw new Error(r(8));if(c)throw new Error(r(9));try{c=!0,o=a(o,e)}finally{c=!1}for(var t=p=m,i=0;i<t.length;i++){(0,t[i])()}return e}return b({type:l.INIT}),(s={dispatch:b,subscribe:y,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw new Error(r(10));a=e,b({type:l.REPLACE})}})[n]=function(){var e,t=y;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(r(11));function i(){e.next&&e.next(u())}return i(),{unsubscribe:t(i)}}})[n]=function(){return this},e},s}i.__DO_NOT_USE__ActionTypes=l;var p=h;function m(e,t){return function(){return t(e.apply(this,arguments))}}function c(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}i.legacy_createStore=p},{"@babel/runtime/helpers/esm/objectSpread2":2}],9:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.loadLibrary=function(e){return window._mgLib1_11_185._mgload(e)},i.loadStyles=function(e,t){if(!e.querySelector("#mgPlayerStyles")){const i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",`${t}`),i.id="mgPlayerStyles",i.addEventListener("load",(()=>{i.setAttribute("data-loaded","true")})),document.getElementById("mgPlayerStyles")||document.head.appendChild(i),e.isEqualNode(document)||e.appendChild(i.cloneNode(!0))}},i.servLibrary=function(e){return window._mgLib1_11_185._mgserv(e)};var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=a(t);if(i&&i.has(e))return i.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var o=r?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(s,n,o):s[n]=e[n]}s.default=e,i&&i.set(e,s);return s}(e("./modules"));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(a=function(e){return e?i:t})(e)}window._mgLib1_11_185||(window._mgLib1_11_185=class{constructor(e,t){this.block=e,this.mgRec=t,this.modules=_mgLib1_11_185.modules,this.libConfig=_mgLib1_11_185.libConfig,this.rootElement=null,this.amby=null,this.served=!1,window._mgwhook&&window._mgwhook(this),this.initBlock()}initBlock(){for(let e in _mgLib1_11_185.modules)if(_mgLib1_11_185.modules.hasOwnProperty(e)&&_mgLib1_11_185.modules[e].init)try{_mgLib1_11_185.modules[e].init(this,_mgLib1_11_185.widgets.length)}catch(t){this.hasOwnProperty("debug")&&"function"==typeof this.debug&&this.debug(`Error in ${e}: ${t.toString()}`)}}setConfig(e){this.mgRec.config=e}static _mgload(e){void 0===this.log&&(this.log=new s.Debug(s));let t=e.config.parentCid||e.cid;this.log.debug((new Date).getTime()-window.performance.timing.navigationStart),this.log.debug("_mgload: "+t+" libVer: 1_11_185 DOMLoaded: "+_mgLib1_11_185.DOMContentLoaded),e.rootElement=e.rootElement||document;let i=e.rootElement.getElementsByClassName("_mgw_"+t);if(0===i.length&&e.rootElement.classList&&e.rootElement.classList.contains("_mgw_"+t)&&(i=[],i.push(e.rootElement)),0===i.length){i=[];const t=e.rootElement.querySelectorAll("div[class*=vrPopup]");for(let e=0,s=t.length;e<s;e++)t[e].parentNode&&i.push(t[e].parentNode)}for(let t=0,s=i.length;t<s;t++)i[t].getAttribute("data-mgloaded")||(this.log.debug(i[t]),i[t].setAttribute("data-mgloaded","true"),_mgLib1_11_185.widgets.push(new _mgLib1_11_185(i[t],e)))}static _mgserv(e){void 0===this.log&&(this.log=new s.Debug(s));let t=e.config.parentCid||e.cid;this.log.debug("_mgserv: "+t+" libVer: 1_11_185");const{widgets:i}=_mgLib1_11_185;if(i&&i.length>0)for(let s=0;s<i.length;s++){if(t===(i[s].mgRec.config.parentCid||i[s].mgRec.cid)&&!i[s].served){i[s].served=!0,i[s].mgRec.vr_playlist=e.vr_playlist,i[s].mgRec.cappingData=e.cappingData,e.config&&(i[s].mgRec.config.uuid=e.config.uuid,i[s].mgRec.config.templateId=e.config.templateId,i[s].mgRec.config.subid=e.config.subid),i[s].amby.dispatch({type:"UPSERT_STATE",state:{playlist:e.vr_playlist,cappingData:e.cappingData,servLib:e.servLib,cxurl:e.cxurl}}),e.config.vastContent&&i[s].amby.dispatch({type:"UPSERT_STATE",state:{ad:{vastContent:e.config.vastContent}}});break}}}getWidgets(){return _mgLib1_11_185.widgets}isDOMContentLoaded(){return _mgLib1_11_185.DOMContentLoaded}},_mgLib1_11_185.modules=s,_mgLib1_11_185.widgets=[],_mgLib1_11_185.DOMContentLoaded="loading"!==document.readyState,_mgLib1_11_185.libConfig=JSON.parse('{"jwPlayerIdVrw":"//content.jwplatform.com/libraries/WLok6WPd.js","mgPlayerStylesUrlTemplate":"//{{DOMAIN}}/mgPlayer/css/mgPlayer_v2.css","teaserCappingSensorUrlTemplate":"//{{DOMAIN}}/c","videoSensorUrlTemplate":"//{{DOMAIN}}/vs/","adSrcNoUiUrlTemplate":"//video-native.{{DOMAIN}}/scripts/adSrcNoUi.js","baseStylesUrlTemplate":"//{{DOMAIN}}/mgPlayer/css/","lang":{"skipText":{"en":"Skip","uk":"Пропустити","ru":"Пропустить"},"skipOffsetText":{"en":"Skip ad in %s","uk":"Пропустити рекламу через %s","ru":"Пропустить рекламу через %s"},"clickText":{"en":"Learn more","uk":"Дізнатися більше","ru":"Узнать больше"},"headerText":{"en":"Advertisement","uk":"Реклама","ru":"Реклама"}}}'),document.addEventListener("DOMContentLoaded",(()=>{document.location.href.indexOf("mgwdebug")>0&&console.info("DOMContentLoaded: "+((new Date).getTime()-window.performance.timing.navigationStart)),_mgLib1_11_185.DOMContentLoaded=!0})))},{"./modules":11}],10:[function(e,t,i){"use strict";if(e("./main"),!window._mgwqp){if(document.location.href.indexOf("mgwdebug")>0&&console.info("init _mgwqp:"+((new Date).getTime()-window.performance.timing.navigationStart)),window._mgwqp=(e=!0)=>{if(!window._mgwi&&window._mgwtc&&(window._mgwi=setInterval((()=>{_mgwqp(!1)}),10)),window._mgq)for(let e=0;e<_mgq.length;e++){let t=_mgq[e];if(window._mgwtc&&t[0]==="MarketGidLoadGoods"+window._mgwtc){if(!(document.getElementsByClassName("_mgw_"+window._mgwtc).length>0))return;t=window._mgws2rec(t[2]),window._mgwtc="",window._mgwi&&(clearInterval(window._mgwi),window._mgwi="")}if(t&&t[1]&&t[1].lib){let i="_mgLib"+t[1].lib.replace(/\./g,"_");"function"==typeof window[i]&&(_mgq.splice(e--,1),"function"==typeof window[i][t[0]]?setTimeout(((e,t)=>{window[e][t[0]](t[1])})(i,t),1):console.warn("MgError: function "+_mgRec[0]+" not found in library "+i))}}},window!==window.top||document!==top.document||self.location!==top.location)try{parent&&!parent.window._mgLib1_11_185&&Array.apply(0,document.getElementsByTagName("script")).forEach((e=>{if(e&&e.src&&e.src.includes("mgWidget")){const t=parent.document,i=t.createElement("script");i.async=!0,i.src=e.src,t.head?t.head.appendChild(i):t.body.appendChild(i)}}))}catch(e){}window._mgws2rec=e=>{let t=["_mgload"];return t.push({lib:window._mgwlibver??"1.11",cid:window._mgwtc,sid:0,config:e.config,vr_playlist:e.vr_playlist,template:"",styles:"",paramsData:{isSmart:!1},cappingData:{dt:e.dt,ts:e.ts,tt:e.tt,h2:e.h2,iv:e.iv,psid:e.psid,isBot:e.isBot},subnetDomain:"mgid.com",countersDomain:"c.mgid.com",lang:"en",rootElement:""}),t}}_mgwqp()},{"./main":9}],11:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("./modules/debug");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in i&&i[e]===s[e]||Object.defineProperty(i,e,{enumerable:!0,get:function(){return s[e]}}))}));var a=e("./modules/config");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in i&&i[e]===a[e]||Object.defineProperty(i,e,{enumerable:!0,get:function(){return a[e]}}))}));var r=e("./modules/loader");Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in i&&i[e]===r[e]||Object.defineProperty(i,e,{enumerable:!0,get:function(){return r[e]}}))}));var n=e("./modules/helpers");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in i&&i[e]===n[e]||Object.defineProperty(i,e,{enumerable:!0,get:function(){return n[e]}}))}));var o=e("./modules/script");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in i&&i[e]===o[e]||Object.defineProperty(i,e,{enumerable:!0,get:function(){return o[e]}}))}));var l=e("./modules/formats/outstreamBase");Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in i&&i[e]===l[e]||Object.defineProperty(i,e,{enumerable:!0,get:function(){return l[e]}}))}));var d=e("./modules/formats/nativeBase");Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in i&&i[e]===d[e]||Object.defineProperty(i,e,{enumerable:!0,get:function(){return d[e]}}))}))},{"./modules/config":25,"./modules/debug":30,"./modules/formats/nativeBase":33,"./modules/formats/outstreamBase":35,"./modules/helpers":37,"./modules/loader":38,"./modules/script":57}],12:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.DomManagerComponent=void 0;i.DomManagerComponent=class{listenedElems=[];observedDocuments=[];checkForIframes(e){if(e.querySelectorAll){let t=e.querySelectorAll("iframe");t&&(t=Array.apply(null,t),t.forEach((e=>{this.checkIframe(e)})))}}getObserver(e,t=window){if(null===t||!(e instanceof t.Node))return null;const i=new MutationObserver((e=>{e.forEach((e=>{if("childList"===e.type&&e.addedNodes.length){Array.apply(null,e.addedNodes).forEach((e=>{this.observerAction(e)}))}}))}));return i.observe(e,{childList:!0,subtree:!0}),i}checkIframe(e){this.listenedElems.indexOf(e)<0&&(this.listenedElems.push(e),this.checkIframeAction(e))}getMediaElements(e){const t=[];if(e.querySelectorAll){Array.from(e.querySelectorAll("*")).forEach((e=>{"VIDEO"!==e.tagName&&"AUDIO"!==e.tagName||t.push(e),e.shadowRoot&&(t.push(...this.getMediaElements(e.shadowRoot)),-1===this.observedDocuments.indexOf(e.shadowRoot)&&(this.observedDocuments.push(e.shadowRoot),this.getObserver(e.shadowRoot,e.ownerDocument.defaultView),setTimeout((()=>{this.checkForIframes(e.shadowRoot)}))))}))}return t}inMgPlayer(e){if(e.ownerDocument.defaultView.inMgPlayer)return!0;let t=e;for(;t.parentElement&&t.parentElement!==t;)if(t=t.parentElement,t.classList.contains("vrline")||t.className.indexOf("mgAdPlayerDiv")>-1)return!0;return!1}}},{}],13:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.NoSoundComponent=void 0;var s=e("../helpers"),a=e("../debug"),r=e("./domManagerComponent"),n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=o(t);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var n=a?Object.getOwnPropertyDescriptor(e,r):null;n&&(n.get||n.set)?Object.defineProperty(s,r,n):s[r]=e[r]}s.default=e,i&&i.set(e,s);return s}(e("../../redux/actionCreators"));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(o=function(e){return e?i:t})(e)}class l extends r.DomManagerComponent{amby;playerDiv;adName;noiframe;constructor(e,t){super();const{playerDiv:i,adName:s}=t;this.playerDiv=i,this.adName=s,this.amby=e,this.noiframe=e.get("formatConfig.noiframe",!0),this.getObserver(this.playerDiv),this.checkSound(this.playerDiv)}observerAction(e){"VIDEO"!==e.tagName&&"AUDIO"!==e.tagName||-1!==this.listenedElems.indexOf(e)||(this.listenedElems.push(e),this.muteVolume(e),e.addEventListener("volumechange",(e=>{this.onVolumeChange(e)}))),"IFRAME"===e.tagName&&this.checkIframe(e),this.checkSound(e)}checkIframeAction(e){const t=s.Helpers.checkIframe(e);t?(this.getObserver(t,e.contentWindow),this.checkSound(t)):-1===e.src.indexOf("imasdk.googleapis")&&((0,a.mgDebug)(`Iframe detected: src: ${e.src}`),this.noiframe&&e.parentNode&&(e.parentNode.removeChild(e),(0,a.mgDebug)(`Iframe deleted: src: ${e.src}`)))}checkSound(e){if(e.querySelectorAll){let t=e.querySelectorAll("video, audio");t&&(t=Array.apply(null,t),t.forEach((e=>{e.classList.contains("mg2player__video")||(l.isPlaying(e)&&!1===e.muted&&this.amby.get("ad.initMuted",!0)&&!this.amby.get("ad.soundButtonClicked",!1)&&((0,a.mgDebug)("Prevent Unmute Video violation."),e.muted=!0),-1===this.listenedElems.indexOf(e)&&(this.listenedElems.push(e),e.addEventListener("volumechange",(e=>{this.onVolumeChange(e)}))))})))}this.checkForIframes(e)}onVolumeChange(e){setTimeout((()=>{e&&e.target&&!e.target.muted&&this.amby.get("ad.initMuted",!0)&&!this.amby.get("ad.soundButtonClicked",!1)&&((0,a.mgDebug)("Prevent Unmute violation."),e.target.muted=!0),this.amby.get("ad.soundButtonClicked",!1)&&this.amby.dispatch(n.upsertAdState({soundButtonClicked:!1}))}),0)}muteVolume(e){setTimeout((()=>{!e.muted&&this.amby.get("ad.initMuted",!0)&&((0,a.mgDebug)("Mute violation."),e.muted=!0)}),0)}static isPlaying(e){return!!(e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2)}}i.NoSoundComponent=l},{"../../redux/actionCreators":58,"../debug":30,"../helpers":37,"./domManagerComponent":12}],14:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.AdContainerComponent=void 0;var s=e("../../../redux/storage"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=d(t);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var n=a?Object.getOwnPropertyDescriptor(e,r):null;n&&(n.get||n.set)?Object.defineProperty(s,r,n):s[r]=e[r]}s.default=e,i&&i.set(e,s);return s}(e("../../../redux/actionCreators")),r=e("../../helpers"),n=e("../../players/controls/clickThroughComponent"),o=e("../../debug"),l=e("../../controllers/kpiDataManager");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(d=function(e){return e?i:t})(e)}i.AdContainerComponent=class{constructor(e,t,i="ad",o="below"){this.amby=e,this.mgVideoIndex=this.amby.get("mgVideoIndex"),this.widgetId=this.amby.get("widgetId"),this.position=o,this.playerDiv=document.createElement("div"),this.playerContainer=document.createElement("div"),this.playerDiv.id=`mgAdPlayerDiv_${this.mgVideoIndex}${"ad"!==i?`_${i.replace(/ /g,"_")}`:""}`,this.playerDiv.className="mgAdPlayerDiv adPlayerDiv",this.playerDiv.oncontextmenu=e=>{e.preventDefault()},this.playerContainer.appendChild(this.playerDiv),this.playerContainer.id=`mgAdPlayerContainerDiv_${this.mgVideoIndex}`+("ad"!==i?`_${i.replace(/ /g,"_")}`:"");const d=this.amby.get("paramsData.isSmart",!1)?"smart":"";let h=this.amby.get("formatConfig.name","native");"attachedWidget"===h&&(h="outstream"),"native"===h&&this.amby.get("formatConfig.performance",!1)&&(h="performance"),this.playerContainer.className=`mgAdPlayerContainerDiv adPlayerContainerDiv ${d} mgAdPlayerFormat-${h}`,"ad"!==i&&r.Helpers.addClass(this.playerContainer,"partial"),this.appendPlayerContainer(t),"ad"===i&&(r.Helpers.onVisible(this.playerContainer,(e=>{this.inSight=e,this.inSight||this.amby.get("player.isSticky",!1)?this.amby.dispatch(a.setAdInSight(!0)):this.amby.dispatch(a.setAdInSight(!1))}),this.amby.get("formatConfig.visiblePart",1),this.amby.get("formatConfig.hiddenPart",.5)),parseFloat(this.amby.get("formatConfig.preheat"))&&this.createPreheatObserver(),this.amby.get("visibilityKpi")&&(this.kpiManager=new l.KpiDataManager(this.amby,this.playerContainer))),this.playerContainer.addEventListener("click",(e=>{"timeline"!==e.target.id&&this.amby.dispatch(a.upsertAdState({containerClicked:!0})),e.cancelBubble=!0})),this.amby.addSubListener("ad.init",(()=>{this.amby.get("ad.init")===s.states.INIT_DONE&&this.amby.get("ad.enableCTA",!1)&&(this.clickThroughButton?this.clickThroughButton.createElement():this.clickThroughButton=new n.ClickThroughComponent(this.amby,this.playerDiv))})),this.amby.addSubListener(`${i}.visible`,(()=>{this.amby.get(`${i}.visible`)?(r.Helpers.addClass(this.playerDiv,"showed"),r.Helpers.addClass(this.playerContainer,"showed")):(r.Helpers.removeClass(this.playerDiv,"showed"),r.Helpers.removeClass(this.playerContainer,"showed"))}))}applyPlayerSize(e,t=!1){e&&(this.playerContainer&&(t?(this.playerContainer.style.removeProperty("top"),this.playerContainer.style.removeProperty("left"),this.playerContainer.style.removeProperty("width")):(this.playerContainer.style.top=`${e.top}px`,this.playerContainer.style.left=`${e.left}px`,this.playerContainer.style.width=`${e.width}px`),this.playerContainer.style.height=`${e.height}px`),this.playerDiv&&(this.playerDiv.style.width=`${e.pWidth}px`,this.playerDiv.style.height=`${e.pHeight}px`),this.amby.get("formatConfig.preheat")&&!this.amby.get("ad.preheated",!1)&&(this.preheatObserver.disconnect(),this.createPreheatObserver()))}createPreheatObserver(){this.preheatMargin=parseFloat(this.amby.get("formatConfig.preheat"))*this.amby.get("ad.size.height"),this.preheatObserver=r.Helpers.onVisible(this.playerContainer,(e=>{e&&((0,o.mgDebug)(`PreHeat fired in ${this.preheatMargin}px`),this.amby.dispatch(a.upsertState({ad:{preheated:!0,actionPlay:!0}})),this.preheatObserver.disconnect())}),.01,0,this.preheatMargin)}appendPlayerContainer(e){if(this.baseNode=e,"above"===this.position)this.baseNode.insertBefore(this.playerContainer,this.baseNode.children[0]);else if("next"===this.position){let e=this.playerContainer;e.parentNode&&-1!==e.parentElement.className.indexOf(`_mgVideoBlock_${this.widgetId}`)||(e=document.createElement("div"),e.className=`_mgVideoBlock_${this.widgetId}`,e.appendChild(this.playerContainer)),this.baseNode.parentNode.insertBefore(e,this.baseNode.nextSibling)}else this.baseNode.appendChild(this.playerContainer)}}},{"../../../redux/actionCreators":58,"../../../redux/storage":61,"../../controllers/kpiDataManager":28,"../../debug":30,"../../helpers":37,"../../players/controls/clickThroughComponent":51}],15:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.AnimatedArticleComponent=void 0;var s=e("../../helpers");i.AnimatedArticleComponent=class{constructor(e,t){this.amby=e.amby,this.widget=e,this.rootElement=e.rootElement,this.playerContainerDiv=t,this.placementSelector=this.amby.get("formatConfig.animatedArticleSelector",!1),this.aspectRatio=(this.amby.get("player.aspectratio")||"16:9").match(/(\d+):(\d+)/).reduce(((e,t,i)=>(e[["ratio","width","height"][i]]=t,e)),{}),this.replaceWithVideo()}replaceWithVideo(){const e=document.body.querySelector(this.placementSelector);e&&(e.parentNode.insertBefore(this.rootElement,e),e.parentNode.removeChild(e));const t=s.Helpers.getElemWidth(this.rootElement)/(this.aspectRatio.width/this.aspectRatio.height);this.playerContainerDiv.style.height=`${t}px`}}},{"../../helpers":37}],16:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.InArticleComponent=void 0;var s=e("../../debug"),a=e("../../helpers"),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=o(t);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var n=a?Object.getOwnPropertyDescriptor(e,r):null;n&&(n.get||n.set)?Object.defineProperty(s,r,n):s[r]=e[r]}s.default=e,i&&i.set(e,s);return s}(e("../../../redux/actionCreators")),n=e("../../../redux/storage");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(o=function(e){return e?i:t})(e)}i.InArticleComponent=class{constructor(e,t,i){this.amby=e.amby,this.playerContainerDiv=t,this.rootElement=e.rootElement,this.widgetId=this.amby.get("widgetId"),this.articleSelectors=this.amby.get("formatConfig.articleSelectors",!1),this.shadowDivs=[],this.articles=[],this.aspectRatio=(this.amby.get("player.aspectratio")||"16:9").match(/(\d+):(\d+)/).reduce(((e,t,i)=>(e[["ratio","width","height"][i]]=t,e)),{}),this.articleSelectors?(Array.isArray(this.articleSelectors)||(this.articleSelectors=[this.articleSelectors]),this.articleSelectors.unshift(`.MGVideoAnchor${this.widgetId}`)):this.articleSelectors=[`.MGVideoAnchor${this.widgetId}`],this.amby.get("formatConfig.multipleArticles",!1)?(i||(document.querySelector(`._mgw_${this.widgetId} .mgheader`)||this.rootElement.querySelector(`._mgw_${this.widgetId} .mgheader`)?this.articleSelectors.push(`._mgw_${this.widgetId} .mgheader`):this.articleSelectors.push(`._mgw_${this.widgetId} .mgbox`)),this.articleSelectors.forEach((e=>{let t=document.querySelectorAll(e);t||(t=this.rootElement.querySelectorAll(e)),t&&(t=Array.apply(null,t),t.forEach((e=>{e&&e.parentNode&&this.articles.push(e)})))})),this.articles.length>0&&(this.articles.sort(((e,t)=>a.Helpers.getOffsetTop(e)-a.Helpers.getOffsetTop(t))),this.articles.forEach((e=>{const t=document.createElement("div");t.style.width=`${a.Helpers.getElemWidth(e.parentNode)}px`,t.style.position="absolute",a.Helpers.isIE()&&(e.className.indexOf("mgheader")>-1||e.className.indexOf("mgbox")>-1)&&(t.style.top="0",t.style.left="0"),t.className=`shadowDiv_${this.amby.get("widgetId")}`,e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t.style.height=a.Helpers.getElemWidth(t)/this.aspectRatio.width*this.aspectRatio.height+"px";const i=a.Helpers.onVisible(t,(e=>{t.inSight=e,e?setTimeout((()=>{this.relocatePlayer(t)}),0):this.findPlacement()}));this.shadowDivs.push({shadowDiv:t,observer:i})})),i&&this.amby.addSubListener("ad.status",(()=>{this.amby.get("ad.status")===n.states.STATUS_STOPPED&&this.shadowDivs.forEach((({shadowDiv:e,observer:t})=>{e.style.display="none",t.disconnect()}))})),this.amby.addSubListener("player.inSight",(()=>{this.amby.get("player.inSight")||this.findPlacement()})))):(this.articleSelectors.forEach((e=>{this.article||(this.article=document.querySelector(e)),this.article||(this.article=this.rootElement.querySelector(e))})),this.article&&this.article.parentNode?this.article.nextSibling?this.article.parentNode.insertBefore(this.playerContainerDiv,this.article.nextSibling):this.article.parentNode.appendChild(this.playerContainerDiv):(0,s.mgDebug)(`No container found. Src: ${window.location!==window.parent.location?document.referrer:document.location.href}`))}relocatePlayer(e){e.nextSibling&&this.playerContainerDiv.isEqualNode(e.nextSibling)||this.amby.get("player.inSight")||(e.nextSibling?e.parentNode.insertBefore(this.playerContainerDiv,e.nextSibling):e.parentNode.appendChild(this.playerContainerDiv),this.amby.dispatch(r.setTriggerToTrue("player.positionChanged")))}findPlacement(){this.shadowDivs.forEach((({shadowDiv:e})=>{e.inSight&&this.relocatePlayer(e)}))}isSomeInSight(){return this.shadowDivs.reduce(((e,t)=>e||t.shadowDiv.inSight),!1)}}},{"../../../redux/actionCreators":58,"../../../redux/storage":61,"../../debug":30,"../../helpers":37}],17:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.MoveToBodyComponent=void 0;i.MoveToBodyComponent=class{constructor(e,t){this.widgetId=e,this.playerContainerDiv=t}attachBody(){let e=document.body.querySelector(`body > ._mgVideoBlock_${this.widgetId}:last-child`);e?e.appendChild(this.playerContainerDiv):(e=document.createElement("div"),e.className=`_mgVideoBlock_${this.widgetId}`,e.appendChild(this.playerContainerDiv),document.body.appendChild(e))}detachBody(e){e.appendChild(this.playerContainerDiv)}}},{}],18:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TeaserComponent=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=n(t);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=a?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(s,r,o):s[r]=e[r]}s.default=e,i&&i.set(e,s);return s}(e("../../../redux/actionCreators")),a=e("../../helpers"),r=e("../../debug");function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(n=function(e){return e?i:t})(e)}i.TeaserComponent=class{constructor(e,t,i){(0,r.mgDebug)(`Init TeaserComponent ${i}`),this.amby=e,this.teaser=t,this.linkElem=this.teaser.querySelector(".mcimg > a"),this.linkElem&&this.linkElem.removeAttribute("href"),this.index=i,this.amby.get("teasers")||this.amby.dispatch(s.upsertState({teasers:[]})),this.amby.dispatch(s.upsertTeaser({index:this.index,teaser:{inSight:!1,mouseOver:!1,clicked:!1}})),this.observer=a.Helpers.onVisible(this.teaser,(e=>{(0,r.mgDebug)(`Teaser is ${e?"in":"out of"} sight`),this.amby.dispatch(s.upsertTeaser({index:this.index,teaser:{inSight:e}}))})),this.addListeners()}addListeners(){this.teaser.addEventListener("click",(()=>{this.amby.dispatch(s.setTriggerToTrue(`teasers.${this.index}.clicked`))})),this.teaser.addEventListener("mouseenter",(()=>{this.amby.dispatch(s.upsertTeaser({index:this.index,teaser:{mouseOver:!0}}))})),this.teaser.addEventListener("mouseleave",(()=>{this.amby.dispatch(s.upsertTeaser({index:this.index,teaser:{mouseOver:!1}}))})),this.amby.addSubListener(`teasers.${this.index}.title`,(()=>{const e=this.amby.get(`teasers.${this.index}.title`,""),t=this.teaser.querySelector(".mctitle a");t&&(t.text=e)}))}}},{"../../../redux/actionCreators":58,"../../debug":30,"../../helpers":37}],19:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.WidgetComponent=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=o(t);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var n=a?Object.getOwnPropertyDescriptor(e,r):null;n&&(n.get||n.set)?Object.defineProperty(s,r,n):s[r]=e[r]}s.default=e,i&&i.set(e,s);return s}(e("../../../redux/actionCreators")),a=e("../../helpers"),r=e("./teaserComponent"),n=e("../../debug");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(o=function(e){return e?i:t})(e)}i.WidgetComponent=class{constructor(e,t=null){(0,n.mgDebug)("WidgetComponent initiated."),this.amby=e.amby,this.widgetBlock=e.block,this.callback=t,this.videoTeasers=[],this.linkElems=[],this.playerTeaserIndex=null,a.Helpers.onVisible(this.widgetBlock,(e=>{this.amby.dispatch(s.upsertState({widget:{inSight:e}}))})),this.teasers=this.widgetBlock.querySelectorAll(".mgline"),0===this.teasers.length&&this.callback?["outstream","attachedWidget"].indexOf(this.amby.get("formatConfig.name"))>-1&&["above","below","over"].indexOf(this.amby.get("formatConfig.adsPlace"))<0?this.fillTeasers():(this.addedNodes=[],this.observer=this.getObserver((e=>{this.waitForTeasers(e)})),this.observer.observe(this.widgetBlock,{childList:!0,subtree:!0})):this.fillTeasers()}fillTeasers(){0===this.teasers.length&&(this.teasers=this.widgetBlock.querySelectorAll(".mgline")),this.inlinePlacement=parseInt(this.amby.get("formatConfig.inlinePlacement",1),10);for(let e=0;e<this.teasers.length;e++){const t=this.teasers[e];if(-1!==t.className.indexOf("vrline")){const i=this.videoTeasers.length;null!==this.inlinePlacement&&this.inlinePlacement===i+1&&(this.playerTeaserIndex=e),this.videoTeasers.push(new r.TeaserComponent(this.amby,t,i)),this.linkElems.push()}}let e=this.widgetBlock.querySelectorAll(".image-with-text>.mcimg img"),t=!0;if(this.teaserImagesLoaded=[],e&&e.length>0&&(e=Array.apply(null,e),e.forEach(((e,i)=>{this.teaserImagesLoaded.push(e.complete),e.complete||(t=!1,e.addEventListener("load",(()=>{this.teaserImagesLoaded[i]=!0,this.amby.dispatch(s.setTriggerToTrue("widget.imageLoaded")),this.teaserImagesLoaded.reduce(((e,t)=>e&&t))&&this.amby.dispatch(s.upsertState({widget:{allImagesLoaded:!0}}))})))}))),t&&this.amby.dispatch(s.upsertState({widget:{allImagesLoaded:!0}})),null!==this.playerTeaserIndex)this.amby.dispatch(s.upsertState({widget:{playerTeaserIndex:this.playerTeaserIndex}}));else if(void 0!==this.inlinePlacement&&-1===["outstream","attachedWidget"].indexOf(this.amby.get("formatConfig.name")))return void(0,n.mgDebug)("Empty WidgetComponent.playerTeaserIndex");this.listenersAdded||(this.listenersAdded=!0,this.addListeners(),this.callback&&setTimeout((()=>{this.callback()}),0))}addListeners(){let e=null,t=null;void 0!==document.mozHidden?(e="mozHidden",t="mozvisibilitychange"):void 0!==document.msHidden?(e="msHidden",t="msvisibilitychange"):void 0!==document.webkitHidden?(e="webkitHidden",t="webkitvisibilitychange"):void 0!==document.hidden&&(e="hidden",t="visibilitychange"),null!=e&&null!=t&&document.addEventListener(t,(()=>{document[e]?(this.blurred=!0,this.amby.dispatch(s.setWidgetBlurred(!0))):(this.blurred=!1,this.amby.dispatch(s.setWidgetBlurred(!1)))})),window.addEventListener("blur",(()=>{this.blurred=!0,setTimeout((()=>{document.activeElement&&("IFRAME"===document.activeElement.tagName||document.activeElement.shadowRoot)||this.amby.dispatch(s.setWidgetBlurred(!0))}),0)})),window.addEventListener("focus",(()=>{this.blurred=!1,this.amby.dispatch(s.setWidgetBlurred(!1))})),document.body.addEventListener("mouseenter",(()=>{document.activeElement&&"IFRAME"===document.activeElement.tagName&&this.blurred&&this.amby.dispatch(s.setWidgetBlurred(!1))})),document.body.addEventListener("mouseleave",(()=>{document.activeElement&&"IFRAME"===document.activeElement.tagName&&this.blurred&&this.amby.dispatch(s.setWidgetBlurred(!0))}))}getObserver(e){return new MutationObserver((t=>{t.forEach((t=>{if("childList"===t.type&&t.addedNodes.length){let i=Array.prototype.slice.call(t.addedNodes);i=i.filter((e=>"#text"!==e.nodeName)),i.length>0&&(this.addedNodes.push(i),e(i))}}))}))}waitForTeasers(e){e.forEach((e=>{["outstream","attachedWidget"].indexOf(this.amby.get("formatConfig.name"))>-1?(e.className&&e.className.indexOf("mgbox")>-1||e.querySelector&&e.querySelector(".mgbox"))&&("over"!==this.amby.get("formatConfig.adsPlace","above")||this.widgetBlock.querySelectorAll(".mgline").length>0)&&(this.fillTeasers(),this.observer.disconnect(),this.boxesObserver=this.getObserver((e=>{this.waitForBoxes(e)})),this.boxesObserver.observe(this.widgetBlock,{childList:!0,subtree:!0})):(e.className&&e.className.indexOf("vrline")>-1&&e.querySelector("img")||a.Helpers.getParentBlockByClass(e,"vrline")&&a.Helpers.getParentBlockByClass(e,"vrline").querySelector("img")||e.querySelector&&e.querySelector(".vrline")&&e.querySelector(".vrline").querySelector("img"))&&(this.fillTeasers(),this.observer.disconnect())}))}waitForBoxes(e){e.forEach((e=>{(e.className&&e.className.indexOf&&e.className.indexOf("mgbox")>-1||e.querySelector&&e.querySelector(".mgbox")&&e.parentNode===this.widgetBlock)&&(this.amby.get("widget.allImagesLoaded",!1)?this.amby.dispatch(s.setTriggerToTrue("widget.newBox")):this.fillTeasers())}))}}},{"../../../redux/actionCreators":58,"../../debug":30,"../../helpers":37,"./teaserComponent":18}],20:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PlaylistComponent=void 0;var s=e("../../redux/storage"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=o(t);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var n=a?Object.getOwnPropertyDescriptor(e,r):null;n&&(n.get||n.set)?Object.defineProperty(s,r,n):s[r]=e[r]}s.default=e,i&&i.set(e,s);return s}(e("../../redux/actionCreators")),r=e("../helpers"),n=e("../debug");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(o=function(e){return e?i:t})(e)}i.PlaylistComponent=class{constructor(e,t){(0,n.mgDebug)("PlaylistComponent initiated."),this.amby=e,this.popup=t,this.playlist=this.amby.get("playlist",[]),this.checkPlaylist()}checkPlaylist(){0===this.playlist.length?setTimeout((()=>{this.checkPlaylist()}),50):this.onPlaylistFilled()}onPlaylistFilled(){this.popup&&this.handlePopupConstructor(),"none"!==this.amby.get("formatConfig.playerType")&&this.addListeners()}handlePopupConstructor(){this.widgetId=this.amby.get("widgetId",0),this.popupFooter=this.popup.querySelector("div[class*=video-info__footer]"),this.blockMain=r.Helpers.getParentBlockByClass(this.popup,`_mgw_${this.widgetId}`),this.blockMain&&(this.videoTeasers=this.blockMain.querySelectorAll(".mgline.vrline"),this.videoTeasers&&(this.videoTeasers=Array.apply(null,this.videoTeasers))),this.linkElems=[],this.playlist.forEach(((e,t)=>{let i=null,s=`javascript:void({'id':'${e.id}','link':'${e.link}','hash':'${e.hash}'`;e.videoExt&&(i=JSON.parse(atob(e.videoExt)),s+=`,'videoExt':'${e.videoExt}'`),s+="})";const r=document.createElement("a");r.className="mgline-pop",r.href=s,r.innerHTML=`<div class="image-with-text-pop"><div class="mcimg-pop"><div class="image-container-pop"><img src="${e.img}" class="mcimg-pop" alt="${e.title}"></div></div><div class="mgline-pop__playing">Now playing</div><div class="mgline-pop__format-hd">HD</div><div class="mgline-pop__duration"></div><div class="text-elements"><div class="text_on_hover"><div class="mctitle-pop">${e.title}</div></div></div></div>`,r.onclick=e=>{this.amby.get("player.isAdPlaying",!1)||this.amby.dispatch(a.setTriggerToTrue(`playlist.${t}.clicked`)),e.cancelBubble=!0},this.linkElems.push(r),this.popupFooter.appendChild(r);let n=null,o=null;if(i.duration&&(n=i.duration%60,o=Math.floor(i.duration/60)),this.videoTeasers&&this.videoTeasers[t]){const e=this.videoTeasers[t].querySelector(".mg-total-views");e&&i.impressions&&(e.innerText=e.innerText.replace(/^\d*/,i.impressions));const s=this.videoTeasers[t].querySelector(".mg-video-duration");s&&i.duration&&(s.innerText=`${o}:${n>9?n:`0${n}`}`)}const l=r.querySelector(".mgline-pop__duration");l&&i.duration&&(l.innerText=`${o}:${n>9?n:`0${n}`}`),e.videoExt=i})),this.getScrollDeltas(),window.addEventListener("resize",(()=>{this.getScrollDeltas()}))}addListeners(){this.amby.addSubListener("player.itemIndex",(()=>{const e=this.amby.get("player.itemIndex");if(this.itemIndex!==e){this.itemIndex=e;const t=parseInt(this.amby.get("formatConfig.inlinePlacement",1),10);if(t){const i=(0,r.getInObject)(this.playlist,[e,"title"],"");this.amby.dispatch(a.upsertTeaser({index:t-1,teaser:{title:i}}))}if(this.popup){if(this.popupFooter){let t=this.popupFooter.querySelectorAll(".current-playing");t&&(t=Array.apply(null,t),t.forEach((e=>{r.Helpers.removeClass(e,"current-playing")}))),r.Helpers.addClass(this.linkElems[e],"current-playing"),this.getScrollDeltas(),this.deltaScrollWidth&&(this.popupFooter.scrollLeft=this.deltaScrollWidth*(e-1)),this.deltaScrollHeight&&(this.popupFooter.scrollTop=this.deltaScrollHeight*(e-1))}const t=this.popup.querySelector("div[class*=video-info__title-cell]");t&&(t.innerHTML=this.linkElems[e].querySelector("img").getAttribute("alt"));const i=this.popup.querySelector("div[class*=video-info__sub-title]");i&&((0,r.getInObject)(this.playlist,[e,"videoExt","description"])?i.innerHTML=r.Helpers.fromAscii(this.playlist[e].videoExt.description):i.innerHTML="")}}})),this.popup&&this.amby.addSubListener("player.status",(()=>{if(this.linkElems&&void 0!==this.itemIndex){const e=this.linkElems[this.itemIndex].querySelector(".mctitle-pop");this.amby.get("player.adIsPlaying",!1)||this.amby.get("player.status")!==s.states.STATUS_PAUSED?r.Helpers.removeClass(e,"paused"):r.Helpers.addClass(e,"paused")}}))}getScrollDeltas(){this.popupFooter&&this.linkElems.length>0&&(this.popupFooter.scrollWidth>this.popupFooter.scrollHeight?(this.deltaScrollWidth=r.Helpers.getElemWidth(this.linkElems[0]),this.deltaScrollHeight=!1):(this.deltaScrollHeight=r.Helpers.getElemHeight(this.linkElems[0]),this.deltaScrollWidth=!1))}}},{"../../redux/actionCreators":58,"../../redux/storage":61,"../debug":30,"../helpers":37}],21:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ProxyConsoleComponent=void 0;var s=e("../helpers"),a=e("../debug"),r=e("./domManagerComponent");class n extends r.DomManagerComponent{constructor(e,t){super();const{playerDiv:i}=t;this.playerDiv=i,this.noiframe=e.get("formatConfig.noiframe",!0),this.hideConsoleMessages(),this.getObserver(this.playerDiv),this.checkForIframes(this.playerDiv)}hideConsoleMessages(){const e=s.Helpers.getPageScriptsList();window.console=new Proxy(window.console,{get(t,i){if("string"!=typeof i)return null;if("isProxy"===i)return!0;const a=s.Helpers.callScriptURL();return a&&-1===e.indexOf(a)&&["log","debug","table","error","warn","exception","info"].indexOf(i)>-1?()=>{}:t[i]}})}checkIframeAction(e){if(s.Helpers.checkIframe(e)){if(!e.contentWindow.console.isProxy)try{e.contentWindow.console=window.console}catch(e){}this.checkForIframes(e)}else-1===e.src.indexOf("imasdk.googleapis")&&((0,a.mgDebug)(`Iframe detected: src: ${e.src}`),this.noiframe&&e.parentNode&&(e.parentNode.removeChild(e),(0,a.mgDebug)(`Iframe deleted: src: ${e.src}`)))}observerAction(e){"IFRAME"===e.tagName&&this.checkIframe(e),this.checkForIframes(e)}}i.ProxyConsoleComponent=n},{"../debug":30,"../helpers":37,"./domManagerComponent":12}],22:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.SmartBackfillComponent=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=n(t);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=a?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(s,r,o):s[r]=e[r]}s.default=e,i&&i.set(e,s);return s}(e("../../redux/actionCreators")),a=e("./domManagerComponent"),r=e("../helpers");function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(n=function(e){return e?i:t})(e)}class o extends a.DomManagerComponent{constructor(e){super(),this.widget=e,this.amby=e.amby,this.rejectedSent=!1,this.observers=[],this.amby.addSubListener("ad.startRequested",(()=>{this.amby.get("ad.startRequested",!1)&&this.observers.forEach((e=>{e.disconnect()}))}));const t=this.getMediaElements(document.body);t&&t.forEach((e=>{this.addListener(e)})),setTimeout((()=>{this.checkForIframes(document.body),setTimeout((()=>{this.observedDocuments.push(document),this.observers.push(this.getObserver(document))}))}))}observerAction(e){if(e instanceof HTMLElement&&("VIDEO"!==e.tagName&&"AUDIO"!==e.tagName||this.addListener(e),e.querySelectorAll)){const t=this.getMediaElements(e);t&&t.forEach((e=>{this.addListener(e)}))}setTimeout((()=>{this.checkForIframes(e.ownerDocument)}))}checkIframeAction(e){const t=r.Helpers.checkIframe(e);if(t&&-1===this.observedDocuments.indexOf(t)){this.observedDocuments.push(t);const i=this.getMediaElements(t);i&&i.forEach((e=>{this.addListener(e)}));const s=t.getRootNode();this.observers.push(this.getObserver(s,e.contentWindow)),setTimeout((()=>{this.checkForIframes(t)}))}}addListener(e){this.inMgPlayer(e)||-1!==this.listenedElems.indexOf(e)||(this.listenedElems.push(e),this.checkMedia(),e.addEventListener("playing",(()=>{this.checkMedia()})),e.addEventListener("pause",(()=>{this.checkMedia()})))}checkMedia(){this.amby.dispatch(s.upsertAdState({rejecting:!!this.isAnyPlayerPlaying()}))}isAnyPlayerPlaying(){return this.listenedElems.reduce(((e,t)=>o.isPlaying(t)||e),!1)}static isPlaying(e){return e.readyState>2&&!1===e.paused&&(""!==e.currentSrc||""!==e.src)}}i.SmartBackfillComponent=o},{"../../redux/actionCreators":58,"../helpers":37,"./domManagerComponent":12}],23:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.StyleComponent=void 0;var s=e("../debug");class a{constructor(e){this.amby=e.amby,this.rootElement=e.rootElement,this.widgetId=this.amby.get("widgetId");let{protocol:t}=document.location;if(t=0===t.indexOf("http")?t:"https:",this.styleUrl=this.amby.get("formatConfig.styleUrl"),this.styleUrl)this.styleUrl=this.styleUrl.replace("{{DOMAIN}}",this.amby.get("subnetDomain","")),this.styleUrl=this.styleUrl.replace(/^(https?:\/\/|\/\/)/,`${t}//`);else{const e='@keyframes preload{from{transform:rotate(0)}to{transform:rotate(360deg)}}@-webkit-keyframes preload{from{transform:rotate(0)}to{transform:rotate(360deg)}}html>div{display:none!important}.mg2player{position:relative;width:100%;height:100%;overflow:hidden}.mg2player,.mg2player *{font-family:"Open Sans",sans-serif;box-sizing:border-box}.mg2player_mute .mg2player__volume:not(.mghover):not(.showed){opacity:0;visibility:hidden}.mg2player__video{position:absolute;top:50%;left:50%;width:100%;height:100%;-o-object-fit:contain;object-fit:contain;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transform:translate(-50%,-50%)}.mg2player:not(.mg2player_playing) .mg2player__video[poster]{-o-object-fit:cover;object-fit:cover}.mg2player__preload{position:absolute;top:50%;left:50%}.mg2player__controls{position:absolute;bottom:0;left:0;width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#fff;padding-top:10px;transition:opacity .3s ease,visibility .3s ease}.mg2player__controls:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;opacity:0;visibility:hidden;background:-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,0)),to(rgba(0,0,0,.85)));background:-webkit-linear-gradient(top,rgba(0,0,0,0) 0,rgba(0,0,0,.85) 100%);background:-moz-linear-gradient(top,rgba(0,0,0,0) 0,rgba(0,0,0,.85) 100%);background:-o-linear-gradient(top,rgba(0,0,0,0) 0,rgba(0,0,0,.85) 100%);background:linear-gradient(to bottom,rgba(0,0,0,0) 0,rgba(0,0,0,.85) 100%)}.mg2player__controls-cover{position:relative;z-index:2;margin-right:25px}.mg2player__controls-wrap{display:block;width:100%;height:30px}.mg2player__controls-wrap>*{display:table-cell}.mg2player_HD,.mg2player__btn,.mg2player__close,.mg2player__custom-btn,.mg2player__expand,.mg2player__play-btn,.mg2player__play-next,.mg2player__preload,.mg2player__start-btn,.mg2player__volume{line-height:1}.mg2player__preload{position:absolute;color:#fff;opacity:0;visibility:hidden;-webkit-animation:preload 1.5s infinite linear;animation:preload 1.5s infinite linear;transition:opacity .1s ease,visibility .1s ease;margin:-12px 0 0 -12px}.mg2player_preload .mg2player__preload{opacity:1;visibility:visible}.mg2player__preload:before{background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#spinner");content:"";width:24px;height:24px;display:block;transform:scale(1.25)}.mg2player__play-btn,.mg2player__play-next{position:relative;width:30px;height:30px;cursor:pointer}.mg2player_HD{position:absolute;right:0;bottom:auto;width:20px;height:20px;top:50%;transform:translate(0,-50%);cursor:pointer}.mg2player__play-btn:after,.mg2player__play-btn:before{position:absolute;top:0;left:0;width:24px;height:24px;transform:scale(1.25)}.mg2player__play-btn:before,.mg2player__start-btn:before{background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#play_arrow");content:"";width:24px;height:24px;display:block}.mg2player__play-btn:after,.mg2player__start-btn:after{background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#pause");content:"";width:24px;height:24px;display:none}.mg2player__start-btn:after{background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#pause");content:"";width:24px;height:24px;display:none}.mg2player__play-next:before{position:absolute;font-size:30px;top:0;left:0;background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#skip_next");content:"";width:24px;height:24px;display:block;transform:scale(1.25)}.mg2player_HD_disabled{color:#bbb}.mg2player_HD:before{position:absolute;top:-4px;left:-4px;background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#hd");content:"";width:24px;height:24px;display:block;transform:scale(1.25)}.mg2player__start-btn{position:absolute;width:60px;height:60px;color:#fff;cursor:pointer;top:50%;left:50%;transform:translate(-50%,-50%);border-radius:50%;background-color:rgba(0,0,0,.3);border:3px rgba(255,255,255,.5) solid}.mg2player__start-btn:after,.mg2player__start-btn:before{top:50%;left:50%;content:"";transform:translate(-50%,-50%) scale(2.17)}.mg2player:hover:not(.mg2player_playing) .mg2player__start-btn.mghover{background-color:rgba(0,0,0,.7);border:3px #fff solid;transition:background-color .15s ease-in-out,border-color .15s ease-in-out}.mg2player.mg2player_playing:hover .mg2player__start-btn.mghover{transition:none}.mg2player_playing .mg2player__play-btn:before,.mg2player_playing .mg2player__start-btn:before{display:none}.mg2player_playing .mg2player__play-btn:after,.mg2player_playing .mg2player__start-btn:after{display:block}.mg2player__time{font-size:11px;white-space:nowrap;padding:0 4px;width:1px;vertical-align:middle}.mg2player__time_slash{padding-left:0;padding-right:0}.mg2player__track{position:relative;z-index:2;vertical-align:middle;padding:0 5px;margin-bottom:4px;cursor:pointer}.mg2player__track-wrap{position:relative;height:2px;background:rgba(255,255,255,.2);vertical-align:inherit;width:100%;transition:height .2s}.mg2player__controls:hover .mg2player__track-wrap{height:5px}.mg2player__track-buffer{position:absolute;left:0;height:100%;background:rgba(255,255,255,.4)}.mg2player__track-played{position:absolute;left:0;height:100%;background:red}.mg2player__track-point{position:absolute;top:50%;background:red;width:10px;height:10px;border-radius:50%;margin-left:-5px;margin-top:-5px;cursor:pointer}.mg2player__volume{position:absolute;bottom:0;right:0;width:30px;height:30px;cursor:pointer;color:#fff;opacity:0;visibility:hidden;transition:opacity .3s ease,visibility .3s ease;z-index:3;margin-bottom:-3px;margin-right:-3px}.mg2player__volume:after,.mg2player__volume:before{position:absolute;font-size:30px;width:24px;height:24px;content:"";transform:scale(1.25)}.mg2player__volume:before{background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#volume_down_red");display:block}.mg2player__volume:after{background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#volume_off_red");display:none}.mg2player_mute .mg2player__volume:before{display:none}.mg2player_mute .mg2player__volume:after{display:block}.mg2player_controls .mg2player_mute .mg2player__volume{opacity:1;visibility:visible}.mg2player__volume-bar{display:none;position:absolute;bottom:100%;left:0;width:100%;height:70px;padding:3px 3px 15px 3px;border-radius:2px}.mg2player__volume-wrap{width:30%;position:relative;top:0;left:50%;transform:translate(-50%,0);height:100%;background:rgba(255,255,255,.4);cursor:pointer;border-radius:2px}.mg2player__volume-level{background:red;width:100%;height:100%;bottom:0;left:0;position:absolute;border-radius:2px}.mg2player__volume:hover .mg2player__volume-bar{display:block}.mg2player__close,.mg2player__expand{position:absolute;top:2px;cursor:pointer;color:#fff;font-size:20px}.mg2player__expand{left:5px}.mg2player__close{right:5px}.mg2player__expand:before{background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#expand");content:"";width:24px;height:24px;display:block}.mg2player__close:before{background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#cancel");content:"";width:24px;height:24px;display:block}.mg2player__time{font-size:12px;cursor:default}.mg2player__title{position:absolute;top:0;left:0;width:100%;z-index:9999;line-height:22px;font-weight:500;font-size:17px;color:#fff;font-family:Roboto,sans-serif;padding:10px 20px 0;text-align:left;text-decoration:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mg2player__custom-btn{padding:4px}.mg2player__custom-btn>img{width:100%;height:100%}.mg2player_HD:before,.mg2player__btn,.mg2player__close:before,.mg2player__custom-btn,.mg2player__expand:before,.mg2player__play-btn:after,.mg2player__play-btn:before,.mg2player__play-next:before,.mg2player__start-btn:after,.mg2player__start-btn:before,.mg2player__time,.mg2player__title,.mg2player__track-point,.mg2player__volume:after,.mg2player__volume:before{text-shadow:2px 1px 2px #000}.mg2player__center{text-align:center;vertical-align:middle}.mg2player__btn{position:absolute;top:50%;margin-top:-20px;color:#fff;font-size:40px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:0;visibility:hidden;transition:opacity .2s ease,visibility .2s ease}.mg2player__btn_left{left:8px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;justify-content:flex-start;margin-top:-10px}.mg2player__btn_right{right:8px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;justify-content:flex-end;margin-top:-10px}.mg2player__btn_left:before{background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#navigate_before");content:"";width:24px;height:24px;display:block;transform:scale(2)}.mg2player__btn_right:before{background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#navigate_next");content:"";width:24px;height:24px;display:block;transform:scale(2)}.mg2player_HD,.mg2player__close,.mg2player__custom-btn,.mg2player__expand,.mg2player__play-btn,.mg2player__play-next,.mg2player__start-btn,.mg2player__time,.mg2player__title,.mg2player__track,.mg2player__volume{opacity:0;visibility:hidden;transition:opacity .3s ease,visibility .3s ease}.mg2player__expand.showed,.mg2player_controls .mg2player_HD.showed,.mg2player_controls .mg2player__btn.showed,.mg2player_controls .mg2player__close.showed,.mg2player_controls .mg2player__custom-btn.showed,.mg2player_controls .mg2player__play-btn.showed,.mg2player_controls .mg2player__play-next.showed,.mg2player_controls .mg2player__start-btn.showed,.mg2player_controls .mg2player__time.showed,.mg2player_controls .mg2player__title.showed,.mg2player_controls .mg2player__track.showed,.mg2player_controls .mg2player__volume.showed{opacity:1;visibility:visible}.mg2player.mg2player_controls:not(.mg2player_playing) .mg2player_HD.mghover,.mg2player.mg2player_controls:not(.mg2player_playing) .mg2player__btn.mghover,.mg2player.mg2player_controls:not(.mg2player_playing) .mg2player__close.mghover,.mg2player.mg2player_controls:not(.mg2player_playing) .mg2player__custom-btn.mghover,.mg2player.mg2player_controls:not(.mg2player_playing) .mg2player__play-btn.mghover,.mg2player.mg2player_controls:not(.mg2player_playing) .mg2player__play-next.mghover,.mg2player.mg2player_controls:not(.mg2player_playing) .mg2player__time.mghover,.mg2player.mg2player_controls:not(.mg2player_playing) .mg2player__track.mghover,.mg2player.mg2player_controls:not(.mg2player_playing) .mg2player__volume.mghover,.mg2player:not(.mg2player_playing) .mg2player__start-btn.mghover,.mg2player:not(.mg2player_playing) .mg2player__title.mghover,.mg2player:not(.mg2player_playing):before{opacity:1;visibility:visible}.mg2player.mg2player_controls:hover .mg2player_HD.mghover,.mg2player.mg2player_controls:hover .mg2player__btn.mghover,.mg2player.mg2player_controls:hover .mg2player__close.mghover,.mg2player.mg2player_controls:hover .mg2player__controls.mghover:before,.mg2player.mg2player_controls:hover .mg2player__custom-btn.mghover,.mg2player.mg2player_controls:hover .mg2player__play-btn.mghover,.mg2player.mg2player_controls:hover .mg2player__play-next.mghover,.mg2player.mg2player_controls:hover .mg2player__time.mghover,.mg2player.mg2player_controls:hover .mg2player__track.mghover,.mg2player.mg2player_controls:hover .mg2player__volume.mghover,.mg2player:hover .mg2player__expand.mghover,.mg2player:hover .mg2player__title.mghover{opacity:1;visibility:visible}.mg2player__track{-moz-flex:1;flex:1}.mg2player__time_slash{-moz-flex:0 0 8px;flex:0 0 8px}.mg2player.mgred:before{content:"";position:absolute;top:0;right:0;left:0;padding-bottom:14%;z-index:1;opacity:0;visibility:hidden;pointer-events:none;background:-webkit-gradient(linear,left top,left bottom,from(#010102),color-stop(50%,rgba(1,1,2,.4)),color-stop(80%,rgba(1,1,2,.1)),to(rgba(1,1,2,0)));background:-webkit-linear-gradient(top,#010102 0,rgba(1,1,2,.4) 50%,rgba(1,1,2,.1) 80%,rgba(1,1,2,0) 100%);background:-moz-linear-gradient(top,#010102 0,rgba(1,1,2,.4) 50%,rgba(1,1,2,.1) 80%,rgba(1,1,2,0) 100%);background:-o-linear-gradient(top,#010102 0,rgba(1,1,2,.4) 50%,rgba(1,1,2,.1) 80%,rgba(1,1,2,0) 100%);background:linear-gradient(to bottom,#010102 0,rgba(1,1,2,.4) 50%,rgba(1,1,2,.1) 80%,rgba(1,1,2,0) 100%)}.mg2player.mgred .mg2player__controls-wrap{display:-ms-flex;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}.mg2player.mgred .mg2player_HD{position:relative}.ctplay .mg2player.mgred .mg2player__start-btn,.ctplay .mg2player.mgred .mg2player__start-btn.mghover,.mg2player.mgred .mg2player__start-btn,.mg2player.mgred .mg2player__start-btn.mghover{background:red;border-color:red;transition:background-color 1s}.ctplay .mg2player.mgred:hover:not(.mg2player_playing) .mg2player__start-btn.mghover,.mg2player.mgred:hover:not(.mg2player_playing) .mg2player__start-btn.mghover{background-color:rgba(1,0,0,.1);border-color:red}.mg2player.mgred.mg2player_playing:hover .mg2player__start-btn.mghover{transition:none}.mg2player.mgred .mg2player__time{-ms-grid-row-align:center;align-self:center}.mg2player.mgred .mg2player__track-wrap{top:50%}.mg2player.mgred .mg2player__volume{color:red}.mg2player.mgred .mg2player__start-btn:before{text-shadow:none;position:relative}.mg2player.mgred .mg2player_HD,.mg2player.mgred .mg2player__custom-btn,.mg2player.mgred .mg2player__play-btn,.mg2player.mgred .mg2player__play-next,.mg2player.mgred .mg2player__time,.mg2player.mgred .mg2player__track,.mg2player.mgred .mg2player__volume{-moz-flex:0 0 35px;flex:0 0 35px}.mg2player.mgred .mg2player__track{-moz-flex:1;flex:1}.mg2player.mgred .mg2player__time_slash{-moz-flex:0 0 8px;flex:0 0 8px}.mg2player.mgred .mg2player_HD,.mg2player.mgred .mg2player__play-btn,.mg2player.mgred .mg2player__play-next,.mg2player.mgred .mg2player__time,.mg2player.mgred .mg2player__track{opacity:1;visibility:visible;display:none}.mg2player.mgred.mg2player_controls .mg2player_HD.showed,.mg2player.mgred.mg2player_controls .mg2player__custom-btn.showed,.mg2player.mgred.mg2player_controls .mg2player__play-btn.showed,.mg2player.mgred.mg2player_controls .mg2player__play-next.showed,.mg2player.mgred.mg2player_controls .mg2player__time.showed,.mg2player.mgred.mg2player_controls .mg2player__track.showed{display:block}.mg2player.mgred.mg2player_controls:not(.mg2player_playing) .mg2player_HD.mghover,.mg2player.mgred.mg2player_controls:not(.mg2player_playing) .mg2player__custom-btn.mghover,.mg2player.mgred.mg2player_controls:not(.mg2player_playing) .mg2player__play-btn.mghover,.mg2player.mgred.mg2player_controls:not(.mg2player_playing) .mg2player__play-next.mghover,.mg2player.mgred.mg2player_controls:not(.mg2player_playing) .mg2player__time.mghover,.mg2player.mgred.mg2player_controls:not(.mg2player_playing) .mg2player__track.mghover,.mg2player.mgred:not(.mg2player_playing):before{display:block}.mg2player.mgred.mg2player_controls:hover .mg2player_HD.mghover,.mg2player.mgred.mg2player_controls:hover .mg2player__custom-btn.mghover,.mg2player.mgred.mg2player_controls:hover .mg2player__play-btn.mghover,.mg2player.mgred.mg2player_controls:hover .mg2player__play-next.mghover,.mg2player.mgred.mg2player_controls:hover .mg2player__time.mghover,.mg2player.mgred.mg2player_controls:hover .mg2player__track.mghover{display:block}.ctplay .mg2player.mgred:not(.mg2player_playing) .mg2player__close.mghover,.ctplay .mg2player.mgred:not(.mg2player_playing) .mg2player__custom-btn.mghover,.ctplay .mg2player.mgred:not(.mg2player_playing) .mg2player__play-btn.mghover,.ctplay .mg2player.mgred:not(.mg2player_playing) .mg2player__play-next.mghover,.ctplay .mg2player.mgred:not(.mg2player_playing) .mg2player__start-btn.mghover,.ctplay .mg2player.mgred:not(.mg2player_playing) .mg2player__time.mghover,.ctplay .mg2player.mgred:not(.mg2player_playing) .mg2player__track.mghover,.ctplay .mg2player.mgred:not(.mg2player_playing) .mg2player__volume.mghover,.ctplay .mg2player.mgred:not(.mg2player_playing) .mg2player__volume.showed{opacity:1;visibility:visible;display:block}.mg2player.mgred .mg2player__volume-bar{padding:3px}@media only screen and (max-device-width:480px){.mg2player.mgred .mg2player__start-btn:before{top:0}.mg2player__play-btn:after,.mg2player__play-btn:before,.mg2player__play-next:before,.mg2player__volume:after,.mg2player__volume:before{transform:scale(.83)}}@media (max-width:480px){.mg2player__controls-cover{margin-right:30px}.mg2player__preload:before{transform:scale(2)}.mg2player_HD,.mg2player__play-btn,.mg2player__play-next,.mg2player__volume{width:30px;height:30px}.mg2player__time{font-size:12px}.mg2player_HD:before,.mg2player__play-btn:after,.mg2player__play-btn:before,.mg2player__play-next:before,.mg2player__volume:after,.mg2player__volume:before{transform:scale(.8)}.mg2player__start-btn{width:80px;height:80px;font-size:70px}.mg2player.mgred .mg2player__start-btn:before{top:26px;left:26px;transform:scale(2.91);width:24px;height:24px}.mg2player__volume:hover .mg2player__volume-bar{display:none}}@media (min-width:768px){.mg2player__controls-cover{margin-right:30px}.mg2player__preload:before{transform:scale(1.6)}.mg2player_HD,.mg2player__play-btn,.mg2player__play-next,.mg2player__volume{width:30px;height:30px}.mg2player_HD:before,.mg2player__play-btn:after,.mg2player__play-btn:before,.mg2player__play-next:before{top:0;left:0}.mg2player__time{font-size:12px}.mg2player__start-btn{width:80px;height:80px}.mg2player__start-btn:after,.mg2player__start-btn:before{transform:scale(3.33);margin:-12px 0 0 -12px}}@media (min-width:1024px){.mg2player__preload:before{transform:scale(2)}.mg2player__controls-cover{margin:2px 35px 2px 5px}.mg2player_HD:before,.mg2player__play-btn:after,.mg2player__play-btn:before,.mg2player__play-next:before{top:4px;left:4px}.mg2player__track{padding:0 10px}.mg2player__volume{bottom:2px;right:5px}.mg2player_HD:before,.mg2player__play-btn:after,.mg2player__play-btn:before,.mg2player__play-next:before,.mg2player__volume:after,.mg2player__volume:before{font-size:30px;transform:scale(1.25)}.mg2player__expand{font-size:30px;transform:scale(1.25)}.mg2player__close{font-size:32px;transform:scale(1.33)}.mg2player__btn{font-size:50px;width:40px;overflow:hidden}.mg2player__btn_left:before{position:relative}.mg2player__btn_right:before{position:relative}.mg2player__start-btn{width:90px;height:90px;font-size:80px}}.video-info__wrap{font-family:Roboto,sans-serif}.fake>.video-info__centering,.video-info__centering{display:table;width:100%;height:100%}.video-info__centering-cell{display:table-cell;vertical-align:middle;text-align:center;padding:20px 0}.video-info__wrap{margin:0 auto;background:#000;max-width:1100px;width:-webkit-calc(100vw - 40px);width:-moz-calc(100vw - 40px);width:calc(100vw - 40px);position:relative;box-shadow:0 0 150px 0 rgba(0,0,0,.9);text-align:left}div.video-info__player{position:relative;height:100%}div.video-info__player.ad-loading .mg2player .mg2player__preload{visibility:visible;opacity:1}div.video-info__player.ad-loading div.adPlayerContainerDiv.showed,div.video-info__player.ad-loading div.mgAdPlayerContainerDiv.showed{background-color:transparent!important}.video-info__title{background:#111;padding:10px}.video-info__title-cell{font-weight:300;font-size:13px;line-height:1.3;margin-bottom:3px;color:#fff}.video-info__sub-title{color:#898989;font-size:11px;line-height:1.3}.mgCloseCrossButton{background:#000;position:absolute;top:0;right:0;width:19px;height:19px;margin:-19px -19px 0 0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mgCloseCrossButton:after,.mgCloseCrossButton:before{content:"";position:absolute;background:#777;transform:rotate(-45deg);transition:background .2s ease}.mgCloseCrossButton:after{width:1px;height:11px;top:4px;left:9px}.mgCloseCrossButton:before{width:11px;height:1px;top:9px;left:4px}.swiper-slide-lenta:first-child{display:none!important}.mgline.vrline.vrnofloat{float:none;width:100%;max-width:100%;border-radius:0;box-shadow:none}.mgline.vrline.vrnofloat img.mcimg{width:100%;height:auto}.video-info__footer{white-space:nowrap;position:relative;overflow-x:auto}.video-info__logo{position:absolute;right:0;bottom:-25px}.video-info__logo img{outline:0;border:none}.video-info__footer.ps--active-x{padding-bottom:11px}.video-info__footer>.ps__scrollbar-x-rail,.video-info__footer>.ps__scrollbar-y-rail{opacity:.7}.video-info__footer.ps>.ps__scrollbar-y-rail>.ps__scrollbar-y{background:#777;border-radius:0;right:0}.video-info__footer.ps>.ps__scrollbar-x-rail>.ps__scrollbar-x{background:#777;border-radius:0;bottom:0}.video-info__footer.ps:hover.ps--in-scrolling.ps--y>.ps__scrollbar-y-rail>.ps__scrollbar-y{background-color:#777;width:10px}.video-info__footer.ps:hover.ps--in-scrolling.ps--x>.ps__scrollbar-x-rail>.ps__scrollbar-x{background-color:#777;height:10px}.video-info__footer.ps>.ps__scrollbar-y-rail{width:10px}.video-info__footer.ps>.ps__scrollbar-x-rail{height:10px}@media (min-width:1024px){.video-info__title-cell{font-size:28px}.video-info__sub-title{font-size:15px}.video-info__title{padding:20px}.video-info__logo{opacity:.6;transition:opacity .2s ease}.video-info__logo:hover{opacity:1}.mgCloseCrossButton{width:41px;height:41px;line-height:42px;font-size:18px;margin:0 -41px 0 0}.mgCloseCrossButton:after{width:1px;height:21px;top:10px;left:20px}.mgCloseCrossButton:before{width:21px;height:1px;top:20px;left:10px}.mgCloseCrossButton:hover:after,.mgCloseCrossButton:hover:before{background:#fff}div.adMuteButton:after,div.adMuteButton:before,div.mgMuteButton:after,div.mgMuteButton:before{bottom:2px;right:5px;width:30px;height:30px}div.adMuteButton:after,div.adMuteButton:before,div.mgMuteButton:after,div.mgMuteButton:before{transform:scale(.75);left:0;top:0}}@media (min-width:480px) and (orientation:landscape){.video-info__wrap{width:380px}.video-info__wrap:after{content:"";clear:both;display:table}.video-info__footer{white-space:normal;padding:5px 11px 5px 5px;height:247px}.video-info__title-cell{max-height:37px;overflow:hidden;line-height:1.4}.video-info__sub-title{line-height:1.4;max-height:30px;overflow:hidden}.video-info__title{height:90px;overflow:hidden}.video-info__frame{height:157px;overflow:hidden}}@media (min-width:540px) and (orientation:landscape){.video-info__wrap{width:460px}.video-info__frame{height:190px}.video-info__footer{height:280px}}@media (min-width:760px) and (orientation:landscape){.video-info__wrap{width:580px}.video-info__frame{height:240px}.video-info__footer{height:330px}div.adMuteButton:after,div.adMuteButton:before,div.mgMuteButton:after,div.mgMuteButton:before{width:30px;height:30px}div.adMuteButton:after,div.adMuteButton:before{transform:scale(.83)}}@media (min-width:900px) and (orientation:landscape){.video-info__wrap{width:720px}.video-info__frame{height:298px}.video-info__footer{height:388px}}@media (min-width:1024px) and (orientation:landscape){.video-info__wrap{width:800px}.video-info__frame{height:331px}.video-info__footer{height:497px}.video-info__title{height:166px}.video-info__title-cell{max-height:80px}.video-info__sub-title{max-height:43px}}@media (min-width:1580px) and (orientation:landscape){.video-info__wrap{width:1100px}.video-info__frame{height:456px}.video-info__footer{height:612px;padding:15px 24px 10px 15px}.video-info__title{height:156px;padding:15px 42px}}.mg-progress-line{height:6px}.mg-progress-point{background-color:#c20509;height:4px;position:relative;top:-3px}.vrline div.mcimg a{position:relative;display:block}.vrline div.mcimg a:before{content:"";display:block;position:absolute;top:0;left:0;width:100%;height:100%;z-index:2;background:-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,.06)),to(rgba(0,0,0,.4)));background:-webkit-linear-gradient(top,rgba(0,0,0,.06) 0,rgba(0,0,0,.4) 100%);background:-moz-linear-gradient(top,rgba(0,0,0,.06) 0,rgba(0,0,0,.4) 100%);background:-o-linear-gradient(top,rgba(0,0,0,.06) 0,rgba(0,0,0,.4) 100%);background:linear-gradient(to bottom,rgba(0,0,0,.06) 0,rgba(0,0,0,.4) 100%)}.mctitle a{font-size:14px;line-height:1.3;color:#222;font-family:Roboto,"Open Sans",sans-serif}.mg-video-footer{display:none;position:absolute;bottom:0;left:0;right:0;color:#fff;font-size:11px;padding:8px 52px 8px 10px;line-height:1;z-index:3}.mg-video-footer:before{content:"";display:block;position:absolute;bottom:0;right:0;width:42px;height:42px;background:#222}.mg-video-footer:after{content:"";display:block;position:absolute;bottom:14px;right:14px;border-top:8px solid transparent;border-bottom:8px solid transparent;border-left:12px solid #eee}.mg-video-footer>*{margin-left:4px}.mg-video-footer>:first-child{margin-left:0}.vrline .mg-video-footer{display:block!important}.mg-total-views{white-space:nowrap}.mg-total-views{float:left}.mg-video-format{float:right;font-weight:700;background:#cb4329;padding:3px 4px 2px;border-radius:3px;line-height:1;margin:-3px 0 0 0}.mg-video-duration{float:right}#MarketGidComposite .vrline .image-container:after{display:none}@media screen and (min-width:481px){.mg-total-views{position:absolute;top:5px;left:5px}.vrline div.mcimg a:after{bottom:7px;right:8px}.mg-video-footer{top:0;font-size:10px}.mg-video-footer:before{width:24px;height:24px}.mg-video-footer:after{bottom:6px;right:6px;border-top:6px solid transparent;border-bottom:6px solid transparent;border-left:10px solid #eee}.mg-video-duration{position:absolute;bottom:6px;left:0}.mg-video-format{position:absolute;bottom:4px;right:28px}.vrline div.mcimg a:before{background:rgba(0,0,0,.5)}}@media screen and (min-width:1290px){.mg-total-views{display:block!important}.vrline div.mcimg a:after{bottom:8px;right:9px}.mg-video-footer{top:auto;font-size:10px;padding-right:42px}.mg-video-duration{position:static;bottom:auto;left:auto;margin-left:3px;float:right}.mg-video-format{position:static;bottom:auto;right:auto}.mg-total-views{position:static;top:auto;left:auto}.mg-video-footer:before{width:32px;height:32px}.mg-video-footer:after{bottom:8px;right:9px;border-top:8px solid transparent;border-bottom:8px solid transparent;border-left:12px solid #eee}.vrline div.mcimg a:before{background:-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,.06)),to(rgba(0,0,0,.4)));background:-webkit-linear-gradient(top,rgba(0,0,0,.06) 0,rgba(0,0,0,.4) 100%);background:-moz-linear-gradient(top,rgba(0,0,0,.06) 0,rgba(0,0,0,.4) 100%);background:-o-linear-gradient(top,rgba(0,0,0,.06) 0,rgba(0,0,0,.4) 100%);background:linear-gradient(to bottom,rgba(0,0,0,.06) 0,rgba(0,0,0,.4) 100%)}}.mgCover{position:absolute;width:100%;height:100%;left:0;top:0;z-index:100000000;display:none}.mg-total-views:before{content:"";display:inline-block;vertical-align:top;width:11px;height:8px;margin-right:2px;background:url(data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMy43OCA4Ljg2Ij48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6I2ZmZjt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPkFydGJvYXJkIDM8L3RpdGxlPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTEzLjYzLDMuOUE4LjA3LDguMDcsMCwwLDAsNi44OSwwLDguMDcsOC4wNywwLDAsMCwuMTUsMy45LDEsMSwwLDAsMCwuMTUsNWE4LjA3LDguMDcsMCwwLDAsNi43NCwzLjlBOC4wNSw4LjA1LDAsMCwwLDEzLjYzLDVhMSwxLDAsMCwwLDAtMS4wNlptLTYuNzQsNGEzLjUsMy41LDAsMSwxLDMuNS0zLjVBMy41LDMuNSwwLDAsMSw2Ljg5LDcuOTNaIi8+PGNpcmNsZSBjbGFzcz0iY2xzLTEiIGN4PSI2Ljg5IiBjeT0iNC40MyIgcj0iMS42OSIvPjwvc3ZnPg==) no-repeat center;background-size:contain}.mg-video-tag{text-align:left!important;left:10px}.mg-video-tag{line-height:18px;width:100%;text-align:right;position:absolute;z-index:999;top:10px;right:10px}.mg-video-tag>span{text-align:left;background:#007eff;color:#fff;padding:3px 5px 2px 5px;font-family:"Open Sans",sans-serif;font-weight:700;font-size:12px;box-sizing:border-box;width:100%}.mgline:not(.vrline) .mg-video-tag{display:none}.mgline:nth-child(3) .mg-video-tag>span{background:#786efc!important}.mgline:nth-child(4) .mg-video-tag>span{background:#fb6efc!important}.mgline:nth-child(5) .mg-video-tag>span{background:#912692!important}.mgline:nth-child(6) .mg-video-tag>span{background:#92264f!important}.mgline:nth-child(7) .mg-video-tag>span{background:#ff70a6!important}.mgline:nth-child(8) .mg-video-tag>span{background:#25b8fe!important}.mgline:nth-child(9) .mg-video-tag>span{background:#54966a!important}.mgline:nth-child(10) .mg-video-tag>span{background:#d82903!important}.mgline:nth-child(11) .mg-video-tag>span{background:#c2880a!important}.mgline:nth-child(12) .mg-video-tag>span{background:#342dcd!important}.mgline:nth-child(13) .mg-video-tag>span{background:#787878!important}.mgline:nth-child(14) .mg-video-tag>span{background:#05016b!important}.mgline:nth-child(15) .mg-video-tag>span{background:#0c5f13!important}.mgline:nth-child(16) .mg-video-tag>span{background:#879565!important}.videoTimeLeftText{font-size:12px;opacity:.75;text-shadow:0 0 2px rgba(0,0,0,.5);position:absolute;left:.75em;bottom:.75em;color:#fff;display:none;z-index:100000001}.adEnable .videoTimeLeftText{display:block}div.adPlayerContainerDiv.showed,div.mgAdPlayerContainerDiv.showed{z-index:9999998;opacity:1;visibility:visible;background-color:transparent;position:absolute;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:flex;display:-webkit-flex;align-items:center;justify-content:center;left:0;top:0}div.adPlayerDiv.showed,div.mgAdPlayerDiv.showed{z-index:100;opacity:1;width:100%;height:100%;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:flex;display:-webkit-flex;align-items:center;justify-content:center}div.adPlayerContainerDiv,div.mgAdPlayerContainerDiv{z-index:-100;opacity:0;visibility:hidden;background-color:transparent;position:absolute;left:0;top:0}div.adPlayerContainerDiv.partial,div.mgAdPlayerContainerDiv.partial{position:absolute;top:0;left:0;width:100%;height:100%}div.adPlayerContainerDiv.block,div.mgAdPlayerContainerDiv.block{position:relative;margin-bottom:10px;overflow:hidden;transition:height 2s}div.adPlayerDiv,div.mgAdPlayerDiv{z-index:-1;opacity:0;overflow:hidden;position:relative;height:100%}.overflow-allowed div.adPlayerDiv,.overflow-allowed div.mgAdPlayerDiv{overflow:visible}div.adPlayerContainerDiv.partial>div.adPlayerDiv>div:not(.adCloseButton):not(.adLinkButton),div.mgAdPlayerContainerDiv.partial>div.mgAdPlayerDiv>div:not(.mgCloseButton):not(.mgLinkButton){top:0;left:0}div.adCloseButton,div.mgCloseButton{display:none;position:absolute;top:0;right:0;width:50px;height:50px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:2}div.adCloseButton.showed,div.mgCloseButton.showed{display:block}div.adCloseButton:after,div.mgCloseButton:after{position:absolute;top:0;right:0;filter:drop-shadow(0 0 3px #000);line-height:20px;margin:3px;background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#close");content:"";width:24px;height:24px;display:block}div.adPlayerContainerDiv.showed div.adCloseButton,div.mgAdPlayerContainerDiv.showed div.mgCloseButton{display:none;z-index:9999999;right:0}div.adPlayerContainerDiv.showed div.adCloseButton.showed,div.mgAdPlayerContainerDiv.showed div.mgCloseButton.showed{display:block}div.adMuteButton,div.mgMuteButton{display:none;speak:none;line-height:1;position:absolute;bottom:6px;right:6px;width:20px;height:25px;cursor:pointer;transition:opacity .3s ease,visibility .3s ease;z-index:100;filter:drop-shadow(0 0 3px #000)}div.adMuteButton.showed,div.mgMuteButton.showed{display:block}div.adMuteButton:after,div.adMuteButton:before,div.mgMuteButton:after,div.mgMuteButton:before{position:absolute;height:24px;width:24px;top:50%;left:50%;transform:translate(-50%,-50%) scale(.75)}div.adMuteButton:before,div.mgMuteButton:before{background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#volume_down");content:"";width:24px;height:24px;display:block}div.adMuteButton:after,div.mgMuteButton:after{display:none}div.adMuteButton.muted:before,div.mgMuteButton.muted:before{display:none}div.adMuteButton.muted:after,div.mgMuteButton.muted:after{background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#volume_off");content:"";width:24px;height:24px;display:block}@-webkit-keyframes mg-spinner-easespin{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mg-spinner-easespin{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@-webkit-keyframes mg-spinner-left-spin{0%{transform:rotate(130deg)}50%{transform:rotate(-5deg)}100%{transform:rotate(130deg)}}@keyframes mg-spinner-left-spin{0%{transform:rotate(130deg)}50%{transform:rotate(-5deg)}100%{transform:rotate(130deg)}}@-webkit-keyframes mg-right-spin{0%{transform:rotate(-130deg)}50%{transform:rotate(5deg)}100%{transform:rotate(-130deg)}}@keyframes mg-right-spin{0%{transform:rotate(-130deg)}50%{transform:rotate(5deg)}100%{transform:rotate(-130deg)}}.mg-spinner{position:absolute;left:50%;top:50%;width:64px;margin-left:-32px;z-index:999999;pointer-events:none}.mg-spinner.show .mg-spinner-container{pointer-events:none;position:absolute;width:100%;padding-bottom:100%;top:50%;left:50%;margin-top:-50%;margin-left:-50%;animation:mg-spinner-linspin 1.568s linear infinite;-webkit-animation:mg-spinner-linspin 1.568s linear infinite}.mg-spinner.show .mg-spinner-rotator{position:absolute;width:100%;height:100%;-webkit-animation:mg-spinner-easespin 5332ms cubic-bezier(.4,0,.2,1) infinite both;animation:mg-spinner-easespin 5332ms cubic-bezier(.4,0,.2,1) infinite both}.mg-spinner.show .mg-spinner-left{right:49%}.mg-spinner.show .mg-spinner-left{position:absolute;top:0;left:0;bottom:0;overflow:hidden}.mg-spinner.show .mg-spinner-left .mg-spinner-circle{left:0;right:-100%;border-right-color:transparent;-webkit-animation:mg-spinner-left-spin 1333ms cubic-bezier(.4,0,.2,1) infinite both;animation:mg-spinner-left-spin 1333ms cubic-bezier(.4,0,.2,1) infinite both}.mg-spinner.show .mg-spinner-circle{box-sizing:border-box;position:absolute;width:200%;height:100%;border-style:solid;border-color:#ddd #ddd transparent;border-radius:50%;border-width:6px}.mg-spinner.show .mg-spinner-right{left:49%}.mg-spinner.show .mg-spinner-right{position:absolute;top:0;right:0;bottom:0;overflow:hidden}.mg-spinner.show .mg-spinner-right .mg-spinner-circle{left:-100%;right:0;border-left-color:transparent;-webkit-animation:mg-right-spin 1333ms cubic-bezier(.4,0,.2,1) infinite both;animation:mg-right-spin 1333ms cubic-bezier(.4,0,.2,1) infinite both}.image-container div.video-info__player{position:absolute;left:0;top:0;width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;align-items:center;justify-content:center;background-color:#000;z-index:9999;transition:none!important;overflow:hidden}.image-container div.video-info__player.block{position:relative}.image-container div.video-info__player *{transition:none}.image-container div.video-info__player.overflow-allowed{overflow:visible;background:0 0}.mgline.vrline .image-container{display:block!important}html>div{display:none!important}div.adSkipButton,div.mgSkipButton{position:absolute;top:0;left:0;padding:0 8px;height:25px;text-shadow:2px 1px 2px #000;background-color:rgba(0,0,0,.4);color:#fff;font-family:Helvetica,Arial,fallback,sans-serif;font-size:12px;text-align:center;line-height:25px;transition:all .15s ease-in-out;display:none;z-index:101;cursor:pointer}div.adSkipButton.showed,div.mgSkipButton.showed{display:block}div.adPlayerDiv #av-container #av-inner #gui #skip-btn,div.mgAdPlayerDiv #av-container #av-inner #gui #skip-btn{top:0;bottom:auto;left:0;right:auto;padding:0 8px;height:25px;text-shadow:2px 1px 2px #000;background-color:rgba(0,0,0,.4);color:#fff;font-family:Helvetica,Arial,fallback,sans-serif;font-size:12px;text-align:center;line-height:25px;transition:all .15s ease-in-out;z-index:2;cursor:pointer;border:none;text-transform:none}div.adPlayerDiv #av-container #av-inner #gui #timer,div.mgAdPlayerDiv #av-container #av-inner #gui #timer{height:25px;width:25px;text-shadow:2px 1px 2px #000;background-color:rgba(0,0,0,.4);font-size:12px;text-align:center;line-height:25px;border:none;text-transform:none}.clickDiv{position:absolute;height:100%;width:100%;z-index:10000000;left:0;top:0}div.adLinkButton{position:absolute;color:#fff;top:auto;left:auto;bottom:40px;right:40px;height:auto;padding:6px 16px;background:rgba(51,51,51,.8);border-radius:4px;letter-spacing:-.05em;line-height:18px;text-transform:uppercase;font-weight:700;font-size:16px;text-shadow:none}div.adLinkButton:hover{background:#666}@media (max-width:480px){div.adLinkButton{padding:6px 8px!important;bottom:0!important;right:50%!important;transform:translate(50%,-50%);font-size:12px!important;line-height:13px!important}}div.adLinkButton.showed{display:block;z-index:9999999}#av-container #av-inner #gui:before{background:0 0}#av-container.desktop #gui #timeline.av-overlay{opacity:1;bottom:-4px!important;right:0!important;left:0!important}#av-container.desktop #av-inner #gui #timeline #timeline-moveto,#av-container.desktop #gui #buttons,#av-container.desktop #gui #timeline,#av-container.desktop #gui:before{opacity:1}#aniview-credit{display:none!important}#av-container #av-inner #slot #videoslot{background-color:transparent!important}.ps{touch-action:auto;overflow:hidden!important;-ms-overflow-style:none}@supports (-ms-overflow-style:none){.ps{overflow:auto!important}}@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){.ps{overflow:auto!important}}.ps.ps--active-x>.ps__scrollbar-x-rail,.ps.ps--active-y>.ps__scrollbar-y-rail{display:block;background-color:transparent}.ps.ps--in-scrolling.ps--x>.ps__scrollbar-x-rail{background-color:#eee;opacity:.9}.ps.ps--in-scrolling.ps--x>.ps__scrollbar-x-rail>.ps__scrollbar-x{background-color:#999;height:10px}.ps.ps--in-scrolling.ps--y>.ps__scrollbar-y-rail{background-color:#eee;opacity:.9}.ps.ps--in-scrolling.ps--y>.ps__scrollbar-y-rail>.ps__scrollbar-y{background-color:#999;width:10px}.ps>.ps__scrollbar-x-rail{display:none;position:absolute;opacity:0;transition:background-color .2s linear,opacity .2s linear;bottom:0;height:15px}.ps>.ps__scrollbar-x-rail>.ps__scrollbar-x{position:absolute;background-color:#aaa;border-radius:6px;transition:background-color .2s linear,height .2s linear,width .2s ease-in-out,border-radius .2s ease-in-out;bottom:2px;height:6px}.ps>.ps__scrollbar-x-rail:active>.ps__scrollbar-x,.ps>.ps__scrollbar-x-rail:hover>.ps__scrollbar-x{height:10px}.ps>.ps__scrollbar-y-rail{display:none;position:absolute;opacity:0;transition:background-color .2s linear,opacity .2s linear;right:0;width:15px}.ps>.ps__scrollbar-y-rail>.ps__scrollbar-y{position:absolute;background-color:#aaa;border-radius:6px;transition:background-color .2s linear,height .2s linear,width .2s ease-in-out,border-radius .2s ease-in-out;right:2px;width:6px}.ps>.ps__scrollbar-y-rail:active>.ps__scrollbar-y,.ps>.ps__scrollbar-y-rail:hover>.ps__scrollbar-y{width:10px}.ps:hover.ps--in-scrolling.ps--x>.ps__scrollbar-x-rail{background-color:#eee;opacity:.9}.ps:hover.ps--in-scrolling.ps--x>.ps__scrollbar-x-rail>.ps__scrollbar-x{background-color:#999;height:10px}.ps:hover.ps--in-scrolling.ps--y>.ps__scrollbar-y-rail{background-color:#eee;opacity:.9}.ps:hover.ps--in-scrolling.ps--y>.ps__scrollbar-y-rail>.ps__scrollbar-y{background-color:#999;width:10px}.ps:hover>.ps__scrollbar-x-rail,.ps:hover>.ps__scrollbar-y-rail{opacity:.6}.ps:hover>.ps__scrollbar-x-rail:hover{background-color:#eee;opacity:.9}.ps:hover>.ps__scrollbar-x-rail:hover>.ps__scrollbar-x{background-color:#999}.ps:hover>.ps__scrollbar-y-rail:hover{background-color:#eee;opacity:.9}.ps:hover>.ps__scrollbar-y-rail:hover>.ps__scrollbar-y{background-color:#999}div.video-info__player.large,div.video-info__player.medium,div.video-info__player.small{position:fixed;bottom:10px;z-index:9999999;opacity:1;visibility:visible;background-color:#000}div.video-info__player.large div.adPlayerDiv,div.video-info__player.medium div.adPlayerDiv,div.video-info__player.small div.adPlayerDiv{z-index:100;opacity:1;position:relative}div.video-info__player.large.left,div.video-info__player.medium.left,div.video-info__player.small.left{left:10px;top:auto}div.video-info__player.small{width:401px}div.video-info__player.large.right,div.video-info__player.medium.right,div.video-info__player.small.right{right:10px;left:auto;top:auto}div.video-info__player.large.top,div.video-info__player.medium.top,div.video-info__player.small.top{top:10px;bottom:auto}div.video-info__player.large.bottom,div.video-info__player.medium.bottom,div.video-info__player.small.bottom{bottom:10px;top:auto}div.video-info__player.medium{width:501px}div.video-info__player.large{width:601px}div.video-info__player.large div.adCloseButton.showed,div.video-info__player.medium div.adCloseButton.showed,div.video-info__player.small div.adCloseButton.showed{display:block!important;z-index:9999999!important}div.video-info__player.large div.adCloseButton,div.video-info__player.medium div.adCloseButton,div.video-info__player.small div.adCloseButton{display:none!important}@media only screen and (max-device-width:480px){div.video-info__player.large.left,div.video-info__player.large.right,div.video-info__player.medium.left,div.video-info__player.medium.right,div.video-info__player.small.left,div.video-info__player.small.right{position:fixed;bottom:0;right:-480px;transition:right 1s;width:70%}div.video-info__player.large.left.showed,div.video-info__player.large.right.showed,div.video-info__player.medium.left.showed,div.video-info__player.medium.right.showed,div.video-info__player.small.left.showed,div.video-info__player.small.right.showed{position:fixed;bottom:0;right:0;transition:right 1s}div.video-info__player.large.left.upper,div.video-info__player.large.right.upper,div.video-info__player.medium.left.upper,div.video-info__player.medium.right.upper,div.video-info__player.small.left.upper,div.video-info__player.small.right.upper{top:0;right:auto;left:50%;transform:translate(-50%,0)}div.video-info__player.large.left.upper.showed,div.video-info__player.large.right.upper.showed,div.video-info__player.medium.left.upper.showed,div.video-info__player.medium.right.upper.showed,div.video-info__player.small.left.upper.showed,div.video-info__player.small.right.upper.showed{opacity:1;visibility:visible}div.video-info__player.large.bottom,div.video-info__player.large.top,div.video-info__player.medium.bottom,div.video-info__player.medium.top,div.video-info__player.small.bottom,div.video-info__player.small.top{position:fixed;right:auto;left:50%;transform:translate(-50%,0);width:70%;margin-bottom:0}div.video-info__player.large.top,div.video-info__player.medium.top,div.video-info__player.small.top{top:0;bottom:auto}div.video-info__player.large.bottom,div.video-info__player.medium.bottom,div.video-info__player.small.bottom{bottom:0;top:auto}div.video-info__player.large.bottom.showed,div.video-info__player.large.top.showed,div.video-info__player.medium.bottom.showed,div.video-info__player.medium.top.showed,div.video-info__player.small.bottom.showed,div.video-info__player.small.top.showed{opacity:1;visibility:visible}div.adPlayerDiv.adplayer-no-ui #sound,div.adPlayerDiv.adplayer-no-ui .pause,div.adPlayerDiv.adplayer-no-ui .play,div.adPlayerDiv.adplayer-no-ui div.adLinkButton,div.adPlayerDiv.adplayer-no-ui div.adSkipButton{opacity:0;visibility:hidden;z-index:-100}}div.adPlayerDiv.adplayer-no-ui #sound,div.adPlayerDiv.adplayer-no-ui .adClickCover,div.adPlayerDiv.adplayer-no-ui .pause,div.adPlayerDiv.adplayer-no-ui .play,div.adPlayerDiv.adplayer-no-ui div.adLinkButton,div.adPlayerDiv.adplayer-no-ui div.adSkipButton{opacity:0;visibility:hidden;z-index:-100}.adClickCover{position:absolute;top:0;left:0;width:100%;height:100%;z-index:100000;display:none}.adClickCover.showed{display:block}.topBar{display:none;width:100%;position:absolute;top:-31px;padding-bottom:3px;height:31px;left:0;background-color:rgba(255,255,255,.9)}.topBar.showed{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}div.video-info__player.mglogo{overflow:visible}div.video-info__player.large.top.mglogo,div.video-info__player.medium.top.mglogo,div.video-info__player.small.top.mglogo{margin-top:31px}.topBar .other-logo{width:90px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;justify-content:flex-start;align-items:center}.topBar .other-logo a:before{background:0 0!important}.topBar .other-logo img{width:80px;position:relative;top:4px;left:0}.topBar>span{color:#000;background:0 0;padding:0;font-family:Roboto,sans-serif;font-weight:700;font-size:16px;box-sizing:border-box;line-height:1;text-transform:uppercase;margin:12px 0 0 0;position:absolute;left:50%;transform:translate(-50%,0)}.vrline div.mcimg{padding:0;text-align:center;width:100%}.vrline img.mcimg{border:0 solid #fff;width:100%!important;height:auto!important;box-sizing:border-box;display:block}.vrline .mctitle{margin-top:10px;text-align:left}.vrline .mctitle a{font-weight:700;font-size:18px;line-height:18px;font-style:normal;text-decoration:none;color:#000;font-family:Roboto}.vrline.mgline{background:none repeat scroll 0 0;cursor:pointer;display:inline-block;padding:0!important;border:0 solid #fff;width:100%;max-width:100%;box-sizing:border-box;margin:10px 0 0 0;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;flex-direction:column;word-wrap:break-word}.vrline.mgline .image-container{position:relative}.vrline.mgline{vertical-align:top}.vrline.mgline{min-width:90px}@supports not (flex-wrap:wrap){.vrline.mgline{display:inline-block!important}}.text-elements a{text-decoration:none}.vrline div.mcprice,.vrline div.mgarrowbox,.vrline div.mgbuybox{display:none}@media (max-width:480px){.vrline.mgline{width:48%!important;margin:1%!important;max-width:48%!important}}@media (max-width:480px){.vrline.mgline{width:98%!important;margin:1%!important;max-width:98%!important}}.vrline .mctitle a:hover{color:#7f7f7f}.vrline.mgline{position:relative}.vrline.mgline .fake{visibility:hidden;position:relative;padding-top:4px}.vrline.mgline .mctitle{margin-top:2px;line-height:1!important}.vrline.mgline:hover .mctitle a{color:#7f7f7f}.vrline.mgline .image-with-text,.vrline.mgline .mgtobottom{width:100%!important}.ctplay .mgbox{padding:25px 0 0!important;max-width:680px!important}.ctplay .vrline.mgline{background:#eee!important;padding:0 0 20px!important;border:1px solid #e3e3e3!important;width:100%;max-width:100%;margin:3px 0;transition-duration:.8s;transition-property:box-shadow}.ctplay .mgheader{border-bottom:none!important;padding-bottom:0;margin-bottom:0}.ctplay .mghead{color:#000!important;font-size:14px!important}.ctplay .vrline.mgline .mctitle{margin:2px 5px 20px;text-align:left}.ctplay .vrline.mgline .mctitle a{font-size:20px;line-height:1.3;color:#000;font-family:Roboto,"Open Sans",sans-serif}.ctplay .vrline.mgline .mctitle a:hover{color:#000}.ctplay .vrline.mgline:hover .mctitle a{color:#000}.ctplay .vrline.mgline .mcdomain{padding-top:3px;text-align:left}.ctplay .vrline.mgline .mcdomain a{font-size:13px;line-height:13px;font-style:italic;color:#7f7f7f;padding:1px}.ctplay .vrline.mgline .image-with-text,.ctplay .vrline.mgline img.mcimg{max-width:680px!important;max-height:385px!important}.ctplay .mg2player:not(.mg2player_playing) .mg2player__close.mghover,.ctplay .mg2player:not(.mg2player_playing) .mg2player__play-btn.mghover,.ctplay .mg2player:not(.mg2player_playing) .mg2player__play-next.mghover,.ctplay .mg2player:not(.mg2player_playing) .mg2player__start-btn.mghover,.ctplay .mg2player:not(.mg2player_playing) .mg2player__time.mghover,.ctplay .mg2player:not(.mg2player_playing) .mg2player__track.mghover,.ctplay .mg2player:not(.mg2player_playing) .mg2player__volume.mghover{opacity:1;visibility:visible}.ctplay.mgred .vrline.mgline .text-elements{display:none}.ctplay.mgred .vrline.mgline{border:none!important;background:inherit!important}div.vrPopup{opacity:0;visibility:hidden}div.adPlayerContainerDiv .mg2player__controls,div.adPlayerContainerDiv .mg2player__title,div.adPlayerContainerDiv div.mgMuteButton,div.mgAdPlayerContainerDiv .mg2player__controls,div.mgAdPlayerContainerDiv .mg2player__title,div.mgAdPlayerContainerDiv div.mgMuteButton{display:none}div.adPlayerContainerDiv.mgAdPlayerFormat-outstream.showed,div.mgAdPlayerContainerDiv.mgAdPlayerFormat-outstream.showed{z-index:9999999;background-color:#fff}div.adPlayerDiv.showed,div.mgAdPlayerDiv.showed{z-index:100;opacity:1;position:relative;width:100%;height:100%;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:flex;display:-webkit-flex;align-items:center;justify-content:center;overflow:hidden}div.adPlayerContainerDiv,div.mgAdPlayerContainerDiv{z-index:-100;opacity:0;visibility:hidden;background-color:transparent;position:absolute;top:0;left:0}div.adPlayerDiv,div.mgAdPlayerDiv{z-index:-1;opacity:0;position:relative;height:100%}div.adPlayerContainerDiv.block,div.mgAdPlayerContainerDiv.block{position:relative;margin-bottom:10px;overflow:hidden;transition:height 2s}div.adPlayerContainerDiv.block.noanim,div.mgAdPlayerContainerDiv.block.noanim{transition:none}html>div{display:none!important}div.adSkipButton,div.mgSkipButton{position:absolute;top:0;left:0;padding:0 8px;height:25px;text-shadow:2px 1px 2px #000;background-color:rgba(0,0,0,.4);color:#fff;font-family:Helvetica,Arial,fallback,sans-serif;font-size:12px;text-align:center;line-height:25px;transition:all .15s ease-in-out;display:none;z-index:101;cursor:pointer}div.adSkipButton.showed,div.mgSkipButton.showed{display:block}div.adPlayerDiv #av-container #av-inner #gui #skip-btn,div.mgAdPlayerDiv #av-container #av-inner #gui #skip-btn{top:0;bottom:auto;left:0;right:auto;padding:0 8px;height:25px;text-shadow:2px 1px 2px #000;background-color:rgba(0,0,0,.4);color:#fff;font-family:Helvetica,Arial,fallback,sans-serif;font-size:12px;text-align:center;line-height:25px;transition:all .15s ease-in-out;z-index:2;cursor:pointer;border:none;text-transform:none}div.adPlayerDiv #av-container #av-inner #gui #timer,div.mgAdPlayerDiv #av-container #av-inner #gui #timer{height:25px;width:25px;text-shadow:2px 1px 2px #000;background-color:rgba(0,0,0,.4);font-size:12px;text-align:center;line-height:25px;border:none;text-transform:none}div.adLinkButton.showed{display:block}#av-container #av-inner #gui:before{background:0 0}#av-container.desktop #gui #timeline.av-overlay{opacity:1;bottom:-4px!important;right:0!important;left:0!important}#av-container.desktop #av-inner #gui #timeline #timeline-moveto,#av-container.desktop #gui #buttons,#av-container.desktop #gui #timeline,#av-container.desktop #gui:before{opacity:1}#aniview-credit{display:none!important}div.adCloseButton,div.mgCloseButton{display:none;position:absolute;top:0;right:0;width:50px;height:50px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:9999}div.adCloseButton.showed,div.mgCloseButton.showed{display:block}div.adCloseButton:after,div.mgCloseButton:after{position:absolute;top:0;right:0;width:24px;height:24px;color:#fff;filter:drop-shadow(0 0 3px #000);line-height:20px;margin:3px;background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#close");content:"";display:block}div.adPlayerContainerDiv.showed div.adCloseButton.showed,div.mgAdPlayerContainerDiv.showed div.mgCloseButton.showed{display:block}div.adMuteButton,div.mgMuteButton{display:none;speak:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;position:absolute;bottom:6px;right:6px;width:20px;height:25px;cursor:pointer;transition:opacity .3s ease,visibility .3s ease;z-index:100;filter:drop-shadow(0 0 3px #000)}div.adMuteButton.showed,div.mgMuteButton.showed{display:block}div.adMuteButton:after,div.adMuteButton:before,div.mgMuteButton:after,div.mgMuteButton:before{position:absolute;width:24px;height:24px;top:50%;left:50%;transform:translate(-50%,-50%) scale(.75)}div.adMuteButton:before,div.mgMuteButton:before{content:"";display:block;background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#volume_down")}div.adMuteButton:after,div.mgMuteButton:after{content:"";background:url("/mgPlayer/img/mgPlayer_v2_sprite.svg#volume_off");display:none}div.adMuteButton.muted:before,div.mgMuteButton.muted:before{display:none}div.adMuteButton.muted:after,div.mgMuteButton.muted:after{display:block}div.adPlayerContainerDiv.large,div.adPlayerContainerDiv.medium,div.adPlayerContainerDiv.small,div.mgAdPlayerContainerDiv.large,div.mgAdPlayerContainerDiv.medium,div.mgAdPlayerContainerDiv.small{position:fixed;bottom:0;top:auto;z-index:9999999;opacity:1;visibility:visible;background-color:#000;overflow:visible}div.adPlayerContainerDiv.large,div.adPlayerContainerDiv.medium,div.adPlayerContainerDiv.small,div.mgAdPlayerContainerDiv.large,div.mgAdPlayerContainerDiv.medium,div.mgAdPlayerContainerDiv.small{opacity:0;visibility:hidden}div.adPlayerContainerDiv.large.showed,div.adPlayerContainerDiv.medium.showed,div.adPlayerContainerDiv.small.showed,div.mgAdPlayerContainerDiv.large.showed,div.mgAdPlayerContainerDiv.medium.showed,div.mgAdPlayerContainerDiv.small.showed{opacity:1;visibility:visible}div.adPlayerContainerDiv.large div.adPlayerDiv,div.adPlayerContainerDiv.medium div.adPlayerDiv,div.adPlayerContainerDiv.small div.adPlayerDiv,div.mgAdPlayerContainerDiv.large div.mgAdPlayerDiv,div.mgAdPlayerContainerDiv.medium div.mgAdPlayerDiv,div.mgAdPlayerContainerDiv.small div.mgAdPlayerDiv{z-index:100;opacity:1;position:relative}div.adPlayerContainerDiv.large.top,div.adPlayerContainerDiv.medium.top,div.adPlayerContainerDiv.small.top,div.mgAdPlayerContainerDiv.large.top,div.mgAdPlayerContainerDiv.medium.top,div.mgAdPlayerContainerDiv.small.top{top:0;bottom:auto}div.adPlayerContainerDiv.small,div.mgAdPlayerContainerDiv.small{width:401px}div.adPlayerContainerDiv.medium,div.mgAdPlayerContainerDiv.medium{width:501px}div.adPlayerContainerDiv.large,div.mgAdPlayerContainerDiv.large{width:601px}div.adPlayerContainerDiv.small.left,div.mgAdPlayerContainerDiv.small.left{left:-401px;transition:left 1s}div.adPlayerContainerDiv.large.left.showed,div.adPlayerContainerDiv.medium.left.showed,div.adPlayerContainerDiv.small.left.showed,div.mgAdPlayerContainerDiv.large.left.showed,div.mgAdPlayerContainerDiv.medium.left.showed,div.mgAdPlayerContainerDiv.small.left.showed{left:0;right:auto;transition:left 1s}div.adPlayerContainerDiv.small.right,div.mgAdPlayerContainerDiv.small.right{right:-401px;transition:right 1s}div.adPlayerContainerDiv.large.right.showed,div.adPlayerContainerDiv.medium.right.showed,div.adPlayerContainerDiv.small.right.showed,div.mgAdPlayerContainerDiv.large.right.showed,div.mgAdPlayerContainerDiv.medium.right.showed,div.mgAdPlayerContainerDiv.small.right.showed{right:0;left:auto;transition:right 1s}div.adPlayerContainerDiv.medium.left,div.mgAdPlayerContainerDiv.medium.left{left:-501px;transition:left 1s}div.adPlayerContainerDiv.medium.right,div.mgAdPlayerContainerDiv.medium.right{right:-501px;transition:right 1s}div.adPlayerContainerDiv.large.left,div.mgAdPlayerContainerDiv.large.left{left:-601px;transition:left 1s}div.adPlayerContainerDiv.large.right,div.mgAdPlayerContainerDiv.large.right{right:-601px;transition:right 1s}.topBar{display:none;width:100%;position:absolute;top:-31px;padding-bottom:3px;height:31px;left:0;background-color:rgba(255,255,255,.9)}.topBar.showed{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}div.adPlayerContainerDiv.mglogo,div.mgAdPlayerContainerDiv.mglogo{margin-top:31px;overflow:visible}div.adPlayerContainerDiv.large.top .topBar.showed,div.adPlayerContainerDiv.medium.top .topBar.showed,div.adPlayerContainerDiv.small.top .topBar.showed,div.mgAdPlayerContainerDiv.large.top .topBar.showed,div.mgAdPlayerContainerDiv.medium.top .topBar.showed,div.mgAdPlayerContainerDiv.small.top .topBar.showed{display:none}.topBar .other-logo{width:90px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;justify-content:flex-start;align-items:center}.topBar .other-logo a:before{background:0 0!important}.topBar .other-logo img{width:80px;position:relative;top:4px;left:0}.topBar>span{color:#000;background:0 0;padding:0;font-family:Roboto,sans-serif;font-weight:700;font-size:16px;box-sizing:border-box;line-height:1;text-transform:uppercase;margin:12px 0 0 0;position:absolute;left:50%;transform:translate(-50%,0)}@media only screen and (max-device-width:480px){div.adPlayerContainerDiv.large.left,div.adPlayerContainerDiv.large.right,div.adPlayerContainerDiv.medium.left,div.adPlayerContainerDiv.medium.right,div.adPlayerContainerDiv.small.left,div.adPlayerContainerDiv.small.right,div.mgAdPlayerContainerDiv.large.left,div.mgAdPlayerContainerDiv.large.right,div.mgAdPlayerContainerDiv.medium.left,div.mgAdPlayerContainerDiv.medium.right,div.mgAdPlayerContainerDiv.small.left,div.mgAdPlayerContainerDiv.small.right{position:fixed;bottom:0;right:-480px;transition:right 1s;width:70%}div.adPlayerContainerDiv.large.left.showed,div.adPlayerContainerDiv.large.right.showed,div.adPlayerContainerDiv.medium.left.showed,div.adPlayerContainerDiv.medium.right.showed,div.adPlayerContainerDiv.small.left.showed,div.adPlayerContainerDiv.small.right.showed,div.mgAdPlayerContainerDiv.large.left.showed,div.mgAdPlayerContainerDiv.large.right.showed,div.mgAdPlayerContainerDiv.medium.left.showed,div.mgAdPlayerContainerDiv.medium.right.showed,div.mgAdPlayerContainerDiv.small.left.showed,div.mgAdPlayerContainerDiv.small.right.showed{position:fixed;left:50%;right:auto;transition:right 1s}div.adPlayerContainerDiv.large.left.upper,div.adPlayerContainerDiv.large.right.upper,div.adPlayerContainerDiv.medium.left.upper,div.adPlayerContainerDiv.medium.right.upper,div.adPlayerContainerDiv.small.left.upper,div.adPlayerContainerDiv.small.right.upper,div.mgAdPlayerContainerDiv.large.left.upper,div.mgAdPlayerContainerDiv.large.right.upper,div.mgAdPlayerContainerDiv.medium.left.upper,div.mgAdPlayerContainerDiv.medium.right.upper,div.mgAdPlayerContainerDiv.small.left.upper,div.mgAdPlayerContainerDiv.small.right.upper{top:0;right:auto;left:50%;transform:translate(-50%,0);opacity:0;visibility:hidden}div.adPlayerContainerDiv.large.left.upper.showed,div.adPlayerContainerDiv.large.right.upper.showed,div.adPlayerContainerDiv.medium.left.upper.showed,div.adPlayerContainerDiv.medium.right.upper.showed,div.adPlayerContainerDiv.small.left.upper.showed,div.adPlayerContainerDiv.small.right.upper.showed,div.mgAdPlayerContainerDiv.large.left.upper.showed,div.mgAdPlayerContainerDiv.large.right.upper.showed,div.mgAdPlayerContainerDiv.medium.left.upper.showed,div.mgAdPlayerContainerDiv.medium.right.upper.showed,div.mgAdPlayerContainerDiv.small.left.upper.showed,div.mgAdPlayerContainerDiv.small.right.upper.showed{opacity:1;visibility:visible}div.adPlayerContainerDiv.large.bottom,div.adPlayerContainerDiv.large.top,div.adPlayerContainerDiv.medium.bottom,div.adPlayerContainerDiv.medium.top,div.adPlayerContainerDiv.small.bottom,div.adPlayerContainerDiv.small.top,div.mgAdPlayerContainerDiv.large.bottom,div.mgAdPlayerContainerDiv.large.top,div.mgAdPlayerContainerDiv.medium.bottom,div.mgAdPlayerContainerDiv.medium.top,div.mgAdPlayerContainerDiv.small.bottom,div.mgAdPlayerContainerDiv.small.top{opacity:0;visibility:hidden;position:fixed;right:auto;left:50%;transform:translate(-50%,0);width:70%;margin-bottom:0}div.adPlayerContainerDiv.large.top,div.adPlayerContainerDiv.medium.top,div.adPlayerContainerDiv.small.top,div.mgAdPlayerContainerDiv.large.top,div.mgAdPlayerContainerDiv.medium.top,div.mgAdPlayerContainerDiv.small.top{top:0;bottom:auto}div.adPlayerContainerDiv.large.bottom,div.adPlayerContainerDiv.medium.bottom,div.adPlayerContainerDiv.small.bottom,div.mgAdPlayerContainerDiv.large.bottom,div.mgAdPlayerContainerDiv.medium.bottom,div.mgAdPlayerContainerDiv.small.bottom{bottom:0;top:auto}div.adPlayerContainerDiv.large.bottom.showed,div.adPlayerContainerDiv.large.top.showed,div.adPlayerContainerDiv.medium.bottom.showed,div.adPlayerContainerDiv.medium.top.showed,div.adPlayerContainerDiv.small.bottom.showed,div.adPlayerContainerDiv.small.top.showed,div.mgAdPlayerContainerDiv.large.bottom.showed,div.mgAdPlayerContainerDiv.large.top.showed,div.mgAdPlayerContainerDiv.medium.bottom.showed,div.mgAdPlayerContainerDiv.medium.top.showed,div.mgAdPlayerContainerDiv.small.bottom.showed,div.mgAdPlayerContainerDiv.small.top.showed{opacity:1;visibility:visible}}div.adPlayerDiv.adplayer-no-ui #sound,div.adPlayerDiv.adplayer-no-ui .adClickCover,div.adPlayerDiv.adplayer-no-ui .pause,div.adPlayerDiv.adplayer-no-ui .play,div.adPlayerDiv.adplayer-no-ui div.adLinkButton,div.adPlayerDiv.adplayer-no-ui div.adSkipButton{opacity:0;visibility:hidden;z-index:-100}div.adPlayerContainerDiv.block.smart,div.mgAdPlayerContainerDiv.block.smart{max-width:680px!important;transition:height 1s!important;margin-left:auto;margin-right:auto}.adClickCover{position:absolute;top:0;left:0;width:100%;height:100%;z-index:100000;display:none}.adClickCover.showed{display:block}div.adPlayerContainerDiv .mg2player__controls,div.adPlayerContainerDiv .mg2player__title,div.adPlayerContainerDiv div.mgMuteButton,div.mgAdPlayerContainerDiv .mg2player__controls,div.mgAdPlayerContainerDiv .mg2player__title,div.mgAdPlayerContainerDiv div.mgMuteButton{display:none}',i=`${t}//cdn.${this.amby.get("subnetDomain","")}`;this.css=e.replaceAll("/mgPlayer/img/mgPlayer_v2_sprite.svg",`${i}/mgPlayer/img/mgPlayer_v2_sprite.svg`)}(0,s.mgDebug)("Style Component initiated.")}styleChecking(e){if(e&&"function"==typeof e){const t=this.rootElement.querySelector(`#mgStyles${this.widgetId}`)||document.getElementById(`mgStyles${this.widgetId}`);if(t){const i=()=>{setTimeout((()=>{a.styleElemCheckLoaded(t)?e():i()}),50)};a.styleElemCheckLoaded(t)?e():i()}else this.loadStyles(e)}}loadStyles(e){this.rootElement.querySelector(`#mgStyles${this.widgetId}`)?e&&"function"==typeof e&&e():(this.styleUrl?(this.styleElem=document.createElement("link"),this.styleElem.setAttribute("rel","stylesheet"),this.styleElem.setAttribute("href",`${this.styleUrl}`),this.styleElem=document.createElement("style"),this.styleElem.setAttribute("type","text/css")):(this.styleElem=document.createElement("style"),this.styleElem.id=`mgStyles${this.widgetId}`,this.styleElem.setAttribute("type","text/css"),this.styleElem.styleSheet?this.styleElem.styleSheet.cssText=this.css:this.styleElem.appendChild(document.createTextNode(this.css))),this.styleElem.addEventListener("load",(()=>{this.styleElem.setAttribute("data-loaded","true"),e&&"function"==typeof e&&e()})),this.rootElement.isEqualNode(document)?document.head.appendChild(this.styleElem):this.rootElement.appendChild(this.styleElem),document.getElementById(`mgStyles${this.widgetId}`)||document.head.appendChild(this.styleElem.cloneNode(!0)))}static styleElemCheckLoaded(e){let t="true"===e.getAttribute("data-loaded");if(!t)for(let i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].href===e.href){t=!0;break}return t}}i.StyleComponent=a},{"../debug":30}],24:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.UnmuteDetectComponent=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=n(t);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=a?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(s,r,o):s[r]=e[r]}s.default=e,i&&i.set(e,s);return s}(e("../../redux/actionCreators")),a=e("../helpers"),r=e("./domManagerComponent");function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(n=function(e){return e?i:t})(e)}class o extends r.DomManagerComponent{constructor(e){super(),this.widget=e,this.amby=e.amby,this.listenedElems=[],this.observedDocuments=[],this.sentSources=[],this.addPlayingWithSoundProp();const t=this.getMediaElements(document.body);t&&t.forEach((e=>{this.addListener(e)})),setTimeout((()=>{this.checkForIframes(document.body),setTimeout((()=>{this.observedDocuments.push(document),this.getObserver(document)}))}))}observerAction(e){if(e instanceof HTMLElement&&("VIDEO"!==e.tagName&&"AUDIO"!==e.tagName||this.addListener(e),e.querySelectorAll)){const t=this.getMediaElements(e);t&&t.forEach((e=>{this.addListener(e)}))}setTimeout((()=>{this.checkForIframes(e.ownerDocument)}))}getVideoObserver(){return this.videoObserver||(this.videoObserver=new MutationObserver((e=>{e.forEach((e=>{this.checkMedia(e.target)}))}))),this.videoObserver}addListener(e){-1===this.listenedElems.indexOf(e)&&(this.listenedElems.push(e),this.checkMedia(e),e.addEventListener("volumechange",(e=>{this.checkMedia(e.target)})),this.getVideoObserver().observe(e,{attributes:!0,attributeFilter:["src"]}))}checkMedia(e){const t=e.currentSrc||e.src;t&&-1===this.sentSources.indexOf(t)&&!e.muted&&e.volume>0&&(this.sentSources.push(t),this.amby.dispatch(s.upsertAdState({unmuteraw:!0,unmuteMediaSrc:e.currentSrc})))}checkIframeAction(e){const t=a.Helpers.checkIframe(e);if(t&&-1===this.observedDocuments.indexOf(t)){this.inMgPlayer(e)&&(t.defaultView.inMgPlayer=!0),this.observedDocuments.push(t);const i=this.getMediaElements(t);i&&i.forEach((e=>{this.addListener(e)}));const s=t.getRootNode();this.getObserver(s,e.contentWindow),setTimeout((()=>{this.checkForIframes(t)}))}}addPlayingWithSoundProp(){Object.defineProperty(HTMLMediaElement.prototype,"playingWithSound",{get:function(){return!!(this.currentTime>0&&!this.paused&&!this.ended&&this.readyState>2)&&!this.muted&&this.volume>0},configurable:!0})}getUnMutedElements(){const e=[];return this.listenedElems.forEach((t=>{if(t.playingWithSound){const i=t.ownerDocument.defaultView;e.push({src:t.currentSrc,isIFrame:i.self!==i.top,inMgPlayer:this.inMgPlayer(t),xPath:this.getXPath(t)})}})),e}getXPath(e){let t=this.getElementName(e),i=e;for(;i.parentElement&&i.parentElement!==i;)i=i.parentElement,t=`${this.getElementName(i)}>${t}`;return t}getElementName(e){let t=e.tagName;const i=e.id,s=e.classList.value.replaceAll(" ",",.");return i&&(t=`${t}#${i}`),s&&(t=`${t}.${s}`),t}findIframes(e){const t=[];return e.querySelectorAll&&Array.from(e.querySelectorAll("*")).forEach((e=>{if("IFRAME"===e.tagName&&e.src)"about:blank"!==e.src&&t.push(e.src);else if("IFRAME"===e.tagName){const i=a.Helpers.checkIframe(e);i&&Array.prototype.push.apply(t,this.findIframes(i))}else e.shadowRoot&&Array.prototype.push.apply(t,this.findIframes(e.shadowRoot))})),t}}i.UnmuteDetectComponent=o},{"../../redux/actionCreators":58,"../helpers":37,"./domManagerComponent":12}],25:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Config=void 0;i.Config=class{static init(e){const t=e.modules.Helpers.getUrlParam("mgwtest")||e.modules.Helpers.getUrlParam(`mgwtest${e.mgRec.cid}`)||e.modules.Helpers.getCookie("mgwtest");if(t){const i=`test${t.replace(/(_|^)(\w)/g,((...e)=>e[2].toUpperCase()))}`;e.modules.Helpers&&e.modules.Helpers.mergeObjects&&e.mgRec.config[i]&&e.setConfig(e.modules.Helpers.mergeObjects(e.mgRec.config,e.mgRec.config[i],!0))}}}},{}],26:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.AdControllerComponent=void 0;var s=e("../../redux/storage"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=f(t);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var n=a?Object.getOwnPropertyDescriptor(e,r):null;n&&(n.get||n.set)?Object.defineProperty(s,r,n):s[r]=e[r]}s.default=e,i&&i.set(e,s);return s}(e("../../redux/actionCreators")),r=e("../helpers"),n=e("../players/ad/aniViewComponent"),o=e("../components/placementComponents/adContainerComponent"),l=e("../debug"),d=e("../players/controls/skipAdButtonComponent"),h=e("../players/ad/mgAdPlayerComponent"),p=e("../players/ad/imaSdkComponent"),m=e("../players/controls/muteButtonComponent"),c=e("../players/ad/vpaidPlayerComponent"),g=e("../players/ad/excoComponent"),u=e("../players/ad/aniViewDirectComponent"),y=e("../players/ad/tremorComponent"),b=e("../players/ad/customEngine");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(f=function(e){return e?i:t})(e)}i.AdControllerComponent=class{constructor(e,t){this.amby=e.amby,this.widget=e,this.mgVideoIndex=this.amby.get("mgVideoIndex"),this.widgetId=this.amby.get("widgetId"),this.adPlayers=this.amby.get("adPlayers",[]),this.schedule={},Array.isArray(this.amby.get("adSchedule"))&&this.amby.get("adSchedule").forEach((e=>{this.schedule[e.offset]=e.adPlayers})),this.maxAdsAtTime=this.amby.get("formatConfig.maxAdsAtTime",2),this.players={},this.readyPlayers=[],this.adsAtTime=0,Array.isArray(this.adPlayers)&&this.adPlayers.forEach((e=>{this.players[e.name]=e,this.players[e.name].container=new o.AdContainerComponent(this.amby,t.playerDiv,e.name),"youtube"!==e.engine&&"ima"!==e.engine||(this.players[e.name].skipButton=new d.SkipAdButtonComponent(this.amby,this.players[e.name].container.playerContainer,e.name),"ima"===e.engine&&(this.players[e.name].muteButton=new m.MuteButtonComponent(this.amby,this.players[e.name].container.playerContainer))),"ima"!==e.engine&&"vpaid"!==e.engine||(this.players[e.name].muteButton=new m.MuteButtonComponent(this.amby,this.players[e.name].container.playerContainer)),this.addPlayerListeners(e.name)})),this.addListeners(),(0,l.mgDebug)("AdControllerComponent initiated.")}addListeners(){this.amby.addSubListener("ad.init",(()=>{switch(this.amby.get("ad.init")){case s.states.INIT_NEEDED:case s.states.INIT_RESET:this.readyPlayers.forEach((e=>{this.amby.dispatch(a.setAdInit(s.states.INIT_STOP,e))})),this.readyPlayers=[],this.curPosition=this.amby.get("ad.curAdPosition"),this.schedule&&this.curPosition&&this.schedule[this.curPosition]&&this.schedule[this.curPosition].forEach((e=>{this.initAdPlayer(e)})),this.amby.dispatch(a.setAdInit(s.states.INIT_IN_PROGRESS));break;case s.states.INIT_STOP:this.schedule&&this.curPosition&&this.schedule[this.curPosition]&&this.schedule[this.curPosition].forEach((e=>{this.amby.dispatch(a.setAdInit(s.states.INIT_STOP,e))}))}})),this.amby.addTriggerListener("ad.actionPlay",(()=>{this.amby.get("ad.enabled")&&(this.readyPlayers.length>0?(this.amby.dispatch(a.upsertAdState({startRequested:!0})),this.amby.dispatch(a.setTriggerToTrue(`${this.readyPlayers[0]}.actionPlay`))):this.startRequested=!0)})),this.amby.addTriggerListener("ad.actionPause",(()=>{this.amby.dispatch(a.setTriggerToTrue(`${this.readyPlayers[0]}.actionPause`))})),this.amby.addTriggerListener("ad.actionClose",(()=>{this.amby.dispatch(a.setTriggerToTrue(`${this.readyPlayers[0]}.actionClose`))})),this.amby.addTriggerListener("ad.actionStop",(()=>{this.readyPlayers.forEach((e=>{[s.states.STATUS_PLAYING,s.states.STATUS_PAUSED].indexOf(this.amby.get(`${e}.status`))>-1&&this.amby.dispatch(a.setTriggerToTrue(`${e}.actionStop`))}))}))}addPlayerListeners(e){this.amby.addSubListener(`${e}.status`,(()=>{this.onPlayerStatus(e)})),this.amby.addTriggerListener(`${e}.impression`,(()=>{this.amby.dispatch(a.setTriggerToTrue("ad.impression"))}))}onPlayerStatus(e){switch(this.amby.get(`${e}.status`)){case s.states.STATUS_READY:-1===this.readyPlayers.indexOf(e)&&this.readyPlayers.push(e),-1===[s.states.STATUS_READY,s.states.STATUS_PLAYING].indexOf(this.amby.get("ad.status"))&&(this.amby.dispatch(a.setAdInit(s.states.INIT_DONE)),this.amby.dispatch(a.setAdStatus(s.states.STATUS_READY))),"pre"!==this.amby.get("ad.curAdPosition")&&"youtube"!==this.players[e].engine||this.amby.dispatch(a.setAdVisible(!0,e)),this.startRequested&&(this.startRequested=!1,this.amby.dispatch(a.upsertAdState({startRequested:!0})),this.amby.dispatch(a.setTriggerToTrue(`${this.readyPlayers[0]}.actionPlay`)));break;case s.states.STATUS_PLAYING:this.amby.dispatch(a.setAdVisible(!0,e)),this.amby.dispatch(a.upsertState({muteBtn:{visible:!0}})),this.amby.dispatch(a.setAdStatus(s.states.STATUS_PLAYING));break;case s.states.STATUS_PAUSED:this.amby.dispatch(a.setAdStatus(s.states.STATUS_PAUSED));break;case s.states.STATUS_ERROR:case s.states.STATUS_STOPPED:this.adsAtTime+=1,this.amby.dispatch(a.setAdVisible(!1,e)),this.readyPlayers.splice(this.readyPlayers.indexOf(e),1),this.readyPlayers.length>0&&this.maxAdsAtTime>this.adsAtTime?this.amby.dispatch(a.setTriggerToTrue(`${this.readyPlayers[0]}.actionPlay`)):(this.adsAtTime=0,this.amby.dispatch(a.upsertState({muteBtn:{visible:!1}})),this.amby.dispatch(a.setAdStatus(this.amby.get(`${e}.status`))));break;case s.states.STATUS_INIT:[s.states.STATUS_ERROR,s.states.STATUS_STOPPED].indexOf(this.amby.get("ad.status"))>-1&&this.amby.dispatch(a.setAdStatus(s.states.STATUS_INIT))}}initAdPlayer(e){if(this.players[e]&&!this.players[e].component){this.players[e].mobileChannelId||this.players[e].desktopChannelId||"aniview"!==this.players[e].engine||(this.players[e].engine=null);const t=r.Helpers.getUrlParam("mgwcampaign");switch(t&&(t.match(/pubads\.g/)&&(this.players[e].engine="ima"),this.players[e].adSource=t),this.amby.dispatch(a.upsertState({ad:{playerEngine:this.players[e].engine}})),this.amby.dispatch(a.upsertState({ad:{enableCTA:this.players[e].enableCTA??!1}})),this.players[e].engine){case"aniview":this.players[e].component=new n.AniViewComponent(this.widget,{name:e,publisherId:this.players[e].publisherId,channelId:"mobile"===this.amby.get("deviceType")?this.players[e].mobileChannelId:this.players[e].desktopChannelId,playerContainerId:this.players[e].container.playerContainer.id,playerDivId:this.players[e].container.playerDiv.id,vastRetry:this.players[e].vastRetry,errorLimit:this.players[e].errorLimit,maxrun:this.players[e].maxrun,logLevel:this.players[e].logLevel,timeout:parseInt(this.players[e].timeout,10),nextAdTimeout:parseInt(this.players[e].nextAdTimeout,10),ref1:this.players[e].ref1,soundButton:this.players[e].soundbutton,pauseButton:this.players[e].pausebutton,timeLine:this.players[e].timeline,aniviewParams:this.players[e].aniviewParams,waterfall:this.players[e].waterfall,noCompleteTimeout:this.players[e].noCompleteTimeout,skipoffset:this.players[e].skipoffset,verifiedSources:this.players[e].verifiedSources,initSize:this.players[e].initSize}),this.amby.dispatch(a.upsertState({[e]:{skipoffset:this.players[e].skipoffset}}));break;case"mgAdPlayer":this.players[e].component=new h.MgAdPlayerComponent(this.widget,{name:e,container:this.players[e].container.playerDiv,mgsetup:this.players[e].mgsetup,quality:this.players[e].quality,adPlaylist:this.players[e].adPlaylist}),this.amby.dispatch(a.upsertState({[e]:{skipoffset:this.players[e].skipoffset}}));break;case"ima":this.players[e].component=new p.ImaSdkComponent(this.widget,{name:e,adSource:this.players[e].adSource,requestsLimit:this.players[e].requestsLimit,playerDivId:this.players[e].container.playerDiv.id}),this.amby.dispatch(a.upsertState({[e]:{skipoffset:this.players[e].skipoffset}}));break;case"vpaid":if(this.players[e].adSource){const t=r.Helpers.getConsentData();let{adSource:i}=this.players[e];const s=t.gdpr?"gdpr":"";i=r.Helpers.replaceAll(i,"{gdpr}",String(Number(t.gdpr))),i=r.Helpers.replaceAll(i,"[REGULATIONS]",s),i=r.Helpers.replaceAll(i,"{gdpr_consent}",t.consentData),i=r.Helpers.replaceAll(i,"[GDPRCONSENT]",t.consentData),i=r.Helpers.replaceAll(i,"{cxurl}",this.amby.get("cxurl","")),this.players[e].adSource=i}else this.players[e].adResponse=this.widget.mgRec.config.vastContent;this.players[e].component=new c.VpaidPlayerComponent(this.widget,{name:e,adSource:this.players[e].adSource,requestsLimit:this.players[e].requestsLimit,playerDivId:this.players[e].container.playerDiv.id,desiredBitrate:this.amby.get("formatConfig.bitrate"),vpaidMode:this.players[e].vpaidMode,adResponse:this.players[e].adResponse,skipoffset:this.players[e].skipoffset}),this.amby.dispatch(a.upsertState({[e]:{skipoffset:this.players[e].skipoffset}}));break;case"exco":this.players[e].component=new g.ExcoComponent(this.widget,{name:e,adSource:this.players[e].adSource,container:this.players[e].container.playerDiv});break;case"aniviewDirect":this.players[e].component=new u.AniviewDirectComponent(this.widget,{name:e,publisherId:this.players[e].publisherId,tagId:this.players[e].playerTagId,ref1:this.players[e].ref1,container:this.players[e].container.playerDiv});break;case"tremor":this.players[e].component=new y.TremorComponent(this.widget,{name:e,publisherId:this.players[e].publisherId,tagId:this.players[e].playerTagId,ref1:this.players[e].ref1,container:this.players[e].container.playerDiv});break;case"connatix":this.adComponent=new b.CustomEngine(this.widget,{publisherId:this.players[e].publisherId,adSource:this.players[e].adSource,container:this.players[e].container.playerDiv,name:e}),this.amby.dispatch(a.upsertState({[e]:{skipoffset:this.players[e].skipoffset}}))}this.amby.dispatch(a.setAdInit(s.states.INIT_NEEDED,e))}else this.amby.dispatch(a.setAdInit(s.states.INIT_RESET,e))}}},{"../../redux/actionCreators":58,"../../redux/storage":61,"../components/placementComponents/adContainerComponent":14,"../debug":30,"../helpers":37,"../players/ad/aniViewComponent":40,"../players/ad/aniViewDirectComponent":41,"../players/ad/customEngine":42,"../players/ad/excoComponent":43,"../players/ad/imaSdkComponent":44,"../players/ad/mgAdPlayerComponent":45,"../players/ad/tremorComponent":47,"../players/ad/vpaidPlayerComponent":49,"../players/controls/muteButtonComponent":54,"../players/controls/skipAdButtonComponent":55}],27:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.AdPlayerComponent=void 0;var s=e("../../redux/storage"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=p(t);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var n=a?Object.getOwnPropertyDescriptor(e,r):null;n&&(n.get||n.set)?Object.defineProperty(s,r,n):s[r]=e[r]}s.default=e,i&&i.set(e,s);return s}(e("../../redux/actionCreators")),r=e("../debug"),n=e("../players/controls/closeButtonComponent"),o=e("./adControllerComponent"),l=e("../components/placementComponents/adContainerComponent"),d=e("../helpers"),h=e("../components/smartBackfillComponent");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(p=function(e){return e?i:t})(e)}i.AdPlayerComponent=class{constructor(e,t){this.amby=e.amby,this.widget=e,this.mainBox=t,this.rootElement=e.rootEleement;const i=this.amby.get("adSchedule",[]);this.formatConfig=this.amby.get("formatConfig",{}),this.playerTeaserIndex=this.amby.get("widget.playerTeaserIndex",0),this.mgVideoIndex=this.amby.get("mgVideoIndex"),this.widgetId=this.amby.get("widgetId");const s=this.amby.get("adPlayers",[]);this.preTimeoutTime=parseInt(this.formatConfig.preTimeout,10)||2,this.amby.dispatch(a.upsertAdState({initMuted:!0})),this.schedule={},s&&Array.isArray(s)&&i&&Array.isArray(i)?s.forEach((e=>{i.forEach((t=>{t.adPlayers&&e.name&&t.adPlayers.indexOf(e.name)>-1&&(this.schedule[t.offset]||(this.schedule[t.offset]={adPlayers:[]}),this.schedule[t.offset].adPlayers.push(JSON.parse(JSON.stringify(e))),this.schedule[t.offset].loadAds=(0,d.getInObject)(t,["loadAds"]),this.schedule[t.offset].preloadPercent=parseFloat((0,d.getInObject)(t,["preloadPercent"],0)))}))})):(0,r.mgDebug)("Config error: there is no adPlayers or adSchedule."),this.startScrollPixels=null,(this.formatConfig.startOnScroll||this.schedule.pre&&"playerLoaded"===this.schedule.pre.loadAds&&this.schedule.pre.preloadPercent>=0&&this.schedule.pre.preloadPercent<=100)&&(this.startOnScrollPercent=.51,this.schedule.pre.preloadPercent&&(this.startOnScrollPercent=1-parseFloat(this.schedule.pre.preloadPercent)/100),this.updateStartOnScrollPixels()),this.adContainerComponent=new l.AdContainerComponent(this.amby,t),this.adControllerComponent=new o.AdControllerComponent(this.widget,this.adContainerComponent),this.addListeners(),(0,r.mgDebug)("AdPlayerComponent initiated.")}addListeners(){this.amby.addSubListener("player.position",(()=>{if(this.amby.get("ad.enabled",!1)){const e=this.amby.get("player.position",0),t=this.amby.get("ad.enabledPosition",0);e&&(null===this.amby.get("ad.curAdPosition")?Object.entries(this.schedule).sort(((e,t)=>e[1].posInSec-t[1].posInSec)).forEach((([e,t])=>{-1!==["pre","post"].indexOf(e)||t.initiated||null!==this.amby.get("ad.curAdPosition")||(t.initiated=!0,this.amby.get("ad.adInProgress",!1)||(this.amby.dispatch(a.upsertAdState({adInProgress:!0,curAdPosition:e})),this.amby.get("formatConfig.initAdOnPosition",!1)||this.initAdPlayer()))})):-1===["pre","post"].indexOf(this.amby.get("ad.curAdPosition"))&&this.schedule[this.amby.get("ad.curAdPosition")]&&this.schedule[this.amby.get("ad.curAdPosition")].posInSec<=e-t&&this.amby.get("ad.status")===s.states.STATUS_READY&&(this.prevPlayerStatus=this.amby.get("player.status"),this.amby.get("formatConfig.initAdOnPosition",!1)?this.initAdPlayer():(this.amby.get("player.inSight")||"onLoad"===this.amby.get("autoStart"))&&this.amby.dispatch(a.setTriggerToTrue("ad.actionPlay")))),this.amby.dispatch(a.upsertAdState({enabledTime:this.amby.get("ad.enabledTime",0)+1}))}})),this.amby.addSubListener("player.status",(()=>{switch(this.amby.get("player.status")){case s.states.STATUS_READY:null!==this.startScrollPixels&&this.schedule.pre&&"playerLoaded"===this.getPreLoadAdsBy()&&window.addEventListener("scroll",(()=>{this.startOnScroll((()=>{this.presearchInit()}))}));break;case s.states.STATUS_PLAYING:this.hasPreScheduleLoaded()&&this.amby.get("ad.beforePlacementInitiated")&&!this.amby.get("ad.beforePlacementStopped")&&(this.amby.dispatch(a.upsertAdState({curAdPosition:null,adInProgress:!1,beforePlacementStopped:!0})),this.amby.dispatch(a.upsertPlayerState({wasPlaying:!0})),this.amby.dispatch(a.setAdInit(s.states.INIT_STOP)))}})),this.amby.addSubListener("ad.status",(()=>{this.onAdStatusChange()})),this.amby.addTriggerListener("player.resize",(()=>{d.Helpers.vitalCall((()=>this.applyPlayerSize()),this.amby.get("isVital",!0))})),this.amby.addSubListener("ad.enabled",(()=>{if(this.amby.get("ad.enabled",!1)){const e=this.amby.get("player.position",0),t=this.amby.get("player.duration",1);Object.entries(this.schedule).forEach((([i,s])=>{if(-1===["pre","post"].indexOf(i)){const a=i.toString().match(/(\d+)%/);a&&a[1]?s.posInSec=Math.floor((t-e)*a[1]/100)||0:s.posInSec=parseInt(i,10)||0}})),d.Helpers.vitalCall((()=>{this.amby.dispatch(a.upsertAdState({enabledPosition:this.amby.get("player.position",0)-this.amby.get("ad.enabledTime",0)}))}),this.amby.get("isVital",!0))}this.canPrePlaySchedule()&&this.amby.get("ad.enabled",!1)&&("pageLoaded"===this.getPreLoadAdsBy()?this.presearchInit():this.presearchObserver=d.Helpers.onVisible(this.adContainerComponent.playerContainer,(e=>{e&&(this.presearchInit(),this.presearchObserver.disconnect())}),.01))})),this.amby.addSubListener("player.inSight",(()=>{this.amby.get("ad.enabled",!1)&&this.amby.get("player.inSight")&&[s.states.STATUS_PAUSED,s.states.STATUS_READY].indexOf(this.amby.get("ad.status"))>-1&&(this.amby.get("player.isPlayingOnVisible",!0)||!this.amby.get("ad.containerClicked",!1))&&("visibleNotPause"===this.amby.get("autoStart")||this.canPrePlaySchedule()&&"pre"===this.amby.get("ad.curAdPosition"))&&this.amby.dispatch(a.setTriggerToTrue("ad.actionPlay"))})),this.amby.addTriggerListener("player.newItem",(()=>{(this.amby.get("player.isAdPlaying",!1)||this.amby.get("ad.adInProgress",!1))&&(this.amby.dispatch(a.setAdInit(s.states.INIT_STOP)),this.amby.dispatch(a.setAdStatus(s.states.STATUS_STOPPED))),Object.entries(this.schedule).forEach((([,e])=>{e.initiated=!1,e.posInSec=null})),this.amby.dispatch(a.upsertAdState({enabledPosition:0,enabledTime:0,adInProgress:!1,curAdPosition:null}))})),this.amby.addTriggerListener("player.firstFrame",(()=>{this.schedule.pre&&-1===["pageLoaded","playerLoaded"].indexOf(this.schedule.pre.loadAds)&&(this.amby.dispatch(a.upsertAdState({curAdPosition:"pre",visible:!0,adInProgress:!0})),this.amby.dispatch(a.upsertPlayerState({actionPause:!0,isAdPlaying:!0})),this.amby.dispatch(a.setAdStatus(s.states.STATUS_INIT)),this.preTimeout&&(clearTimeout(this.preTimeout),this.preTimeout=null),this.preTimeout=setTimeout((()=>{(0,r.mgDebug)("PreTimeout fired."),this.amby.dispatch(a.setAdInit(s.states.INIT_STOP)),this.amby.dispatch(a.setAdStatus(s.states.STATUS_STOPPED))}),1e3*this.preTimeoutTime),this.initAdPlayer())})),this.amby.addSubListener("player.duration",(()=>{Object.entries(this.schedule).forEach((([e,t])=>{const i=this.amby.get("player.position",0),s=this.amby.get("player.duration",1);if(t.initiated=!1,s>1)if(-1===["pre","post"].indexOf(e)){const a=e.toString().match(/(\d+)%/);a&&a[1]?t.posInSec=Math.floor((s-i)*(a[1]/100))||0:t.posInSec=parseInt(e,10)||0}else t.posInSec=null}))})),this.amby.addTriggerListener("player.userUnmute",(()=>{this.amby.dispatch(a.upsertAdState({initMuted:!1,unmute:!0}))})),this.amby.addTriggerListener("player.userMute",(()=>{this.amby.dispatch(a.upsertAdState({initMuted:!0,mute:!0}))})),this.amby.addSubListener("ad.init",(()=>{this.amby.get("ad.init")===s.states.INIT_DONE&&(this.closeBtnComponent?this.closeBtnComponent.elem&&this.adContainerComponent.playerContainer.contains(this.closeBtnComponent.elem)||this.closeBtnComponent.createElement():this.closeBtnComponent=new n.CloseButtonComponent(this.amby,this.adContainerComponent.playerDiv))})),this.amby.get("formatConfig.smartBackfill",!1)&&(this.amby.addSubListener("ad.rejecting",(()=>{!this.amby.get("ad.startRequested",!1)&&this.amby.get("ad.rejecting")&&this.amby.get("ad.status")===s.states.STATUS_READY&&-1===[s.states.STATUS_PLAYING,s.states.STATUS_PAUSED].indexOf(this.amby.get("ad.status"))&&(this.amby.dispatch(a.setAdEnabled(!1)),this.amby.dispatch(a.upsertAdState({rejected:!0})),setTimeout((()=>{this.amby.dispatch(a.setAdInit(s.states.INIT_STOP))}),500))})),this.smartBackfillComponent=new h.SmartBackfillComponent(this.widget))}getPreLoadAdsBy(){return(0,d.getInObject)(this.schedule,["pre","loadAds"])}hasPreScheduleLoaded(){return["pageLoaded","playerLoaded"].indexOf(this.getPreLoadAdsBy())>-1}canPrePlaySchedule(){return!this.amby.get("player.wasPlaying",!1)&&this.hasPreScheduleLoaded()}onAdStatusChange(){const e=this.amby.get("ad.status");switch((0,r.mgDebug)(`Ads ${e}.${this.amby.get("ad.adTag")?` Ad source: ${this.amby.get("ad.adTag")}`:""}`),e){case s.states.STATUS_READY:this.amby.get("formatConfig.smartBackfill",!1)&&this.amby.get("ad.rejecting")&&(this.amby.dispatch(a.setAdEnabled(!1)),this.amby.dispatch(a.upsertAdState({rejected:!0})),setTimeout((()=>{this.amby.dispatch(a.setAdInit(s.states.INIT_STOP))}),500)),this.preTimeout&&(clearTimeout(this.preTimeout),this.preTimeout=null),this.amby.get("ad.enabled",!1)&&(this.amby.get("formatConfig.visibleInit",!1)&&this.amby.dispatch(a.setAdVisible(!0)),("pre"===this.amby.get("ad.curAdPosition")&&!this.hasPreScheduleLoaded()||this.amby.get("formatConfig.initAdOnPosition",!1))&&this.amby.dispatch(a.setTriggerToTrue("ad.actionPlay")),"pre"===this.amby.get("ad.curAdPosition")&&this.hasPreScheduleLoaded()&&(this.amby.get("ad.inSight",!1)||"onLoad"===this.amby.get("autoStart"))&&this.amby.dispatch(a.setTriggerToTrue("ad.actionPlay")));break;case s.states.STATUS_PLAYING:this.preTimeout&&(clearTimeout(this.preTimeout),this.preTimeout=null),this.prevPlayerStatus===s.states.STATUS_PAUSED||!this.amby.get("ad.enabled",!1)&&"pre"!==this.amby.get("ad.curAdPosition")||"visibleOnly"===this.amby.get("autoStart")&&!this.amby.get("player.inSight")?this.amby.dispatch(a.setTriggerToTrue("ad.actionPause")):(this.amby.dispatch(a.upsertPlayerState({isAdPlaying:!0,actionPause:!0})),this.applyPlayerSize(),this.amby.get("ad.enabled",!1)&&this.amby.dispatch(a.setAdVisible(!0)),this.amby.get("ad.initMuted",!0)||d.Helpers.iOSversion()||this.amby.dispatch(a.setTriggerToTrue("ad.unmute")));break;case s.states.STATUS_ERROR:"pre"===this.amby.get("ad.curAdPosition")&&this.hasPreScheduleLoaded()&&(this.amby.get("ad.currentImpressions",0)>0&&this.amby.dispatch(a.setTriggerToTrue("player.actionPlay")),this.amby.get("ad.beforePlacementStopped")||this.amby.dispatch(a.upsertAdState({curAdPosition:null,adInProgress:!1,beforePlacementStopped:!0}))),this.prevPlayerStatus===s.states.STATUS_PLAYING&&this.amby.dispatch(a.setTriggerToTrue("player.actionPlay")),this.onAdStopped();break;case s.states.STATUS_STOPPED:(this.prevPlayerStatus===s.states.STATUS_PLAYING||this.amby.get("player.position",0)>0||this.amby.get("ad.enabled",!1)&&"pre"===this.amby.get("ad.curAdPosition"))&&(this.amby.get("player.inSight",!1)||["onLoad","visibleNotPause"].indexOf(this.amby.get("autoStart"))>-1?this.amby.dispatch(a.setTriggerToTrue("player.actionPlay")):this.amby.dispatch(a.upsertPlayerState({isPlayingOnVisible:!0}))),this.onAdStopped()}}initAdPlayer(){this.formatConfig.startOnScroll&&!this.startedByScroll?(window.addEventListener("scroll",(()=>{this.startOnScroll((()=>{this.initAdPlayer()}))})),this.startOnScroll((()=>{this.initAdPlayer()}))):(this.amby.dispatch(a.upsertAdState({currentImpressions:0})),this.adPlayerInited?this.amby.dispatch(a.setAdInit(s.states.INIT_RESET)):(this.amby.dispatch(a.setAdInit(s.states.INIT_NEEDED)),this.adPlayerInited=!0))}applyPlayerSize(){d.Helpers.vitalCall((()=>{const e=this.amby.get("videoElemPosition");this.adContainerComponent&&e&&(this.adContainerComponent.applyPlayerSize(e),this.amby.dispatch(a.upsertAdState({resize:!0,size:{width:e.pWidth,height:e.pHeight}})))}),this.amby.get("isVital",!0))}onAdStopped(){this.preTimeout&&(clearTimeout(this.preTimeout),this.preTimeout=null),this.amby.dispatch(a.upsertPlayerState({isAdPlaying:!1})),this.amby.dispatch(a.setAdVisible(!1)),this.amby.dispatch(a.upsertAdState({adInProgress:!1,curAdPosition:null}))}presearchInit(){this.amby.get("player.wasPlaying",!1)||this.amby.get("ad.beforePlacementInitiated")||d.Helpers.vitalCall((()=>{this.amby.dispatch(a.upsertAdState({curAdPosition:"pre",adInProgress:!0,beforePlacementInitiated:!0})),this.amby.dispatch(a.setAdStatus(s.states.STATUS_INIT)),this.initAdPlayer()}),this.amby.get("isVital",!0))}startOnScroll(e){this.startedByScroll||null===this.startScrollPixels||(this.updateStartOnScrollPixels(),d.Helpers.getViewTop()+d.Helpers.getWindowHeight()/2>this.startScrollPixels&&((0,r.mgDebug)(`Current Scroll: ${d.Helpers.getViewTop()}px, Starting code on: ${this.startScrollPixels}px`),this.startedByScroll=!0,e()))}updateStartOnScrollPixels(){const e=this.mainBox.getBoundingClientRect().top+d.Helpers.getViewTop(),t=this.startScrollPixels;this.startScrollPixels=Math.floor(e*this.startOnScrollPercent),this.startScrollPixels!==t&&(0,r.mgDebug)(`Player Top: ${e}px, Start searching for ad on: ${this.startOnScrollPercent}% = ${this.startScrollPixels}px`)}}},{"../../redux/actionCreators":58,"../../redux/storage":61,"../components/placementComponents/adContainerComponent":14,"../components/smartBackfillComponent":22,"../debug":30,"../helpers":37,"../players/controls/closeButtonComponent":52,"./adControllerComponent":26}],28:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.KpiDataManager=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=n(t);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=a?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(s,r,o):s[r]=e[r]}s.default=e,i&&i.set(e,s);return s}(e("../../redux/actionCreators")),a=e("../debug"),r=e("../../redux/storage");function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(n=function(e){return e?i:t})(e)}i.KpiDataManager=class{constructor(e,t){this.amby=e,this.deletableSubListeners=this.getDeletableSubListenersMap(),this.deletableTriggerListeners=this.getDeletableSubTriggerListenersMap(),this.addListeners(),this.createPlacementObserver(t),this.createAdViewableObserver(t),this.createScrollReachedObserver(t)}updateKpiCustomData(e,t){this.amby.dispatch(s.upsertState({customDataKpi:{[e]:t}}))}asyncRemoveSubListener(e,t){setTimeout((()=>{this.amby.removeSubListener(e,t)}))}asyncRemoveTriggerListener(e,t){setTimeout((()=>{this.amby.removeTriggerListener(e,t)}))}getDeletableSubListenersMap(){const e=()=>{this.amby.get("widget.blurred",!1)&&this.amby.get("player.InPoint")&&!this.amby.get("player.OutPoint")&&(this.amby.dispatch(s.upsertState({player:{OutPoint:Date.now()}})),this.amby.dispatch(s.setTriggerToTrue("widget.exposure")),this.asyncRemoveSubListener("widget.blurred",e))},t=()=>{if(this.amby.get("player.InPoint")&&this.amby.get("widget.renderTime")){const e=this.amby.get("player.InPoint")-this.amby.get("widget.renderTime");this.updateKpiCustomData("render_buffer",{renderBufferTime:e>0?e:0}),this.asyncRemoveSubListener("player.InPoint",t),this.addDataCleanListener("player.InPoint","render_buffer")}},i=()=>{this.updateKpiCustomData("scroll_buffer",{scrollBufferTime:this.amby.get("player.InPoint")?this.amby.get("player.scrollReached")-this.amby.get("player.InPoint"):0}),this.asyncRemoveSubListener("player.scrollReached",i),this.addDataCleanListener("player.scrollReached","scroll_buffer")},a=()=>{this.updateKpiCustomData("exposure",{exposureTime:this.amby.get("player.OutPoint")-this.amby.get("player.InPoint")}),this.asyncRemoveSubListener("player.scrollReached",a),this.addDataCleanListener("player.scrollReached","exposure")},n=()=>{this.updateKpiCustomData("ad_viewable",{adViewableTime:Date.now()-this.amby.get("adViewableTimeKpi.lastVideoAdPlayingTime")}),this.asyncRemoveSubListener("widget.adViewable",n),this.addDataCleanListener("widget.adViewable","ad_viewable")},o=()=>{this.amby.get("ad.status")===r.states.STATUS_PLAYING&&(this.amby.dispatch(s.upsertState({adViewableTimeKpi:{lastVideoAdPlayingTime:Date.now()}})),this.updateKpiCustomData("video_ad_playing",{videoStartDelay:Date.now()-this.amby.get("player.scrollReached")}),this.asyncRemoveSubListener("ad.status",o),this.addDataCleanListener("ad.status","video_ad_playing"))},l=()=>{this.amby.dispatch(s.setTriggerToTrue("sensor.resendAdHashKpi")),this.asyncRemoveSubListener("ad.adHash",l)},d=()=>{this.amby.get("ad.loaded")&&this.amby.get("widget.renderTime")&&(this.updateKpiCustomData("ad_loaded_buffer",{loadedBufferTime:Date.now()-this.amby.get("widget.renderTime")}),this.asyncRemoveSubListener("ad.loaded",d),this.addDataCleanListener("ad.loaded","ad_loaded_buffer"))};return{"player.InPoint":t,"widget.renderTime":t,"widget.blurred":e,"player.scrollReached":i,"widget.exposure":a,"widget.adViewable":n,"ad.status":o,"ad.adHash":l,"ad.loaded":d}}getDeletableSubTriggerListenersMap(){const e=()=>{this.amby.get("player.scrollReached",!1)&&(this.updateKpiCustomData("vpaid",{impressionDelay:Date.now()-this.amby.get("player.scrollReached")}),this.asyncRemoveTriggerListener("ad.vpaid",e),this.addDataCleanTriggerListener("ad.vpaid","vpaid"))},t=()=>{this.amby.get("player.scrollReached",!1)&&(this.updateKpiCustomData("impression",{impressionDelay:Date.now()-this.amby.get("player.scrollReached")}),this.asyncRemoveTriggerListener("ad.impression",t),this.addDataCleanTriggerListener("ad.impression","impression"))};return{"ad.vpaid":e,"ad.impression":t}}addDataCleanTriggerListener(e,t){const i=()=>{this.amby.dispatch(s.upsertState({customDataKpi:{[t]:null}})),setTimeout((()=>{this.amby.removeTriggerListener(e,i)}))};this.amby.addTriggerListener(e,i)}addDataCleanListener(e,t){const i=()=>{this.amby.dispatch(s.upsertState({customDataKpi:{[t]:null}})),setTimeout((()=>{this.amby.removeSubListener(e,i)}))};this.amby.addSubListener(e,i)}createPlacementObserver(e){let t=null;this.placementIO=new IntersectionObserver((e=>{const i=e[0]&&e[0].isIntersecting;i&&!this.amby.get("player.InPoint")&&this.amby.dispatch(s.upsertState({player:{InPoint:Date.now()}})),i||this.amby.get("player.OutPoint")||!t||(this.amby.dispatch(s.upsertState({player:{OutPoint:Date.now()}})),this.amby.dispatch(s.setTriggerToTrue("widget.exposure"))),t=i}),{threshold:0}),this.placementIO.observe(e)}createAdViewableObserver(e){let t,i;const n=()=>{this.amby.get("ad.status")===r.states.STATUS_PLAYING&&i?t=setTimeout((()=>{this.amby.dispatch(s.setTriggerToTrue("widget.adViewable"))}),2e3):clearTimeout(t)};this.adViewableIO=new IntersectionObserver((e=>{i=e[0]&&e[0].isIntersecting,n(),(0,a.mgDebug)(`adViewable intersecting ${i}`)}),{rootMargin:"0px",threshold:.5}),this.amby.addSubListener("ad.status",(()=>{n()})),this.adViewableIO.observe(e)}createScrollReachedObserver(e){this.scrollReachedIO=new IntersectionObserver((e=>{e[0]&&e[0].isIntersecting&&!this.amby.get("player.scrollReached")&&(this.amby.dispatch(s.upsertState({player:{scrollReached:Date.now()}})),(0,a.mgDebug)("Scroll Reached"))}),{threshold:.51}),this.scrollReachedIO.observe(e)}addListeners(){const e=()=>{this.amby.get("player.InPoint")&&!this.amby.get("player.OutPoint")&&(this.amby.dispatch(s.upsertState({player:{OutPoint:Date.now()}})),this.amby.dispatch(s.setTriggerToTrue("widget.exposure")))};window.addEventListener("beforeunload",e),Object.keys(this.deletableSubListeners).forEach((e=>{this.amby.addSubListener(e,this.deletableSubListeners[e])})),Object.keys(this.deletableTriggerListeners).forEach((e=>{this.amby.addTriggerListener(e,this.deletableTriggerListeners[e])})),this.amby.addSubListener("ad.curAdPosition",(()=>{"pre"!==this.amby.get("ad.curAdPosition")&&(this.placementIO&&this.placementIO.disconnect(),this.adViewableIO&&this.adViewableIO.disconnect(),this.scrollReachedIO&&this.scrollReachedIO.disconnect(),window.removeEventListener("beforeunload",e),Object.keys(this.deletableSubListeners).forEach((e=>{this.amby.removeSubListener(e,this.deletableSubListeners[e])})),Object.keys(this.deletableTriggerListeners).forEach((e=>{this.amby.removeTriggerListener(e,this.deletableTriggerListeners[e])})),this.amby.dispatch(s.upsertState({player:{InPoint:null}})),this.amby.dispatch(s.upsertState({player:{OutPoint:null}})),this.amby.dispatch(s.upsertState({player:{scrollReached:null}})),this.amby.dispatch(s.upsertState({adViewableTimeKpi:null})),this.amby.dispatch(s.deleteProperty("customDataKpi")))}))}}},{"../../redux/actionCreators":58,"../../redux/storage":61,"../debug":30}],29:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.VideoSensorComponent=void 0;var s=e("../../redux/storage"),a=e("../helpers"),r=e("../debug");i.VideoSensorComponent=class{constructor(e){this.amby=e.amby,this.config=e.mgRec.config,this.playlist=e.mgRec.vr_playlist,this.cappingData=e.mgRec.cappingData,this.cappingData||(this.eventsBuffer=[],this.amby.addSubListener("cappingData",(()=>{this.cappingData=e.mgRec.cappingData,this.playlist=e.mgRec.vr_playlist,this.sendFromBuffer()}))),this.templateId=this.config.templateId||"0",this.subId=this.config.subid||0,this.widgetId=e.mgRec.cid,this.eventListeners={},this.resendAdHashKpi=[],this.adHashKpiQueriesSent=!1,this.silentMode=!1;const t=e.mgRec.countersDomain||`c.${e.mgRec.subnetDomain||""}`,i=e.libConfig.videoSensorUrlTemplate;this.sensorUrl=i.replace("{{DOMAIN}}",t);let{protocol:s}=document.location;s=0===s.indexOf("http")?s:"https:",this.sensorUrl=`${s}${this.sensorUrl}`,this.lastPosition=0,this.impressionTime=0,this.sequenceIndex=0,this.cappingInterval=parseInt(this.config.cappingInterval,10)||15,this.formats={native:"instream",outstream:"outstream"};const n=(0,a.getInObject)(e,["mgRec","config","events"]);(a.Helpers.getUrlParam("mgwteaser")||a.Helpers.getUrlParam("mgwcampaign"))&&(this.silentMode=!0),n&&Object.entries(n).forEach((([e,t])=>{"function"==typeof t?this.on(e,t):"string"==typeof t&&this.on(e,(()=>{this.createImg(t)}))})),this.muidn="-";try{this.muidn=window.localStorage.mgMuidn||"-"}catch(e){(0,r.mgDebug)(e)}this.preCustomData={},this.addListeners(),(0,r.mgDebug)("VideoSensorComponent initiated.")}addListeners(){this.amby.addTriggerListener(["player","userPlay"],(()=>{this.callSensor("vr_play")})),this.amby.addTriggerListener(["player","userPause"],(()=>{this.impressionTime=0,this.callSensor("vr_pause")})),this.amby.addSubListener(["player","status"],(()=>{if(this.amby.get("player.status")===s.states.STATUS_READY)this.loadFired||(this.loadFired=!0,this.callSensor("vr_load"))})),this.amby.addSubListener(["soundNotify"],(()=>{this.callSensor("sound_notify")})),this.amby.addSubListener(["player","position"],(()=>{const e=this.amby.get("player.position");if(e&&e>this.lastPosition){this.lastPosition=e;const t=e/this.duration*100;this.impressionTime+=1,!this.impressionTimeSent&&this.impressionTime>=this.cappingInterval&&(this.impressionTimeSent=!0,this.callSensor("vr_capping")),!this.vr25&&t>25&&t<50&&(this.callSensor("vr_progress_25"),this.vr25=!0),!this.vr50&&t>50&&t<75&&(this.callSensor("vr_progress_50"),this.vr50=!0),!this.vr75&&t>75&&t<100&&(this.callSensor("vr_progress_75"),this.vr75=!0)}})),this.amby.addSubListener(["player","complete"],(()=>{this.amby.get("player.complete",!1)&&!this.vr100&&this.callSensor("vr_progress_100")})),this.amby.addTriggerListener(["player","seek"],(()=>{this.lastPosition=this.amby.get("player.position"),this.impressionTime=0})),this.amby.addTriggerListener(["player","firstFrame"],(()=>{this.reset(),this.callSensor("vr_impression")})),this.amby.addTriggerListener(["player","playerInTeaserClicked"],(()=>{this.onClickFunc()})),this.amby.addTriggerListener(["player","userMute"],(()=>{this.callSensor("vr_mute")})),this.amby.addTriggerListener(["player","userUnmute"],(()=>{this.callSensor("vr_unmute")})),this.amby.addTriggerListener(["closeBtn","clicked"],(()=>{this.callSensor("vr_close")})),this.amby.addTriggerListener(["player","nextClicked"],(()=>{this.callSensor("vr_next")})),this.amby.addTriggerListener("player.openPage",(()=>{this.callSensor("vr_open_page")})),this.amby.addSubListener("ad.status",(()=>{switch(this.amby.get("ad.status")){case s.states.STATUS_READY:this.resetAdVars(),this.fireEvent("load"),this.callSensor("load",!0);break;case s.states.STATUS_ERROR:this.fireEvent("error"),this.callSensor("error",!0);break;case s.states.STATUS_PLAYING:this.amby.get("visibilityKpi")&&(setTimeout((()=>{this.callSensor("video_ad_playing",!0)}),0),(0,r.mgDebug)("VideoAdPlaying sent"))}})),this.amby.addTriggerListener("player.next",(()=>{this.callSensor("vr_next")})),this.amby.addTriggerListener("player.previous",(()=>{this.callSensor("vr_previous")})),this.amby.addTriggerListener("player.next_2",(()=>{this.callSensor("vr_next_2")})),this.amby.addTriggerListener("player.expandBtnClicked",(()=>{this.callSensor("vr_expand")})),this.amby.addSubListener("player.quality",(()=>{"720p"===this.amby.get("player.quality","360p")?this.callSensor("vr_hd_on"):this.callSensor("vr_hd_off")})),this.amby.addSubListener("ad.inSight",(()=>{!this.inviewSent&&this.amby.get("ad.inSight")&&(this.inviewSent=!0,this.callSensor("inview",!0))})),this.amby.addTriggerListener("ad.impression",(()=>{const e=new CustomEvent("mgmetrics",{bubbles:!0,composed:!0,detail:{name:"ad.impression",data:""}});window.dispatchEvent(e),this.fireEvent("impression",{hash:this.amby.get("ad.adHash")}),setTimeout((()=>{const e=(0,a.getInObject)(this.playlist,[this.itemIndex,"id"],0);1272143===this.widgetId&&Number(e)<1e4&&!this.amby.get("ad.adHash")&&(this.preCustomData={vastXml:this.amby.get("vastXml")}),this.callSensor("impression",!0),this.preCustomData={}}),0),this.preCustomData={exposureTime:(new Date).getTime()-window.performance.timing.navigationStart},this.config.sendRawEvents&&this.callSensor("rawimpression",!0),this.preCustomData={}})),this.amby.addTriggerListener("ad.complete",(()=>{this.fireEvent("complete"),this.callSensor("complete",!0),this.resetAdVars()})),this.amby.addTriggerListener("ad.vpaid",(()=>{setTimeout((()=>{this.callSensor("vpaid",!0)}),0)})),this.amby.addTriggerListener("ad.paid",(()=>{this.callSensor("impression",!0)})),this.amby.addTriggerListener("ad.clicked",(()=>{this.fireEvent("click"),this.callSensor("click",!0)})),this.amby.addTriggerListener("ad.skip",(()=>{this.fireEvent("skip"),this.callSensor("skip",!0)})),this.amby.addTriggerListener("ad.closed",(()=>{this.callSensor("close",!0)})),this.amby.addTriggerListener("ad.passback",(()=>{this.callSensor("passback",!0)})),this.amby.addTriggerListener("ad.mute",(()=>{this.callSensor("mute",!0)})),this.amby.addTriggerListener("ad.unmute",(()=>{this.callSensor("unmute",!0)})),this.amby.addTriggerListener("ad.unmuteraw",(()=>{this.config.sendRawEvents&&this.callSensor("unmuteraw",!0)})),this.amby.addTriggerListener("ad.inventory",(()=>{this.callSensor("adinventory",!0)})),this.amby.addTriggerListener("widget.rawplayer",(()=>{this.preCustomData={exposureTime:(new Date).getTime()-window.performance.timing.navigationStart},this.config.sendRawEvents&&this.callSensor("rawplayer",!0),this.preCustomData={}})),this.amby.addTriggerListener("widget.rawinit",(()=>{this.preCustomData={exposureTime:(new Date).getTime()-window.performance.timing.navigationStart},this.config.sendRawEvents&&this.callSensor("rawinit",!0),this.preCustomData={}})),this.amby.addTriggerListener("ad.rejected",(()=>{this.callSensor("rejected",!0)}));const e=t=>()=>{this.amby.get("player.InPoint")&&this.amby.get("widget.renderTime")&&(setTimeout((()=>{this.callSensor("render_buffer",!0),this.amby.removeSubListener(t,e)}),0),(0,r.mgDebug)("Render buffer sent"))};this.amby.addSubListener("player.InPoint",e("player.InPoint")),this.amby.addSubListener("widget.renderTime",e("widget.renderTime"));const t=()=>{setTimeout((()=>{this.callSensor("scroll_buffer",!0),this.amby.removeSubListener("player.scrollReached",t)}),0),(0,r.mgDebug)("Scroll buffer sent")};this.amby.addSubListener("player.scrollReached",t);const i=()=>{setTimeout((()=>{this.amby.get("customDataKpi.ad_loaded_buffer.loadedBufferTime")&&(this.callSensor("ad_loaded_buffer",!0),(0,r.mgDebug)("Ad Loaded buffer sent"),this.amby.removeSubListener("ad.loaded",i))}),0)};this.amby.addSubListener("ad.loaded",i);const n=()=>{(0,r.mgDebug)("widget.adViewable triggered"),this.amby.get("adViewableTimeKpi.lastVideoAdPlayingTime")&&setTimeout((()=>{this.callSensor("ad_viewable",!0),this.amby.removeSubListener("widget.adViewable",n)})),(0,r.mgDebug)("adViewable sent")};this.amby.addSubListener("widget.adViewable",n);this.amby.addSubListener("widget.exposure",(()=>{setTimeout((()=>{this.callSensor("exposure",!0),this.amby.removeSubListener("widget.adViewable",n)})),(0,r.mgDebug)("exposure sent")})),this.amby.addTriggerListener("sensor.resendAdHashKpi",(()=>{if("vpaid"===this.amby.get("ad.playerEngine"))for(;this.resendAdHashKpi.length>0;){const e=new URL(this.resendAdHashKpi.pop());e.searchParams.set("h",this.amby.get("ad.adHash")),this.createImg(e.toString())}this.adHashKpiQueriesSent=!0,(0,r.mgDebug)("AdHashKpi queries sent")}))}addTeasersListeners(){const e=this.amby.get("teasers",[]);for(let t=0;t<e.length;t++)this.amby.addTriggerListener(["teasers",t,"clicked"],(()=>{this.onClickFunc()})),this.amby.addTriggerListener(["teasers",t,"autoClicked"],(()=>{this.onClickFunc(!0)}))}getFormat(){const e=this.amby.get("formatConfig.name");return this.formats[e]||"unknown"}callSensor(e,t=!1){if(this.silentMode)return!1;let i=this.makeSrcObj(e,this.sensorUrl,this.widgetId,this.templateId);t?(this.itemIndex=this.amby.get("player.itemIndex",0),i.tid=(0,a.getInObject)(this.playlist,[this.itemIndex,"id"],0),2===this.amby.get("ad.adPlayer")&&(i.tid=this.amby.get("ad.adTag")),i.customData={...this.preCustomData,timeOffset:this.amby.get("ad.position",0),muidn:this.muidn,playerEngine:this.amby.get("ad.playerEngine","unknown"),adPlayer:this.amby.get("ad.adPlayer")||0,uuid:this.config.uuid||"",subId:parseInt(this.subId,10)||0,sticky:this.amby.get("player.isSticky",!1)?1:0,viewable:this.amby.get("ad.inSight",!1)?100:0},i=this.initDataByAdEvent(e,i),this.getFromCappingData(i.customData),this.amby.get("ad.adHash")?i.clickAdditionH=this.amby.get("ad.adHash"):(0,a.getInObject)(this.playlist,[this.itemIndex,"hash"])&&(i.clickAdditionH=(0,a.getInObject)(this.playlist,[this.itemIndex,"hash"])),this.sourceShowHash&&this.sourceShowHash!==(0,a.getInObject)(this.playlist,[this.itemIndex,"hash"])&&(i.clickAdditionV=this.sourceShowHash)):(i.customData={vrViewable:0,sticky:0,playlistSeq:this.sequenceIndex,uuid:this.config.uuid||"",format:this.getFormat(),muidn:this.muidn,playerEngine:this.amby.get("ad.playerEngine","unknown")},this.playlist&&this.playlist[this.amby.get("player.itemIndex",0)]&&(this.itemIndex=this.amby.get("player.itemIndex",0),i.tid=this.playlist[this.itemIndex].id,i.clickAdditionH=`${this.playlist[this.itemIndex].hash}`,this.getFromCappingData(i.customData),this.initDataByEvent(e,i))),this.amby.get("visibilityKpi")&&this.amby.get(`customDataKpi.${e}`)&&((0,r.mgDebug)(this.amby.get(`customDataKpi.${e}`)),i.customData=Object.assign(i.customData,this.amby.get(`customDataKpi.${e}`)));const s=a.Helpers.attachRequestParams(i.generateSrc());return this.needRepeatKpiEvent(e)&&this.resendAdHashKpi.push(s),this.sendGA(e),(0,r.mgDebug)(`Event ${e} fired.${this.amby.get("ad.adTag")?` Ad source: ${this.amby.get("ad.adTag")}`:""}`),(0,r.mgDebug)(`Generated link: ${s}`),this.cappingData?this.createImg(s):!!t&&this.addToBuffer(s)}initDataByAdEvent(e,t){switch(e){case"complete":t.customData={timeOffset:Math.floor(this.amby.get("ad.duration",1))};break;case"vpaid":case"skip":case"click":case"close":t.customData={adTag:this.amby.get("ad.adTag"),videoUrl:this.amby.get("ad.videoUrl"),adClickUrl:this.amby.get("ad.adClickUrl")};break;case"unmuteraw":t.customData={videoUrl:this.amby.get("ad.unmuteMediaSrc")};break;case"impression":t.customData.timems=Date.now(),t.customData.impHash=a.Helpers.md5(`${this.amby.get("ad.adHash")}_${this.muidn}_${t.customData.timems}`),this.amby.get("ad.poc")&&(t.customData.poc=this.amby.get("ad.poc"));break;case"load":this.cappingData&&this.amby.get("servLib")&&(t.customData.badLibVer=this.amby.get("servLib"));break;case"error":"error"===e&&(t.customData.errorMessage=encodeURIComponent(this.amby.get("ad.errorMessage")))}return t}initDataByEvent(e,t){let i;switch(e){case"vr_click":case"vr_auto_click":this.cappingData?void 0!==this.cappingData.isBot?t.customData.isBot=this.cappingData.isBot:t.customData.isBot=0:t.customData.isBot="{isBot}",t.srcItemIndex=this.itemIndex,!1===this.sourceShowHashUpdated&&(t.clickAdditionV+=this.sourceShowHash);break;default:i="vr_progress_100"===e?this.duration:this.amby.get("player.position",0),t.customData.timeOffset=Math.floor(i),0===e.indexOf("vr_")&&this.sourceShowHash&&this.sourceShowHash!==this.playlist[this.itemIndex].hash&&(t.clickAdditionV=this.sourceShowHash),"sound_notify"===e&&(t.customData.msg=this.amby.get("soundNotify"))}return t}needRepeatKpiEvent(e){return!this.amby.get("ad.adHash",!1)&&!this.adHashKpiQueriesSent&&["render_buffer","scroll_buffer","exposure","ad_loaded_buffer","video_ad_playing"].indexOf(e)>-1}onClickFunc(e=!1){const t=this.amby.get("player.itemIndex",0);this.sourceShowHashUpdated=!0,this.sourceShowHash=this.playlist[t].hash,this.callSensor(e?"vr_auto_click":"vr_click")}reset(){this.lastPosition=0,this.duration=this.amby.get("player.duration",1),this.impressionTime=0,this.impressionTimeSent=!1,this.vr25=!1,this.vr50=!1,this.vr75=!1,this.vr100=!1,this.progress10s=!1,this.progress20s=!1,!0===this.sourceShowHashUpdated&&(this.sourceShowHashUpdated=!1),this.sequenceIndex+=1}createImg(e){a.Helpers.createImg(e)}resetAdVars(){this.lastAdPosition=0}sendGA(e){if(this.amby.get("ga_id",!1)){const t=`https://www.google-analytics.com/collect?v=1&tid=${this.amby.get("ga_id")}&t=event&ec=MgPlayer&cid=1&ea=${e}&dl=${encodeURIComponent(window.location!==window.parent.location?document.referrer:document.location.href)}`;(0,r.mgDebug)(`GA: ${t}`),this.createImg(t)}}on(e,t){Object.prototype.hasOwnProperty.call(this.eventListeners,e)||(this.eventListeners[e]=[]),this.eventListeners[e].push(t)}fireEvent(e,t=null){Object.prototype.hasOwnProperty.call(this.eventListeners,e)&&this.eventListeners[e].forEach((i=>{setTimeout((()=>{try{i(t)}catch(t){(0,r.mgDebug)(`VideoSensorComponent ERROR: event ${e}: ${t}`)}}),0)}))}getFromCappingData(e){this.cappingData?(this.cappingData.tt&&(e.tt=this.cappingData.tt),this.cappingData.ts&&(e.ts=this.cappingData.ts),this.cappingData.psid&&(e.psid=this.cappingData.psid)):(e.tt="{tt}",e.ts="{ts}",e.psid="{psid}")}addToBuffer(e){this.eventsBuffer||(this.eventsBuffer=[]),this.eventsBuffer.push(e)}sendFromBuffer(){for(;this.eventsBuffer.length>0;){const e=this.eventsBuffer.shift();setTimeout((()=>{const t=new URL(e),i=JSON.parse(t.searchParams.get("o"));i.tt&&(this.cappingData.tt?i.tt=this.cappingData.tt:delete i.tt),i.ts&&(this.cappingData.ts?i.ts=this.cappingData.ts:delete i.ts),i.psid&&(this.cappingData.psid?i.psid=this.cappingData.psid:delete i.psid),i.isBot&&(void 0!==this.cappingData.isBot?i.isBot=this.cappingData.isBot:i.isBot=0),this.amby.get("servLib")?i.badLibVer=this.amby.get("servLib"):i.badLibVer&&delete i.badLibVer,t.searchParams.set("o",JSON.stringify(i)),this.createImg(t.href)}),0)}}makeSrcObj(e,t,i,s){return{sensorUrl:t,tid:null,clickAdditionV:null,widgetId:i,eventName:e,clickAdditionH:null,customData:null,templateId:s,adTag:null,srcItemIndex:null,generateSrc(){return`${this.sensorUrl}?${this.tid?`tid=${this.tid}&`:""}iid=${this.widgetId}&e=${this.eventName}&h=${this.clickAdditionH}&o=${encodeURIComponent(JSON.stringify(this.customData))}&t=${this.templateId}${this.clickAdditionV?`&v=${this.clickAdditionV}`:""}${this.srcItemIndex?`&src=${this.srcItemIndex}`:""}&c=${Math.floor(65535*Math.random())}`}}}}},{"../../redux/storage":61,"../debug":30,"../helpers":37}],30:[function(e,t,i){"use strict";let s;Object.defineProperty(i,"__esModule",{value:!0}),i.Debug=void 0,i.getDebugFlag=function(){return s&&s.debugFlag},i.mgDebug=function(e){s&&s.debug(e)},i.mgForceSend=function(e){s&&s.debug(e,!0)},i.setDebugFlag=function(e){s&&(s.debugFlag=e)};class a{constructor(e,t){const i=a.queryString();t&&t.mgRec&&t.mgRec.config&&t.mgRec.config.debug&&(this.debugMode=t.mgRec.config.debug);const s=e?e.Helpers.getCookie("mgwdebug"):void 0;if((i.mgwdebug||void 0!==s)&&(this.debugMode||(this.debugMode=i.mgwdebug||s),this.copyToConsole=!0),this.debugMode&&(this.debugFlag=!0),t){t.mgRec&&t.mgRec.cid?this.cid=t.mgRec.cid:this.cid=0,this.sensorUrl=t.libConfig.videoSensorUrlTemplate,this.sensorUrl=this.sensorUrl.replace("{{DOMAIN}}",t.mgRec.countersDomain||`c.${t.mgRec.subnetDomain}`);let{protocol:e}=document.location;e=0===e.indexOf("http")?e:"https:",this.sensorUrl=`${e}${this.sensorUrl}`}}static init(e){if(!e)return void(s=new a);e.debug||(s=new a(e.modules,e),e.debug=s.debug,e.remoteMessage=s.remoteMessage);const t=this.queryString(),i=e.mgRec.config.debug;(t.mgwdebug||t[`mgwdebug_${e.mgRec.cid}`]||i&&"string"!=typeof i||"string"==typeof i&&parseInt(i,10)||e.block.getAttribute("data-mgwdebug"))&&(s.debugFlag=!0)}static queryString(){const e={};let t=window.location!==window.parent.location?document.referrer:document.location.href;if(t===document.referrer)try{t=window.parent.location.href}catch(e){}const i=t.match(/\?\S+/);if(i){const t=i[0].substring(1).split("&");for(let i=0;i<t.length;i++){const s=t[i].split("=");if(void 0===e[s[0]])e[s[0]]=decodeURIComponent(s[1]);else if("string"==typeof e[s[0]]){const t=[e[s[0]],decodeURIComponent(s[1])];e[s[0]]=t}else e[s[0]].push(decodeURIComponent(s[1]))}}return e}debug(e,t=!1){if(this.debugFlag||t){let i=e;"object"!=typeof i&&(i=`${(new Date).toISOString().replace("Z","MG")} ${i}`),"remote"===this.debugMode||t?(this.remoteMessage(i),this.copyToConsole&&console.debug(i)):console.debug(i)}}remoteMessage(e){const t=new Image;this.sensorUrl&&(t.src=`${this.sensorUrl}?e=mgwdebug&iid=${this.cid}&o=${encodeURIComponent(e)}&c=${Math.floor(65535*Math.random())}`)}}i.Debug=a},{}],31:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.AttachedWidgetVideo=void 0;var s=e("../../redux/storage"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=x(t);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var n=a?Object.getOwnPropertyDescriptor(e,r):null;n&&(n.get||n.set)?Object.defineProperty(s,r,n):s[r]=e[r]}s.default=e,i&&i.set(e,s);return s}(e("../../redux/actionCreators")),r=e("../debug"),n=e("./formatBase"),o=e("../players/ad/aniViewComponent"),l=e("../components/placementComponents/adContainerComponent"),d=e("../helpers"),h=e("../players/controls/closeButtonComponent"),p=e("../controllers/videoSensorComponent"),m=e("../components/placementComponents/widgetComponent"),c=e("../../redux/listener"),g=e("../components/placementComponents/moveToBodyComponent"),u=e("../components/styleComponent"),y=e("../players/controls/logoComponent"),b=e("../players/ad/mgAdPlayerComponent"),f=e("../components/placementComponents/inArticleComponent"),v=e("../players/ad/imaSdkComponent"),S=e("../players/controls/skipAdButtonComponent"),_=e("../players/controls/muteButtonComponent"),C=e("../players/ad/vpaidPlayerComponent"),T=e("../players/ad/excoComponent"),w=e("../players/ad/aniViewDirectComponent"),P=e("../components/smartBackfillComponent"),A=e("../players/ad/tremorComponent"),k=e("../players/ad/customEngine");function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(x=function(e){return e?i:t})(e)}const D="visibleNotPause",I="visibleOnly";class E extends n.FormatBase{constructor(e){super(e),this.videoSensorComponent=new p.VideoSensorComponent(e),this.styleComponent=new u.StyleComponent(this.widget),this.styleComponent.styleChecking((()=>{this.onStyleLoad()}))}onStyleLoad(){this.amby.get("visibilityKpi")&&this.amby.dispatch(a.upsertState({widget:{renderTime:Date.now()}})),this.sticky=!!(0,d.getInObject)(this.amby.get(),["sticky"],!0)&&!!this.amby.get("formatConfig.sticky",!1),this.wasVisible=!1,this.reInit=parseInt(this.amby.get("formatConfig.reInit"),10),this.moveToBody=this.formatConfig.moveToBody||!1,this.widgetComponent=new m.WidgetComponent(this.widget,(()=>{this.onTeasersLoaded()}))}onTeasersLoaded(){this.autoStart=this.amby.get("autoStart",D),this.showed="outstream"!==this.amby.get("formatConfig.name"),this.amby.get("widget.allImagesLoaded",!1)?this.deferredInitPlayer():this.amby.addSubListener("widget.allImagesLoaded",(()=>{this.amby.get("widget.allImagesLoaded")&&this.deferredInitPlayer()}))}deferredInitPlayer(){"number"!=typeof this.formatConfig.startDelay&&(this.formatConfig.startDelay=0),setTimeout((()=>{this.initPlayer()}),1e3*this.formatConfig.startDelay)}initPlayer(){if(this.blockMain=this.widget.block.querySelector(".mgbox"),this.blockMain||(this.blockMain=this.widget.block),"outstream"===this.amby.get("formatConfig.name")?(this.articleSelectors=this.amby.get("formatConfig.articleSelectors",!1),this.amby.get("formatConfig.inArticle",!1)?(this.adContainerComponent=new l.AdContainerComponent(this.amby,this.blockMain,"ad","above"),this.inArticleComponent=new f.InArticleComponent(this.widget,this.adContainerComponent.playerContainer,!0),this.amby.addTriggerListener("player.positionChanged",(()=>{this.applyAttachedPlayerSize(),[s.states.STATUS_PLAYING,s.states.STATUS_PAUSED,s.states.STATUS_READY].indexOf(this.amby.get("ad.status"))>-1&&(this.inSight?!this.showed&&this.inArticleComponent.isSomeInSight()&&this.showPlayer():this.hidePlayer()),this.playOnVisible()}))):this.adContainerComponent=new l.AdContainerComponent(this.amby,this.widget.block,"ad",this.amby.get("formatConfig.adsPlace","above"))):this.adContainerComponent=new l.AdContainerComponent(this.amby,this.blockMain),this.sticky){switch(this.amby.get("formatConfig.sliderSize","m").toLowerCase()){case"s":this.stickyClass="small ";break;case"m":this.stickyClass="medium ";break;case"l":this.stickyClass="large "}this.stickyClass+=this.amby.get("formatConfig.sliderAlign","right"),this.adContainerComponent.playerContainer.addEventListener("animationend",(()=>{this.applyAttachedPlayerSize()})),this.adContainerComponent.playerContainer.addEventListener("transitionend",(()=>{this.applyAttachedPlayerSize()}))}if(this.calcStartOnScroll(this.adContainerComponent.playerContainer),this.moveToBodyComponent=new g.MoveToBodyComponent(this.widgetId,this.adContainerComponent.playerContainer),this.amby.get("formatConfig.logo",!1)&&(this.logoComponent=new y.LogoComponent(this.amby,this.adContainerComponent.playerContainer,!this.amby.get("formatConfig.inArticle",!1))),d.Helpers.addClass(this.adContainerComponent.playerContainer,"block"),this.amby.dispatch(a.setAdVisible(!1)),this.applyAttachedPlayerSize(),this.previousWidth=d.Helpers.getElemWidth(this.adContainerComponent.playerContainer),this.previousHeight=d.Helpers.getElemHeight(this.adContainerComponent.playerContainer),window.addEventListener("resize",(()=>{this.previousWidth===d.Helpers.getElemWidth(this.adContainerComponent.playerContainer)&&this.previousHeight===d.Helpers.getElemHeight(this.adContainerComponent.playerContainer)||(this.previousWidth=d.Helpers.getElemWidth(this.adContainerComponent.playerContainer),this.previousHeight=d.Helpers.getElemHeight(this.adContainerComponent.playerContainer),this.applyAttachedPlayerSize())})),"onClick"===this.autoStart&&(this.clickDiv=document.createElement("div"),this.clickDiv.className=`mgClickDiv_${this.widgetId}`,this.clickDiv.onclick=e=>{(0,r.mgDebug)("Clicked on teaser"),this.clickDiv.style.display="none",this.amby.dispatch(a.setTriggerToTrue("ad.unmute")),this.amby.dispatch(a.upsertAdState({startRequested:!0})),this.amby.dispatch(a.setTriggerToTrue("ad.actionPlay")),e.cancelBubble=!0},this.adContainerComponent.playerContainer.appendChild(this.clickDiv)),Array.isArray(this.config.adPlayers)){let e=null;if(this.config.adPlayers.forEach((t=>{e||"object"!=typeof t||(e=t)})),e.mobileChannelId||e.desktopChannelId||"aniview"!==e.engine||(e=null),e){const t=d.Helpers.getUrlParam("mgwcampaign");switch(t&&(t.match(/pubads\.g/)&&(e.engine="ima"),e.adSource=t),this.amby.dispatch(a.upsertState({ad:{playerEngine:e.engine}})),this.amby.dispatch(a.upsertState({ad:{enableCTA:e.enableCTA??!1}})),e.engine){case"aniview":this.adComponent=new o.AniViewComponent(this.widget,{publisherId:e.publisherId,channelId:"mobile"===this.amby.get("deviceType")?e.mobileChannelId:e.desktopChannelId,playerContainerId:this.adContainerComponent.playerContainer.id,playerDivId:this.adContainerComponent.playerDiv.id,playerDiv:this.adContainerComponent.playerDiv,skipoffset:e.skipoffset,vastRetry:e.vastRetry,errorLimit:e.errorLimit,maxrun:e.maxrun,logLevel:e.logLevel,timeout:parseInt(e.timeout,10),nextAdTimeout:parseInt(e.nextAdTimeout,10),ref1:e.ref1,soundButton:e.soundbutton,pauseButton:e.pausebutton,timeLine:e.timeline,aniviewParams:e.aniviewParams,waterfall:e.waterfall,noCompleteTimeout:e.noCompleteTimeout,verifiedSources:e.verifiedSources,initSize:e.initSize}),this.amby.dispatch(a.upsertAdState({skipoffset:e.skipoffset}));break;case"mgAdPlayer":this.adComponent=new b.MgAdPlayerComponent(this.widget,{container:this.adContainerComponent.playerDiv,mgsetup:e.mgsetup,quality:e.quality,adPlaylist:e.adPlaylist});break;case"ima":this.skipButton=new S.SkipAdButtonComponent(this.amby,this.adContainerComponent.playerContainer,"ad"),this.muteButton=new _.MuteButtonComponent(this.amby,this.adContainerComponent.playerContainer),this.adComponent=new v.ImaSdkComponent(this.widget,{adSource:e.adSource,requestsLimit:e.requestsLimit,playerDivId:this.adContainerComponent.playerDiv.id,playerDiv:this.adContainerComponent.playerDiv});break;case"vpaid":this.muteButton=new _.MuteButtonComponent(this.amby,this.adContainerComponent.playerContainer),e.adSource||(e.adResponse=this.widget.mgRec.config.vastContent),this.adComponent=new C.VpaidPlayerComponent(this.widget,{adSource:e.adSource,requestsLimit:e.requestsLimit,playerDivId:this.adContainerComponent.playerDiv.id,playerDiv:this.adContainerComponent.playerDiv,desiredBitrate:this.amby.get("formatConfig.bitrate"),vpaidMode:e.vpaidMode,adResponse:e.adResponse,skipoffset:e.skipoffset});break;case"exco":this.adComponent=new T.ExcoComponent(this.widget,{adSource:e.adSource,container:this.adContainerComponent.playerDiv});break;case"aniviewDirect":this.adComponent=new w.AniviewDirectComponent(this.widget,{publisherId:e.publisherId,tagId:e.playerTagId,ref1:e.ref1,container:this.adContainerComponent.playerDiv});break;case"tremor":this.adComponent=new A.TremorComponent(this.widget,{publisherId:e.publisherId,tagId:e.playerTagId,ref1:e.ref1,container:this.adContainerComponent.playerDiv});break;case"connatix":this.amby.dispatch(a.upsertState({ad:{playerEngine:e.engine}})),this.adComponent=new k.CustomEngine(this.widget,{publisherId:e.publisherId,adSource:e.adSource,container:this.adContainerComponent.playerDiv}),this.amby.dispatch(a.upsertAdState({skipoffset:e.skipoffset}))}}else(0,r.mgDebug)("There is no available AD player.")}this.amby.addSubListener(["widget","blurred"],(()=>{this.onAdPlayerBlurred()})),this.amby.addTriggerListener("ad.clicked",(()=>{this.onAdClickedTriggerBase()})),this.amby.addSubListener("ad.status",(()=>{this.onAdStatusChange(),this.onAdStatusBase()})),this.amby.get("closeBtn.enabled")&&(this.amby.addSubListener("ad.init",(()=>{this.amby.get("ad.init")===s.states.INIT_DONE&&(this.closeBtnComponent?this.closeBtnComponent.elem&&this.adContainerComponent.playerContainer.contains(this.closeBtnComponent.elem)||this.closeBtnComponent.createElement():this.closeBtnComponent=new h.CloseButtonComponent(this.amby,this.adContainerComponent.playerDiv))})),this.amby.addTriggerListener("closeBtn.clicked",(()=>{this.amby.get("player.isSticky",!1)&&this.amby.dispatch(a.upsertGlobalState({sticky:!1})),d.Helpers.removeClass(this.adContainerComponent.playerContainer,"noanim"),this.hidePlayer(),this.amby.dispatch(a.setAdVisible(!1)),this.amby.dispatch(a.setTriggerToTrue("ad.actionStop")),this.amby.dispatch(a.setTriggerToTrue("ad.closed"))}))),this.muteButton&&this.amby.addTriggerListener("muteBtn.clicked",(()=>{this.onMuteBtnClicked()})),this.amby.get("formatConfig.smartBackfill",!1)&&(this.amby.addSubListener("ad.rejecting",(()=>{!this.amby.get("ad.startRequested",!1)&&this.amby.get("ad.rejecting")&&this.amby.get("ad.status")===s.states.STATUS_READY&&-1===[s.states.STATUS_PLAYING,s.states.STATUS_PAUSED].indexOf(this.amby.get("ad.status"))&&(this.amby.dispatch(a.upsertState({player:{isPlayingOnVisible:!1},ad:{rejected:!0}})),setTimeout((()=>{this.amby.dispatch(a.setTriggerToTrue("ad.actionStop"))}),500))})),this.smartBackfillComponent=new P.SmartBackfillComponent(this.widget)),this.callStartInit()}onAdStatusChange(){const e=this.amby.get("ad.status");switch((0,r.mgDebug)(`Ads ${e}.${this.amby.get("ad.adTag")?` Ad source: ${this.amby.get("ad.adTag")}`:""}`),e){case s.states.STATUS_READY:this.amby.get("formatConfig.smartBackfill",!1)&&this.amby.get("ad.rejecting")&&(this.amby.dispatch(a.upsertState({player:{isPlayingOnVisible:!1},ad:{rejected:!0}})),setTimeout((()=>{this.amby.dispatch(a.setTriggerToTrue("ad.actionStop"))}),500)),this.amby.get("formatConfig.visibleInit",!1)&&(this.showPlayer(),this.amby.dispatch(a.setAdVisible(!0))),this.observer||(d.Helpers.isIE()?setTimeout((()=>{this.addContainerObserver()}),100):this.addContainerObserver()),"onLoad"===this.autoStart||this.amby.get("ad.reInited")&&this.amby.get("player.isSticky")?(this.amby.dispatch(a.upsertAdState({startRequested:!0})),this.amby.dispatch(a.setTriggerToTrue("ad.actionPlay"))):[I,D].indexOf(this.autoStart)>-1&&this.playOnVisible(),this.sticky&&(this.stickyObserver||(this.stickyObserver=d.Helpers.onVisible(this.adContainerComponent.playerContainer,(e=>{if(e&&!this.amby.get("player.isSticky",!1))this.isOtherWidgetSticky()||(this.wasVisible=!0),[I,D].indexOf(this.autoStart)>-1&&this.amby.get("ad.status")!==s.states.STATUS_PLAYING&&this.amby.get("player.isPlayingOnVisible",!0)&&(this.amby.dispatch(a.upsertAdState({startRequested:!0})),this.amby.dispatch(a.setTriggerToTrue("ad.actionPlay")));else if(this.wasVisible&&(0,d.getInObject)(this.amby.get(),["sticky"],!0)&&!this.amby.get("player.isSticky",!1)&&!this.isOtherWidgetSticky())this.stickPlayer();else if(this.amby.get("player.isSticky",!1)&&this.showed){const e=d.Helpers.getViewTop(),t=d.Helpers.getWindowHeight();e<=this.containerOffsetTop+.5*this.containerHeight&&e+t>=this.containerOffsetTop+1.6*this.containerHeight&&this.unstickPlayer()}this.placementChanged&&(this.placementChanged=!1,this.applyAttachedPlayerSize())}),.6),(0,c.addSubListener)("sticky",(()=>{this.sticky=this.amby.get().sticky}))));break;case s.states.STATUS_PLAYING:this.clickDiv&&(this.clickDiv.style.display="none"),this.amby.dispatch(a.setAdVisible(!0)),this.amby.dispatch(a.upsertState({muteBtn:{visible:!0}})),"outstream"!==this.formatConfig.name||this.showed?this.applyAttachedPlayerSize():this.amby.get("formatConfig.multipleArticles")&&!this.inArticleComponent.isSomeInSight()||this.showPlayer();break;case s.states.STATUS_STOPPED:d.Helpers.removeClass(this.adContainerComponent.playerContainer,"noanim"),"outstream"===this.formatConfig.name&&(this.hidePlayer(),this.amby.dispatch(a.setAdVisible(!1)),this.amby.dispatch(a.upsertState({muteBtn:{visible:!1}}))),this.reInit&&this.createReInitTimeout();break;case s.states.STATUS_ERROR:this.hidePlayer(),this.amby.dispatch(a.setAdVisible(!1)),this.reInit&&this.createReInitTimeout()}}applyAttachedPlayerSize(){const e=d.Helpers.getElemWidth(this.adContainerComponent.playerContainer);this.adHeight=e/this.aspectRatio.width*this.aspectRatio.height,this.containerHeight||(this.containerHeight=this.adHeight),this.showed||this.amby.get("player.isSticky",!1)?this.adContainerComponent.playerContainer.style.height=`${this.adHeight}px`:d.Helpers.isIE()?this.adContainerComponent.playerContainer.style.height="0.01px":this.adContainerComponent.playerContainer.style.height="0px",this.amby.dispatch(a.upsertAdState({resize:!0,size:{width:e,height:this.adHeight}}))}showPlayer(){this.showed=!0,this.shadowDiv&&this.amby.get("player.isSticky",!1)&&(this.shadowDiv.style.display="block"),this.applyAttachedPlayerSize(),this.adContainerComponent.playerDiv.firstChild&&0===this.adContainerComponent.playerDiv.firstChild.clientHeight&&window.dispatchEvent(new Event("resize"))}hidePlayer(){this.showed=!1,this.shadowDiv&&(this.shadowDiv.style.display="none"),this.applyAttachedPlayerSize()}stickPlayer(){this.containerOffsetTop||(this.adContainerComponent.playerContainer.offsetParent?this.containerOffsetTop=this.adContainerComponent.playerContainer.offsetParent.offsetTop+this.adContainerComponent.playerContainer.offsetTop:this.containerOffsetTop=this.adContainerComponent.playerContainer.offsetTop),d.Helpers.addClass(this.adContainerComponent.playerContainer,this.stickyClass),d.Helpers.addClass(this.adContainerComponent.playerContainer,"noanim"),this.shadowDiv?this.shadowDiv.style.display="block":(this.shadowDiv=document.createElement("div"),this.shadowDiv.style.width="100%",this.shadowDiv.style.height=.6*this.adHeight+"px",this.shadowDiv.className=`shadowDiv_${this.amby.get("widgetId")}`,this.adContainerComponent.playerContainer.parentNode.insertBefore(this.shadowDiv,this.adContainerComponent.playerContainer),d.Helpers.onVisible(this.shadowDiv,(e=>{this.shadowDivShown=e,this.shadowDivShown&&this.amby.get("player.isSticky",!1)&&this.unstickPlayer(),this.placementChanged&&(this.placementChanged=!1,this.applyAttachedPlayerSize())}))),this.moveToBody&&this.moveToBodyComponent.attachBody(),this.placementChanged=!0,this.amby.dispatch(a.setPlayerSticky(!0))}unstickPlayer(){d.Helpers.removeClass(this.adContainerComponent.playerContainer,this.stickyClass),this.shadowDiv&&(this.shadowDiv.style.display="none"),this.moveToBody&&this.moveToBodyComponent.detachBody(this.article.nextSibling),this.placementChanged=!0,this.amby.dispatch(a.setPlayerSticky(!1))}addContainerObserver(){this.observer=d.Helpers.onVisible(this.adContainerComponent.playerContainer,(e=>{this.inSight=e,this.amby.dispatch(a.upsertState({player:{inSight:e}})),this.amby.get("formatConfig.multipleArticles",!1)&&[s.states.STATUS_PLAYING,s.states.STATUS_PAUSED,s.states.STATUS_READY].indexOf(this.amby.get("ad.status"))>-1&&(this.inSight?!this.showed&&this.inArticleComponent.isSomeInSight()&&this.showPlayer():this.hidePlayer()),[I,D].indexOf(this.autoStart)>-1&&!this.sticky&&this.playOnVisible(this.amby.get("formatConfig.multipleArticles",!1)?this.showed:void 0)}),this.amby.get("formatConfig.visiblePart"),this.amby.get("formatConfig.hiddenPart"))}onMuteBtnClicked(){(0,r.mgDebug)("Mute Button clicked."),this.amby.get("ad.initMuted",!0)?this.amby.dispatch(a.upsertAdState({initMuted:!1,unmute:!0})):this.amby.dispatch(a.upsertAdState({initMuted:!0,mute:!0}))}}i.AttachedWidgetVideo=E},{"../../redux/actionCreators":58,"../../redux/listener":59,"../../redux/storage":61,"../components/placementComponents/adContainerComponent":14,"../components/placementComponents/inArticleComponent":16,"../components/placementComponents/moveToBodyComponent":17,"../components/placementComponents/widgetComponent":19,"../components/smartBackfillComponent":22,"../components/styleComponent":23,"../controllers/videoSensorComponent":29,"../debug":30,"../helpers":37,"../players/ad/aniViewComponent":40,"../players/ad/aniViewDirectComponent":41,"../players/ad/customEngine":42,"../players/ad/excoComponent":43,"../players/ad/imaSdkComponent":44,"../players/ad/mgAdPlayerComponent":45,"../players/ad/tremorComponent":47,"../players/ad/vpaidPlayerComponent":49,"../players/controls/closeButtonComponent":52,"../players/controls/logoComponent":53,"../players/controls/muteButtonComponent":54,"../players/controls/skipAdButtonComponent":55,"./formatBase":32}],32:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FormatBase=void 0;var s=e("../../redux/storage"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=o(t);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var n=a?Object.getOwnPropertyDescriptor(e,r):null;n&&(n.get||n.set)?Object.defineProperty(s,r,n):s[r]=e[r]}s.default=e,i&&i.set(e,s);return s}(e("../../redux/actionCreators")),r=e("../helpers"),n=e("../debug");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(o=function(e){return e?i:t})(e)}const l="visibleNotPause";i.FormatBase=class{constructor(e){if(this.rootElement=(0,r.getInObject)(e,["mgRec","rootElement"]),this.widgetId=(0,r.getInObject)(e,["mgRec","config","parentCid"],(0,r.getInObject)(e,["mgRec","cid"])),this.siteId=(0,r.getInObject)(e,["mgRec","sid"]),this.mgVideoIndex=`${this.widgetId}_${e.getWidgets().length}`,this.widget=e,this.widget.rootElement=this.rootElement,this.amby=e.amby,this.config=e.mgRec.config,this.formatConfig=e.formatConfig,this.blockMain=this.widget.block.querySelector(".mgbox"),this.aspectRatio=(this.config.aspectratio||"16:9").match(/(\d+):(\d+)/).reduce(((e,t,i)=>(e[["ratio","width","height"][i]]=t,e)),{}),this.aspectRatio.width=parseInt(this.aspectRatio.width,10),this.aspectRatio.height=parseInt(this.aspectRatio.height,10),this.aspectRatio.width>0&&this.aspectRatio.height>0||(this.aspectRatio={ratio:"16:9",width:16,height:9}),this.startScroll=this.formatConfig.startScroll,this.startInit=this.formatConfig.startInit,this.pauseOnFocusOut=this.amby.get("formatConfig.pauseOnFocusOut",!0),this.startScroll){const e=this.startScroll.toString().match(/(\d+)%/);if(e&&e[1]){const{body:t}=document,i=document.documentElement,s=Math.max(t.scrollHeight,t.offsetHeight,i.clientHeight,i.scrollHeight,i.offsetHeight);this.startScrollPixels=Math.floor(s*parseInt(e[1],10)/100),(0,n.mgDebug)(`Site Height: ${s}px, Start sticky on: ${e[1]}% = ${this.startScrollPixels}px`)}else this.startScrollPixels=parseInt(this.startScroll,10)}this.calcStartOnScroll(this.widget.block);const t=parseInt((0,r.getInObject)(this.config,["closeButtonEnable"],(0,r.getInObject)(this.formatConfig,["closeButtonEnable"],1)),10),i=(0,r.getInObject)(e,["mgRec","cappingData","dt"],"desktop");this.amby.dispatch(a.upsertState({playlist:e.mgRec.vr_playlist,player:{aspectratio:this.aspectRatio.ratio,muted:!0,playerId:`mgJwPlayer_${this.mgVideoIndex}`},widgetId:this.widgetId,siteId:this.siteId,mgVideoIndex:this.mgVideoIndex,templateId:this.config.templateId,uuid:this.config.uuid||"",subid:this.config.subid||0,cappingData:e.mgRec.cappingData,paramsData:e.mgRec.paramsData,subnetDomain:e.mgRec.subnetDomain,countersDomain:e.mgRec.countersDomain,libConfig:e.libConfig,muteBtn:{muted:!0},closeBtn:{enabled:t},adSchedule:this.config.adSchedule,adPlayers:this.config.adPlayers,extLibraries:this.config.extLibraries,cappingInterval:parseInt(this.config.cappingInterval,10)||15,passback:this.config.passback,sensorCid:e.mgRec.cid,lang:this.config.lang,language:e.mgRec.lang,libVer:e.mgRec.lib,ga_id:this.config.ga_id,visibilityKpi:this.config.visibilityKpi,downtimeDetector:this.config.downtimeDetector,downtimeTimeout:this.config.downtimeTimeout,startAdTimeout:this.config.startAdTimeout,autoStart:this.config.autoStart||l,isVital:this.config.isVital,deviceType:i,animatedArticle:this.config.animatedArticle})),r.Helpers.initClientHintData()}playOnVisible(e=!0){this.amby.get("ad.status")&&(this.inSight&&e?this.amby.get("player.isPlayingOnVisible",!0)&&!this.focusPaused&&(this.amby.dispatch(a.upsertAdState({startRequested:!0})),this.amby.dispatch(a.setTriggerToTrue("ad.actionPlay"))):"visibleOnly"===this.amby.get("autoStart")&&this.amby.dispatch(a.setTriggerToTrue("ad.actionPause")))}startOnScroll(e){!this.startedByScroll&&this.startScrollPixels&&r.Helpers.getViewTop()>this.startScrollPixels&&!this.isOtherWidgetSticky()&&((0,n.mgDebug)(`Current Scroll: ${r.Helpers.getViewTop()}px, Starting sticky on: ${this.startScrollPixels}px`),this.startedByScroll=!0,e())}onWidgetBlurred(){this.pauseOnFocusOut&&(this.amby.get("widget.blurred",!1)?this.amby.get("player.isAdPlaying",!1)&&this.amby.get("ad.status")===s.states.STATUS_PLAYING&&this.amby.get("autoStart")!==l?((0,n.mgDebug)("adPlayer focused OUT. BASE"),this.focusPaused=!0,this.amby.dispatch(a.setTriggerToTrue("ad.actionPause"))):this.amby.get("player.status")===s.states.STATUS_PLAYING&&((0,n.mgDebug)("Player focused OUT. BASE"),this.focusPaused=!0,this.amby.dispatch(a.setTriggerToTrue("player.actionPause"))):this.focusPaused?(this.focusPaused=!1,this.amby.get("player.isAdPlaying",!1)?((0,n.mgDebug)("adPlayer focused IN. BASE"),this.amby.dispatch(a.setTriggerToTrue("ad.actionPlay"))):((0,n.mgDebug)("Player focused IN. BASE"),this.amby.dispatch(a.setTriggerToTrue("player.actionPlay"))),this.justFocusedIn=!0,setTimeout((()=>{this.justFocusedIn=!1}),200)):this.amby.get("autoStart")===l&&(this.focusPaused=!1,this.amby.get("player.isAdPlaying",!1)&&this.amby.get("ad.status")===s.states.STATUS_PAUSED?((0,n.mgDebug)("adPlayer focused IN. BASE"),this.amby.dispatch(a.setTriggerToTrue("ad.actionPlay"))):this.amby.get("player.status")===s.states.STATUS_PAUSED&&((0,n.mgDebug)("Player focused IN. BASE"),this.amby.dispatch(a.setTriggerToTrue("player.actionPlay")))))}onAdPlayerBlurred(){this.pauseOnFocusOut&&(this.amby.get("widget.blurred",!1)&&this.amby.get("ad.status")===s.states.STATUS_PLAYING&&this.amby.get("autoStart")!==l?((0,n.mgDebug)("adPlayer focused OUT. BASE"),this.focusPaused=!0,this.amby.dispatch(a.setTriggerToTrue("ad.actionPause"))):(this.focusPaused||this.amby.get("autoStart")===l&&this.amby.get("ad.status")===s.states.STATUS_PAUSED)&&((0,n.mgDebug)("adPlayer focused IN. BASE"),this.focusPaused=!1,this.amby.dispatch(a.setTriggerToTrue("ad.actionPlay")),this.justFocusedIn=!0,setTimeout((()=>{this.justFocusedIn=!1}),200)))}onPlayerStatusBase(){if(!this.pauseOnFocusOut)return;const e=this.amby.get("player.status");this.justFocusedIn&&e!==s.states.STATUS_PLAYING&&this.focusPaused&&((0,n.mgDebug)("Player paused after focusing IN :-( . Base"),this.amby.dispatch(a.setTriggerToTrue("player.actionPlay")),this.focusPaused=!1,this.justFocusedIn=!1),this.amby.get("widget.blurred")&&e===s.states.STATUS_PLAYING&&((0,n.mgDebug)("Player tried to play when window not in focus :-( . Base"),this.focusPaused=!0,this.amby.dispatch(a.setTriggerToTrue("player.actionPause")))}onAdStatusBase(){if(!this.pauseOnFocusOut)return;const e=this.amby.get("ad.status");this.justFocusedIn&&e!==s.states.STATUS_PLAYING&&(this.focusPaused||this.amby.get("autoStart")===l&&this.amby.get("ad.status")===s.states.STATUS_PAUSED)&&((0,n.mgDebug)("adPlayer paused after focusing IN :-( . Base"),this.amby.dispatch(a.setTriggerToTrue("ad.actionPlay")),this.focusPaused=!1,this.justFocusedIn=!1),this.amby.get("widget.blurred")&&e===s.states.STATUS_PLAYING&&this.amby.get("autoStart")!==l&&((0,n.mgDebug)("adPlayer tried to play when window not in focus :-( . Base"),this.focusPaused=!0,this.amby.dispatch(a.setTriggerToTrue("ad.actionPause")))}onAdClickedTriggerBase(){this.pauseOnFocusOut&&setTimeout((()=>{(0,n.mgDebug)("adPlayer played after opening new tab with AD :-( . Base"),this.amby.dispatch(a.setTriggerToTrue("ad.actionPause"))}),200)}startInitOnVisible(){!this.startInitSent&&this.inSight&&(this.startInitSent=!0,this.amby.dispatch(a.setAdInit(s.states.INIT_NEEDED)))}startInitOnScroll(){!this.startInitSent&&r.Helpers.getViewTop()+r.Helpers.getWindowHeight()/2>this.startOnScrollPixels&&(this.startInitSent=!0,(0,n.mgDebug)(`Current Scroll: ${r.Helpers.getViewTop()}px, Starting code on: ${this.startOnScrollPixels}px`),this.amby.dispatch(a.setAdInit(s.states.INIT_NEEDED)))}calcStartOnScroll(e){if(this.formatConfig.startOnScroll){const t=e.getBoundingClientRect().top+r.Helpers.getViewTop(),i=this.startOnScrollPixels;this.startOnScrollPixels=Math.floor(.51*t),this.startOnScrollPixels!==i&&(0,n.mgDebug)(`Player Top: ${t}px, Start searching for ad on: 51% = ${this.startOnScrollPixels}px`)}}callStartInit(){this.startInit&&"onLoad"!==this.startInit?(r.Helpers.onVisible(this.adContainerComponent.playerContainer,(e=>{this.inSight=e,this.startInitOnVisible()})),this.startInitOnVisible()):this.formatConfig.startOnScroll?(window.addEventListener("scroll",(()=>{this.calcStartOnScroll(this.adContainerComponent.playerContainer),this.startInitOnScroll()})),this.startInitOnScroll()):this.amby.dispatch(a.setAdInit(s.states.INIT_NEEDED))}isOtherWidgetSticky(){return Object.entries(this.amby.get()).reduce(((e,[t,i])=>e||(0,r.getInObject)(i,["player","isSticky"])&&t!==this.amby.getNS()),!1)&&(0,r.getInObject)(this.amby.get(),["sticky"],!0)}createReInitTimeout(){this.reinitTimeout&&(clearTimeout(this.reinitTimeout),this.reinitTimeout=null),this.reinitTimeout=setTimeout((()=>{(0,n.mgDebug)("ReinitTimeout"),this.amby.dispatch(a.upsertAdState({reInited:!0})),this.amby.dispatch(a.upsertPlayerState({isPlayingOnVisible:!0})),this.amby.dispatch(a.setAdInit(s.states.INIT_STOP)),this.amby.dispatch(a.setAdInit(s.states.INIT_RESET))}),this.reInit?1e3*this.reInit:5e3)}}},{"../../redux/actionCreators":58,"../../redux/storage":61,"../debug":30,"../helpers":37}],33:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.NativeBase=void 0;var s=e("../../redux/storage"),a=e("../helpers"),r=e("./performance"),n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=l(t);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var n=a?Object.getOwnPropertyDescriptor(e,r):null;n&&(n.get||n.set)?Object.defineProperty(s,r,n):s[r]=e[r]}s.default=e,i&&i.set(e,s);return s}(e("../../redux/actionCreators")),o=e("../controllers/videoSensorComponent");function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(l=function(e){return e?i:t})(e)}i.NativeBase=class{static init(e,t){const i=(0,a.getInObject)(e,["mgRec","config","formats"]);let l=(0,a.getInObject)(e,["mgRec","cappingData","dt"],"desktop");if("tablet"===l&&(l="mobile"),Array.isArray(i))for(let d=0;d<i.length;d++)if(i[d].device===l&&"native"===i[d].name&&(!i[d].test||a.Helpers.getUrlParam(i[d].test)||a.Helpers.getCookie(i[d].test))){const l=(0,a.getInObject)(e,["mgRec","config","parentCid"],(0,a.getInObject)(e,["mgRec","cid"])),h=(0,a.getInObject)(e,["mgRec","config","isVital"],!0),p=(0,s.createAmby)(`video_${l}_${t}`);p.dispatch(n.setFormatConfig(i[d])),e.amby=p,e.formatConfig=i[d],(!0===i[d].performance||!0===i[d].sticky&&!i[d].embedded)&&(this.videoSensorComponent=new o.VideoSensorComponent(e),a.Helpers.vitalCall((()=>{e.performance=new r.PerformanceBase(e,this.videoSensorComponent)}),h));break}}}},{"../../redux/actionCreators":58,"../../redux/storage":61,"../controllers/videoSensorComponent":29,"../helpers":37,"./performance":36}],34:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Outstream=void 0;var s=e("../../redux/storage"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=k(t);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var n=a?Object.getOwnPropertyDescriptor(e,r):null;n&&(n.get||n.set)?Object.defineProperty(s,r,n):s[r]=e[r]}s.default=e,i&&i.set(e,s);return s}(e("../../redux/actionCreators")),r=e("../players/ad/aniViewComponent"),n=e("../components/placementComponents/widgetComponent"),o=e("../helpers"),l=e("./formatBase"),d=e("../debug"),h=e("../components/placementComponents/adContainerComponent"),p=e("../players/controls/closeButtonComponent"),m=e("../controllers/videoSensorComponent"),c=e("../components/placementComponents/moveToBodyComponent"),g=e("../../redux/listener"),u=e("../components/styleComponent"),y=e("../players/controls/logoComponent"),b=e("../players/ad/mgAdPlayerComponent"),f=e("../players/ad/imaSdkComponent"),v=e("../players/controls/skipAdButtonComponent"),S=e("../players/controls/muteButtonComponent"),_=e("../players/ad/vpaidPlayerComponent"),C=e("../players/ad/excoComponent"),T=e("../players/ad/aniViewDirectComponent"),w=e("../components/smartBackfillComponent"),P=e("../players/ad/tremorComponent"),A=e("../players/ad/customEngine");function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(k=function(e){return e?i:t})(e)}const x="visibleNotPause",D="visibleOnly";class I extends l.FormatBase{constructor(e){super(e),this.videoSensorComponent=new m.VideoSensorComponent(e),this.styleComponent=new u.StyleComponent(this.widget),this.styleComponent.styleChecking((()=>{this.onStyleLoad()}))}onStyleLoad(){this.amby.get("visibilityKpi")&&this.amby.dispatch(a.upsertState({widget:{renderTime:Date.now()}})),this.autoStart=this.amby.get("autoStart"),this.slider=this.amby.get("formatConfig.slider",!1),this.sticky=this.amby.get("formatConfig.sticky",!1),this.sliderSize=this.amby.get("formatConfig.sliderSize","m").toLowerCase(),this.sliderAlign=this.amby.get("formatConfig.sliderAlign","right").toLowerCase(),this.reInit=parseInt(this.amby.get("formatConfig.reInit"),10),this.widgetComponent=new n.WidgetComponent(this.widget,(()=>{this.onTeasersLoaded()}))}onTeasersLoaded(){this.amby.get("widget.allImagesLoaded",!1)?this.deferredInitPlayer():this.amby.addSubListener(["widget","allImagesLoaded"],(()=>{this.amby.get("widget.allImagesLoaded")&&this.deferredInitPlayer()}))}deferredInitPlayer(){("number"!=typeof this.formatConfig.startDelay||this.slider&&this.startScroll)&&(this.formatConfig.startDelay=0),setTimeout((()=>{this.initPlayer()}),1e3*this.formatConfig.startDelay)}initPlayer(){if(this.formatConfig.targetElemSelector&&(this.targetedElem=document.querySelector(this.formatConfig.targetElemSelector)||this.rootElement.querySelector(this.formatConfig.targetElemSelector)),this.blockMain=this.widget.block.querySelector(".mgbox"),this.blockMain||(this.blockMain=this.widget.block,this.blockMain.style.position="relative"),this.targetedElem&&!this.targetedElem.isEqualNode(this.blockMain)?this.adContainerComponent=new h.AdContainerComponent(this.amby,document.body):this.adContainerComponent=new h.AdContainerComponent(this.amby,this.blockMain),this.calcStartOnScroll(this.adContainerComponent.playerContainer),this.amby.addTriggerListener("widget.newBox",(()=>{this.blockMain=this.widget.block.querySelector(".mgbox"),this.blockMain||(this.blockMain=this.widget.block,this.blockMain.style.position="relative"),(0,d.mgDebug)("New box found."),(0,d.mgDebug)(this.blockMain),this.adContainerComponent.appendPlayerContainer(this.blockMain),this.observer&&this.observer.disconnect(),this.observer=o.Helpers.onVisible(this.adContainerComponent.playerContainer,(e=>{this.onContainerVisible(e)}),this.amby.get("formatConfig.visiblePart",.9),this.amby.get("formatConfig.hiddenPart",.5)),this.calcStartOnScroll(this.adContainerComponent.playerContainer),setTimeout((()=>{this.placementChanged=!0,this.updatePosition()}),50)})),this.moveToBodyComponent=new c.MoveToBodyComponent(this.widgetId,this.adContainerComponent.playerContainer),this.sticky||this.slider){switch(this.amby.get("formatConfig.sliderSize","m").toLowerCase()){case"s":this.stickyClass="small ";break;case"m":this.stickyClass="medium ";break;case"l":this.stickyClass="large "}this.stickyClass+=this.amby.get("formatConfig.sliderAlign","right"),this.adContainerComponent.playerContainer.addEventListener("animationend",(()=>{this.updatePosition()})),this.adContainerComponent.playerContainer.addEventListener("transitionend",(()=>{this.updatePosition()}))}if(this.slider&&(this.stickPlayer(),this.amby.get("formatConfig.moveToBody",!1)&&this.moveToBodyComponent.attachBody(),this.amby.get("formatConfig.logo",!1)&&(this.logoComponent=new y.LogoComponent(this.amby,this.adContainerComponent.playerContainer,!1))),this.sticky&&this.amby.get("formatConfig.logo",!1)&&(this.logoComponent=new y.LogoComponent(this.amby,this.adContainerComponent.playerContainer)),this.updatePosition(),window.addEventListener("resize",(()=>{this.updatePosition()})),this.amby.get("formatConfig.focusSound",!1)&&(this.amby.dispatch(a.upsertAdState({isUnmuteOnHover:!0})),this.adContainerComponent.playerDiv.addEventListener("mouseenter",(()=>{this.amby.dispatch(a.upsertAdState({mouseOver:!0}))})),this.adContainerComponent.playerDiv.addEventListener("mouseleave",(()=>{this.amby.dispatch(a.upsertAdState({mouseOver:!1}))}))),Array.isArray(this.config.adPlayers)){let e=null;if(this.config.adPlayers.forEach((t=>{e||"object"!=typeof t||(e=t)})),e.mobileChannelId||e.desktopChannelId||"aniview"!==e.engine||(e=null),e){const t=o.Helpers.getUrlParam("mgwcampaign");switch(t&&(t.match(/pubads\.g/)&&(e.engine="ima"),e.adSource=t),this.amby.dispatch(a.upsertState({ad:{playerEngine:e.engine}})),this.amby.dispatch(a.upsertState({ad:{enableCTA:e.enableCTA??!1}})),e.engine){case"aniview":this.adComponent=new r.AniViewComponent(this.widget,{publisherId:e.publisherId,channelId:"mobile"===this.amby.get("deviceType")?e.mobileChannelId:e.desktopChannelId,playerContainerId:this.adContainerComponent.playerContainer.id,playerDivId:this.adContainerComponent.playerDiv.id,vastRetry:e.vastRetry,errorLimit:e.errorLimit,maxrun:e.maxrun,logLevel:e.logLevel,timeout:parseInt(e.timeout,10),nextAdTimeout:parseInt(e.nextAdTimeout,10),ref1:e.ref1,soundButton:e.soundbutton,pauseButton:e.pausebutton,timeLine:e.timeline,aniviewParams:e.aniviewParams,waterfall:e.waterfall,noCompleteTimeout:e.noCompleteTimeout,skipoffset:e.skipoffset,verifiedSources:e.verifiedSources,initSize:e.initSize});break;case"mgAdPlayer":this.adComponent=new b.MgAdPlayerComponent(this.widget,{container:this.adContainerComponent.playerDiv,mgsetup:e.mgsetup,quality:e.quality,adPlaylist:e.adPlaylist});break;case"ima":this.skipButton=new v.SkipAdButtonComponent(this.amby,this.adContainerComponent.playerContainer,"ad"),this.muteButton=new S.MuteButtonComponent(this.amby,this.adContainerComponent.playerContainer),this.adComponent=new f.ImaSdkComponent(this.widget,{adSource:e.adSource,requestsLimit:e.requestsLimit,playerDivId:this.adContainerComponent.playerDiv.id});break;case"vpaid":this.muteButton=new S.MuteButtonComponent(this.amby,this.adContainerComponent.playerContainer),e.adSource||(e.adResponse=this.widget.mgRec.config.vastContent),this.adComponent=new _.VpaidPlayerComponent(this.widget,{adSource:e.adSource,requestsLimit:e.requestsLimit,playerDivId:this.adContainerComponent.playerDiv.id,playerDiv:this.adContainerComponent.playerDiv,desiredBitrate:this.amby.get("formatConfig.bitrate"),vpaidMode:e.vpaidMode,adResponse:e.adResponse,skipoffset:e.skipoffset});break;case"exco":this.adComponent=new C.ExcoComponent(this.widget,{adSource:e.adSource,container:this.adContainerComponent.playerDiv});break;case"aniviewDirect":this.adComponent=new T.AniviewDirectComponent(this.widget,{publisherId:e.publisherId,tagId:e.playerTagId,ref1:e.ref1,container:this.adContainerComponent.playerDiv});break;case"tremor":this.adComponent=new P.TremorComponent(this.widget,{publisherId:e.publisherId,tagId:e.playerTagId,ref1:e.ref1,container:this.adContainerComponent.playerDiv});break;case"connatix":this.amby.dispatch(a.upsertState({ad:{playerEngine:e.engine}})),this.adComponent=new A.CustomEngine(this.widget,{publisherId:e.publisherId,adSource:e.adSource,container:this.adContainerComponent.playerDiv}),this.amby.dispatch(a.upsertAdState({skipoffset:e.skipoffset}))}this.amby.dispatch(a.upsertAdState({skipoffset:e.skipoffset}))}else(0,d.mgDebug)("There is no available AD player.")}this.amby.addSubListener(["widget","blurred"],(()=>{this.onAdPlayerBlurred()})),this.amby.addTriggerListener("ad.clicked",(()=>{this.onAdClickedTriggerBase()})),this.amby.addSubListener("ad.status",(()=>{this.amby.get("ad.status")===s.states.STATUS_PLAYING?(this.onAdStatusChange(),this.onAdStatusBase()):o.Helpers.vitalCall((()=>{this.onAdStatusChange(),this.onAdStatusBase()}),this.amby.get("isVital",!0))})),this.amby.get("closeBtn.enabled")&&(this.amby.addSubListener("ad.init",(()=>{this.amby.get("ad.init")===s.states.INIT_DONE&&(this.closeBtnComponent?this.closeBtnComponent.elem&&this.adContainerComponent.playerContainer.contains(this.closeBtnComponent.elem)||this.closeBtnComponent.createElement():this.closeBtnComponent=new p.CloseButtonComponent(this.amby,this.adContainerComponent.playerDiv))})),this.amby.addTriggerListener(["closeBtn","clicked"],(()=>{this.amby.get("player.isSticky",!1)&&this.amby.dispatch(a.upsertGlobalState({sticky:!1})),this.amby.dispatch(a.setAdVisible(!1)),this.amby.dispatch(a.setTriggerToTrue("ad.actionStop")),this.amby.dispatch(a.setTriggerToTrue("ad.closed"))}))),this.muteButton&&this.amby.addTriggerListener("muteBtn.clicked",(()=>{this.onMuteBtnClicked()})),this.amby.get("formatConfig.smartBackfill",!1)&&(this.amby.addSubListener("ad.rejecting",(()=>{!this.amby.get("ad.startRequested",!1)&&this.amby.get("ad.rejecting")&&this.amby.get("ad.status")===s.states.STATUS_READY&&-1===[s.states.STATUS_PLAYING,s.states.STATUS_PAUSED].indexOf(this.amby.get("ad.status"))&&(this.amby.dispatch(a.upsertState({player:{isPlayingOnVisible:!1},ad:{rejected:!0}})),setTimeout((()=>{this.amby.dispatch(a.setTriggerToTrue("ad.actionStop"))}),500))})),this.smartBackfillComponent=new w.SmartBackfillComponent(this.widget)),this.formatConfig.targetElemSelector&&setInterval((()=>{this.updatePosition()}),500),this.amby.dispatch(a.setAdVisible(!1)),this.callStartInit()}onAdStatusChange(){const e=this.amby.get("ad.status");switch((0,d.mgDebug)(`Ads ${e}.${this.amby.get("ad.adTag")?` Ad source: ${this.amby.get("ad.adTag")}`:""}`),e){case s.states.STATUS_READY:this.amby.get("formatConfig.smartBackfill",!1)&&this.amby.get("ad.rejecting")&&(this.amby.dispatch(a.upsertState({player:{isPlayingOnVisible:!1},ad:{rejected:!0}})),setTimeout((()=>{this.amby.dispatch(a.setTriggerToTrue("ad.actionStop"))}),500)),this.amby.get("formatConfig.visibleInit",!1)&&o.Helpers.vitalCall((()=>this.amby.dispatch(a.setAdVisible(!0))),this.amby.get("isVital",!0)),this.observer||(this.observer=o.Helpers.onVisible(this.adContainerComponent.playerContainer,(e=>{this.onContainerVisible(e)}),this.amby.get("formatConfig.visiblePart",.9),this.amby.get("formatConfig.hiddenPart",.5)),this.sticky&&(0,g.addSubListener)("sticky",(()=>{this.sticky=this.amby.get().sticky}))),o.Helpers.vitalCall((()=>this.initActionPlay()),this.amby.get("isVital",!0)),o.Helpers.vitalCall((()=>this.updatePosition()),this.amby.get("isVital",!0));break;case s.states.STATUS_PLAYING:this.amby.dispatch(a.setAdVisible(!0)),this.amby.dispatch(a.upsertState({muteBtn:{visible:!0}})),this.updatePosition(),this.amby.get("formatConfig.playFunc")&&o.Helpers.createScriptAndRun(`PlayFunc_${this.mgVideoIndex}`,this.amby.get("formatConfig.playFunc"));break;case s.states.STATUS_STOPPED:this.amby.dispatch(a.setAdVisible(!1)),this.amby.dispatch(a.upsertState({muteBtn:{visible:!1}})),this.reInit&&this.createReInitTimeout(),this.amby.get("formatConfig.stopFunc")&&o.Helpers.createScriptAndRun(`StopFunc_${this.mgVideoIndex}`,this.amby.get("formatConfig.stopFunc"));break;case s.states.STATUS_ERROR:this.amby.dispatch(a.setAdVisible(!1)),this.reInit&&this.createReInitTimeout(),this.amby.get("formatConfig.stopFunc")&&o.Helpers.createScriptAndRun(`StopFunc_${this.mgVideoIndex}`,this.amby.get("formatConfig.stopFunc"))}}initActionPlay(){this.slider&&this.startScroll&&!(0,o.getInObject)(this.amby.get(),["initedStartScroll"],!1)?(this.amby.dispatch(a.upsertGlobalState({initedStartScroll:!0})),window.addEventListener("scroll",(()=>{this.startOnScroll((()=>{this.amby.dispatch(a.upsertAdState({startRequested:!0})),this.amby.dispatch(a.setTriggerToTrue("ad.actionPlay"))}))})),this.startOnScroll((()=>{this.amby.dispatch(a.upsertAdState({startRequested:!0})),this.amby.dispatch(a.setTriggerToTrue("ad.actionPlay"))}))):[D,x].indexOf(this.autoStart)>-1&&!this.slider?this.playOnVisible():(this.amby.dispatch(a.upsertAdState({startRequested:!0})),this.amby.dispatch(a.setTriggerToTrue("ad.actionPlay"))),this.amby.get("ad.reInited")&&this.amby.get("player.isSticky")&&(this.amby.dispatch(a.upsertAdState({startRequested:!0})),this.amby.dispatch(a.setTriggerToTrue("ad.actionPlay")))}updatePosition(){if(this.slider||this.sticky&&this.amby.get("player.isSticky",!1)){const e=o.Helpers.getElemWidth(this.adContainerComponent.playerContainer);this.pos={top:null,left:null,width:e,height:e/this.aspectRatio.width*this.aspectRatio.height,pWidth:e,pHeight:e/this.aspectRatio.width*this.aspectRatio.height}}else{document.body.contains(this.blockMain)||(this.blockMain=this.widget.block.querySelector(".mgbox")||this.widget.block);try{this.pos=o.Helpers.getPlayerPos(this.targetedElem&&!this.targetedElem.isEqualNode(this.blockMain)?this.targetedElem:this.blockMain,parseInt(this.formatConfig.teaserIndex,10)||0,parseInt(this.formatConfig.teaserSize,10)||1,parseInt(this.formatConfig.teaserHeight,10)||1,this.formatConfig.teaserStick,this.aspectRatio,this.formatConfig.targetElemSelector,"mobile"===this.amby.get("deviceType"),this.rootElement)}catch(e){return void setTimeout((()=>{this.updatePosition(),this.pos&&this.amby.dispatch(a.upsertAdState({size:{width:this.pos.pWidth,height:this.pos.pHeight}}))}),10)}}(!this.previousPos||!o.Helpers.isEqual(this.previousPos,this.pos)||this.placementChanged)&&this.pos.width>0&&(this.placementChanged=!1,this.previousPos=this.pos,this.adContainerComponent.applyPlayerSize(this.pos,this.slider||this.sticky&&this.amby.get("player.isSticky",!1)),this.amby.dispatch(a.upsertAdState({resize:!0,size:{width:this.pos.pWidth,height:this.pos.pHeight}})))}stickPlayer(){this.containerOffsetTop||(this.adContainerComponent.playerContainer.offsetParent?this.containerOffsetTop=this.adContainerComponent.playerContainer.offsetParent.offsetTop+this.adContainerComponent.playerContainer.offsetTop:this.containerOffsetTop=this.adContainerComponent.playerContainer.offsetTop),o.Helpers.addClass(this.adContainerComponent.playerContainer,this.stickyClass),o.Helpers.addClass(this.adContainerComponent.playerContainer,"noanim"),this.slider||(this.shadowDiv?this.shadowDiv.style.display="block":(this.shadowDiv=document.createElement("div"),this.shadowDiv.style.width=`${this.pos.width}px`,this.shadowDiv.style.height=.9*this.pos.height+"px",this.shadowDiv.style.top=`${this.pos.top}px`,this.shadowDiv.style.left=`${this.pos.left}px`,this.shadowDiv.style.position="absolute",this.shadowDiv.className=`shadowDiv_${this.amby.get("widgetId")}`,this.adContainerComponent.playerContainer.parentNode.insertBefore(this.shadowDiv,this.adContainerComponent.playerContainer),o.Helpers.onVisible(this.shadowDiv,(e=>{e&&this.amby.get("player.isSticky",!1)&&this.unstickPlayer()}),1,0))),this.amby.get("formatConfig.moveToBody",!1)&&this.moveToBodyComponent.attachBody(),this.amby.dispatch(a.setPlayerSticky(!0)),this.placementChanged=!0,this.updatePosition()}unstickPlayer(){o.Helpers.removeClass(this.adContainerComponent.playerContainer,this.stickyClass),this.shadowDiv&&(this.shadowDiv.style.display="none"),this.amby.get("formatConfig.moveToBody",!1)&&this.moveToBodyComponent.detachBody(this.article.nextSibling),this.amby.dispatch(a.setPlayerSticky(!1)),this.placementChanged=!0,this.updatePosition()}onMuteBtnClicked(){(0,d.mgDebug)("Mute Button clicked."),this.amby.get("ad.initMuted",!0)?this.amby.dispatch(a.upsertAdState({initMuted:!1,unmute:!0})):this.amby.dispatch(a.upsertAdState({initMuted:!0,mute:!0}))}onContainerVisible(e){if(this.inSight=e,this.sticky){if(e&&!this.amby.get("player.isSticky",!1))this.isOtherWidgetSticky()||(this.wasVisible=!0),[D,x].indexOf(this.autoStart)>-1&&this.amby.get("ad.status")!==s.states.STATUS_PLAYING&&this.amby.get("player.isPlayingOnVisible",!0)&&(this.amby.dispatch(a.upsertAdState({startRequested:!0})),this.amby.dispatch(a.setTriggerToTrue("ad.actionPlay")));else if(this.wasVisible&&(0,o.getInObject)(this.amby.get(),["sticky"],!0)&&!this.amby.get("player.isSticky",!1)&&!this.isOtherWidgetSticky())this.stickPlayer();else if(this.amby.get("player.isSticky",!1)){const e=o.Helpers.getViewTop(),t=o.Helpers.getWindowHeight();e<=this.containerOffsetTop+.5*this.containerHeight&&e+t>=this.containerOffsetTop+1.6*this.containerHeight&&this.unstickPlayer()}this.updatePosition()}else[D,x].indexOf(this.autoStart)>-1&&!this.slider&&this.playOnVisible()}}i.Outstream=I},{"../../redux/actionCreators":58,"../../redux/listener":59,"../../redux/storage":61,"../components/placementComponents/adContainerComponent":14,"../components/placementComponents/moveToBodyComponent":17,"../components/placementComponents/widgetComponent":19,"../components/smartBackfillComponent":22,"../components/styleComponent":23,"../controllers/videoSensorComponent":29,"../debug":30,"../helpers":37,"../players/ad/aniViewComponent":40,"../players/ad/aniViewDirectComponent":41,"../players/ad/customEngine":42,"../players/ad/excoComponent":43,"../players/ad/imaSdkComponent":44,"../players/ad/mgAdPlayerComponent":45,"../players/ad/tremorComponent":47,"../players/ad/vpaidPlayerComponent":49,"../players/controls/closeButtonComponent":52,"../players/controls/logoComponent":53,"../players/controls/muteButtonComponent":54,"../players/controls/skipAdButtonComponent":55,"./formatBase":32}],35:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.OutstreamBase=void 0;var s=e("../../redux/storage"),a=e("../helpers"),r=e("../debug"),n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=d(t);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var n=a?Object.getOwnPropertyDescriptor(e,r):null;n&&(n.get||n.set)?Object.defineProperty(s,r,n):s[r]=e[r]}s.default=e,i&&i.set(e,s);return s}(e("../../redux/actionCreators")),o=e("./outstream"),l=e("./attachedWidget");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(d=function(e){return e?i:t})(e)}i.OutstreamBase=class{static init(e,t){const i=(0,a.getInObject)(e,["mgRec","config","enabled"]);if(!i||"0"===i)return void(0,r.mgDebug)("Widget disabled.");const d=(0,a.getInObject)(e,["mgRec","config","formats"]);let h=(0,a.getInObject)(e,["mgRec","cappingData","dt"],"desktop");if("tablet"===h&&(h="mobile"),Array.isArray(d))for(let i=0;i<d.length;i++)if(d[i].device===h&&["outstream","attachedWidget"].indexOf(d[i].name)>-1&&(!d[i].test||a.Helpers.getUrlParam(d[i].test)||a.Helpers.getCookie(d[i].test))){const h=(0,a.getInObject)(e,["mgRec","config","parentCid"],(0,a.getInObject)(e,["mgRec","cid"])),p=(0,s.createAmby)(`video_${h}_${t}`);p.dispatch(n.setFormatConfig(d[i])),e.amby=p,e.formatConfig=d[i],"outstream"!==d[i].name||"over"!==d[i].adsPlace&&void 0!==d[i].adsPlace&&!d[i].slider?("attachedWidget"===d[i].name||"outstream"===d[i].name&&(["above","below"].indexOf(d[i].adsPlace)>-1||d[i].inArticle))&&((0,r.mgDebug)("Initialising AttachedWidgetVideo module"),e.attachedWidget=new l.AttachedWidgetVideo(e)):((0,r.mgDebug)("Initialising Outstream module"),e.outstream=new o.Outstream(e));break}}}},{"../../redux/actionCreators":58,"../../redux/storage":61,"../debug":30,"../helpers":37,"./attachedWidget":31,"./outstream":34}],36:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PerformanceBase=void 0;var s=e("../../redux/storage"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=S(t);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var n=a?Object.getOwnPropertyDescriptor(e,r):null;n&&(n.get||n.set)?Object.defineProperty(s,r,n):s[r]=e[r]}s.default=e,i&&i.set(e,s);return s}(e("../../redux/actionCreators")),r=e("../helpers"),n=e("../controllers/adPlayerComponent"),o=e("../players/content/contentPlayerComponent"),l=e("../components/placementComponents/widgetComponent"),d=e("../components/playlistComponent"),h=e("../players/controls/muteButtonComponent"),p=e("./formatBase"),m=e("../debug"),c=e("../players/controls/closeButtonComponent"),g=e("../../redux/listener"),u=e("../components/placementComponents/moveToBodyComponent"),y=e("../components/styleComponent"),b=e("../players/controls/logoComponent"),f=e("../components/placementComponents/inArticleComponent"),v=e("../components/placementComponents/animatedArticleComponent");function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(S=function(e){return e?i:t})(e)}const _="visibleNotPause",C="visibleOnly";class T extends p.FormatBase{constructor(e,t){(0,m.mgDebug)("PerformanceBase constructor"),super(e),this.addIndexes(this.widget.block.children),this.videoSensorComponent=t,this.getVideoTeaserIndex((()=>{this.onTeasersLoaded()}))}onTeasersLoaded(){this.addPlayerBlock(),(0,m.mgDebug)(this.playerContainerDiv),this.config.adSchedule&&(setTimeout((()=>{this.adPlayerComponent=new n.AdPlayerComponent(this.widget,this.playerContainerDiv)}),0),setTimeout((()=>{this.adPlayerComponent.schedule.pre&&this.amby.dispatch(a.setAdEnabled(!0))}),0)),r.Helpers.vitalCall((()=>{this.styleComponent=new y.StyleComponent(this.widget),this.styleComponent.styleChecking((()=>{this.onStyleLoad()}))}),this.amby.get("isVital",!0))}onStyleLoad(){this.amby.get("visibilityKpi")&&this.amby.dispatch(a.upsertState({widget:{renderTime:Date.now()}})),this.sticky=!!(0,r.getInObject)(this.amby.get(),["sticky"],!0)&&!!this.amby.get("formatConfig.sticky",!1),this.stickyAd=!!(0,r.getInObject)(this.amby.get(),["stickyAd"],!0)&&!!this.amby.get("formatConfig.stickyAd",!1),this.stickyMode=this.formatConfig.stickyMode||"visibleOnly",this.wasVisible=!1,this.showControlBar=!!this.formatConfig.controlbar||!0,this.moveToBody=this.formatConfig.moveToBody||!1,this.playerContentStart=this.amby.get("adSchedule").reduce(((e,t)=>"pre"===t.offset||e),!1),this.playerContentStart&&(r.Helpers.addClass(this.widget.block,"ctplay"),this.amby.dispatch(a.upsertPlayerState({isPlayingOnVisible:!1})));const e=this.amby.get("formatConfig.mgsetup.theme");e&&"mgred"!==e||r.Helpers.addClass(this.widget.block,"mgred"),this.playlist=this.widget.mgRec.vr_playlist,this.inlinePlacement=parseInt(this.amby.get("formatConfig.inlinePlacement",1),10),this.autoStart=this.config.autoStart||_,this.widgetComponent=new l.WidgetComponent(this.widget,(()=>{this.onImagesLoaded()}))}onImagesLoaded(){if(this.videoSensorComponent.addTeasersListeners(),this.playerTeaserIndex||(this.playerTeaserIndex=this.amby.get("widget.playerTeaserIndex")),this.playerComponent=new o.ContentPlayerComponent(this.widget,this.playerContainerDiv,this.formatConfig.mgsetup),this.playerContentStart&&r.Helpers.addClass(this.playerContainerDiv,"ctplay"),this.muteBtnComponent=new h.MuteButtonComponent(this.amby,this.playerContainerDiv),(0,r.getInObject)(this.widgetComponent,["videoTeasers",0,"teaser"])){const e=this.widgetComponent.videoTeasers[0].teaser;this.teaserImgContainer=e.querySelector(".mcimg .image-container"),this.teaserDiv=e}if(this.playlistComponent=new d.PlaylistComponent(this.amby),this.sticky||this.stickyAd){switch(this.amby.get("formatConfig.sliderSize","m").toLowerCase()){case"s":this.stickyClass="small ";break;case"m":this.stickyClass="medium ";break;case"l":this.stickyClass="large "}this.stickyClass+=this.amby.get("formatConfig.sliderAlign","right"),this.closeBtnComponent=new c.CloseButtonComponent(this.amby,this.playerContainerDiv),this.playerContainerDiv.addEventListener("animationend",(()=>{this.applyPlayerSize()})),this.playerContainerDiv.addEventListener("transitionend",(()=>{this.applyPlayerSize()})),this.amby.get("formatConfig.logo",!1)&&(this.logoComponent=new b.LogoComponent(this.amby,this.playerContainerDiv))}this.amby.get("formatConfig.inArticle",!1)&&(this.inArticleComponent=new f.InArticleComponent(this.widget,this.teasers[this.playerTeaserIndex],!1),this.amby.addTriggerListener("player.positionChanged",(()=>{this.applyPlayerSize()}))),setTimeout((()=>{this.addListeners(),"none"===this.amby.get("formatConfig.playerType")?(this.playerContainerDiv.classList.add("overflow-allowed"),this.amby.get("adSchedule").find((e=>"pre"===e.offset))||this.adPlayerComponent.initAdPlayer()):this.amby.dispatch(a.setPlayerInit(s.states.INIT_NEEDED))}))}addListeners(){this.amby.addSubListener("player.status",(()=>{this.onPlayerStatus(),this.onPlayerStatusBase()})),this.amby.addSubListener("player.visible",(()=>{this.onPlayerVisible()})),this.amby.addSubListener("player.muted",(()=>{const e=this.amby.get("player.muted",!0);this.amby.dispatch(a.upsertState({muteBtn:{muted:e}}))})),this.amby.addTriggerListener("muteBtn.clicked",(()=>{this.onMuteBtnClicked()})),this.amby.addTriggerListener("closeBtn.clicked",(()=>{(0,m.mgDebug)("Close Button clicked."),this.amby.get("player.isSticky",!1)?(this.sticky=!1,this.stickyAd=!1,this.amby.dispatch(a.upsertGlobalState({sticky:!1,stickyAd:!1})),this.amby.dispatch(a.setPlayerSticky(!1)),this.playerContainerDiv.removeAttribute("style"),this.applyPlayerSize(),r.Helpers.vitalCall((()=>{this.onTeaserInSight()}),this.amby.get("isVital",!0))):this.amby.get("player.isAdPlaying",!1)&&(this.amby.dispatch(a.setTriggerToTrue("ad.closed")),this.amby.dispatch(a.setTriggerToTrue("ad.actionClose")))}));const e=this.amby.get("teasers",[]);e&&Array.isArray(e)&&e.forEach(((e,t)=>{this.amby.addTriggerListener(`teasers.${t}.clicked`,(()=>{(0,m.mgDebug)("Teaser Clicked"),this.onClick(!0)}))})),this.amby.addTriggerListener("player.displayClicked",(()=>{(0,m.mgDebug)("Player Clicked"),this.playerContentStart&&!this.amby.get("player.wasPlaying",!1)&&(this.amby.dispatch(a.upsertPlayerState({wasPlaying:!0})),this.showControlBar&&this.amby.dispatch(a.upsertPlayerState({isControlsVisible:!0})),this.amby.dispatch(a.setTriggerToTrue("player.actionPlay"))),this.amby.dispatch(a.setTriggerToTrue("player.playerInTeaserClicked")),this.amby.get("player.muted",!0)&&this.amby.get("formatConfig.unmuteOnClick",!0)&&(this.amby.dispatch(a.setTriggerToTrue("player.unmute")),this.amby.dispatch(a.upsertAdState({initMuted:!1}))),this.onClick()})),this.amby.addTriggerListener("player.userPlay",(()=>{this.amby.get("player.muted",!0)&&this.amby.get("formatConfig.unmuteOnClick",!0)&&(this.amby.dispatch(a.setTriggerToTrue("player.unmute")),this.amby.dispatch(a.upsertAdState({initMuted:!1})))})),this.amby.addSubListener("ad.status",(()=>{const e=this.amby.get("ad.status"),t=e=>{this.onAdStatus(e),this.onAdStatusBase()};e===s.states.STATUS_PLAYING?t(e):setTimeout((()=>t(e)),0)})),this.amby.addSubListener("player.isAdPlaying",(()=>{this.amby.get("player.isAdPlaying",!1)&&"pre"===this.amby.get("ad.curAdPosition")&&r.Helpers.addClass(this.playerContainerDiv,"ad-loading")})),(-1!==[C,_].indexOf(this.autoStart)||this.sticky||this.stickyAd)&&(this.amby.addSubListener(`teasers.${this.inlinePlacement-1}.inSight`,(()=>{this.onTeaserInSight()})),(this.sticky||this.stickyAd)&&(this.amby.addSubListener("player.isSticky",(()=>{this.onPlayerSticky()})),(0,g.addSubListener)("sticky",(()=>{this.sticky=this.amby.get().sticky})),(0,g.addSubListener)("stickyAd",(()=>{this.stickyAd=this.amby.get().stickyAd})))),this.amby.addSubListener("player.fullscreen",(()=>{this.amby.get("player.fullscreen",!1)?this.amby.dispatch(a.setAdEnabled(!1)):this.amby.get("player.expanded",!1)&&setTimeout((()=>{this.amby.dispatch(a.setAdEnabled(!0))}),r.Helpers.isSafari()?300:0)})),window.addEventListener("resize",(()=>{this.applyPlayerSize()})),this.playerContainerDiv.addEventListener("mouseenter",(()=>{this.amby.dispatch(a.setPlayerMouseOver(!0))})),this.playerContainerDiv.addEventListener("mouseleave",(()=>{this.amby.dispatch(a.setPlayerMouseOver(!1))})),this.amby.get("widget.allImagesLoaded",!1)?this.applyPlayerSize():(this.amby.addTriggerListener("widget.imageLoaded",(()=>{this.applyPlayerSize()})),this.amby.addSubListener("widget.allImagesLoaded",(()=>{this.amby.get("widget.allImagesLoaded",!1)&&this.applyPlayerSize()}))),this.amby.addSubListener(["widget","blurred"],(()=>{this.onWidgetBlurred()})),this.amby.addTriggerListener("ad.clicked",(()=>{this.onAdClickedTriggerBase()}))}addPlayerBlock(){if(this.teasers&&0!==this.teasers.length||(this.teasers=this.widget.block.querySelectorAll(".mgline")),this.playerTeaserIndex||(this.playerTeaserIndex=this.amby.get("widget.playerTeaserIndex")),null!==this.playerTeaserIndex&&this.teasers&&this.teasers[this.playerTeaserIndex]){this.teaserImgContainer=this.teasers[this.playerTeaserIndex].querySelector(".mcimg .image-container"),this.teaserImg=this.teasers[this.playerTeaserIndex].querySelector(".mcimg .image-container img"),this.teaserImgContainer&&(this.playerContainerDiv=document.createElement("div"),this.playerContainerDiv.className="video-info__player",this.playerContainerDiv.id=`vrJwPlayerBlock_${this.mgVideoIndex}`,this.playerDiv=document.createElement("div"),this.rootElement.querySelector(`#mgJwPlayer_${this.mgVideoIndex}`)?this.playerDiv.id=`mgJwPlayer_${this.mgVideoIndex}_${Math.round(1e3*Math.random())}`:this.playerDiv.id=`mgJwPlayer_${this.mgVideoIndex}`,this.amby.dispatch(a.upsertState({player:{playerId:this.playerDiv.id}})),this.playerContainerDiv.appendChild(this.playerDiv),this.teaserImgContainer.appendChild(this.playerContainerDiv),this.amby.get("animatedArticle",!1)&&(this.animatedArticle=new v.AnimatedArticleComponent(this.widget,this.playerContainerDiv),this.applyPlayerSize()),this.playerContainerDiv.addEventListener("click",(e=>{e.target.className.indexOf("jw-overlays")<0&&(e.cancelBubble=!0)})),this.moveToBodyComponent=new u.MoveToBodyComponent(this.widgetId,this.playerContainerDiv));const e=this.widget.block.querySelector(".mgbox");e&&e.className.indexOf("MG_Gallery")>-1&&(e.parentNode.insertBefore(this.teasers[this.playerTeaserIndex],e),r.Helpers.addClass(this.teasers[this.playerTeaserIndex],"vrnofloat"))}else(0,m.mgDebug)("Container not found.")}addIndexes(e){if(e.length>0)for(let t=0;t<e.length;t++)e[t].getAttribute("id")&&e[t].setAttribute("id",e[t].getAttribute("id")+this.mgVideoIndex),this.addIndexes(e[t].children)}onPlayerStatus(){const e=this.amby.get("player.status");switch((0,m.mgDebug)(`Player status: ${e}`),e){case s.states.STATUS_READY:r.Helpers.vitalCall((()=>{this.applyPlayerSize()}),this.amby.get("isVital",!0)),setTimeout((()=>this.amby.dispatch(a.setAdEnabled(!0))),0),null!==this.inlinePlacement&&setTimeout((()=>this.initNotInlinePlacementPlayer()),0);break;case s.states.STATUS_PLAYING:r.Helpers.removeClass(this.playerContainerDiv,"ad-loading"),this.amby.dispatch(a.setPlayerVisible(!0)),this.showControlBar&&this.amby.dispatch(a.upsertPlayerState({isControlsVisible:!0})),0===this.amby.get("videoElemPosition.pWidth")&&this.applyPlayerSize();break;case s.states.STATUS_PAUSED:0===this.amby.get("videoElemPosition.pWidth")&&this.applyPlayerSize()}}initNotInlinePlacementPlayer(){this.showControlBar&&!this.playerContentStart&&this.amby.dispatch(a.upsertPlayerState({isControlsVisible:!0})),this.stickyAd&&this.amby.get(`teasers.${this.inlinePlacement-1}.inSight`,!1)&&!this.isOtherWidgetSticky()&&(this.wasVisible=!0),this.sticky?(this.startScroll&&!(0,r.getInObject)(this.amby.get(),["initedStartScroll"],!1)?(this.amby.dispatch(a.upsertGlobalState({initedStartScroll:!0})),window.addEventListener("scroll",(()=>{!this.wasVisible&&this.sticky&&this.startOnScroll((()=>{this.startInSticky()}))})),this.amby.get(`teasers.${this.inlinePlacement-1}.inSight`,!1)||this.startOnScroll((()=>{this.startInSticky()}))):"onLoad"!==this.stickyMode||this.amby.get(`teasers.${this.inlinePlacement-1}.inSight`,!1)||this.isOtherWidgetSticky()||this.startInSticky(),this.amby.get(`teasers.${this.inlinePlacement-1}.inSight`,!1)&&(this.isOtherWidgetSticky()||(this.wasVisible=!0),this.playerContentStart||this.amby.dispatch(a.setTriggerToTrue("player.actionPlay")))):"onLoad"!==this.autoStart&&!this.amby.get(`teasers.${this.inlinePlacement-1}.inSight`,!1)||this.playerContentStart||this.amby.dispatch(a.setTriggerToTrue("player.actionPlay")),this.playerContentStart&&this.amby.dispatch(a.setPlayerVisible(!0))}onTeaserInSight(){this.sticky&&!this.isOtherWidgetSticky()?(this.amby.get(`teasers.${this.inlinePlacement-1}.inSight`,!1)?(this.wasVisible=!0,this.amby.dispatch(a.setPlayerSticky(!1)),-1!==[C,_].indexOf(this.autoStart)&&this.amby.get("player.status")!==s.states.STATUS_PLAYING&&this.amby.get("player.isPlayingOnVisible",!0)&&!this.amby.get("player.isAdPlaying",!1)&&this.amby.dispatch(a.setTriggerToTrue("player.actionPlay"))):this.wasVisible&&this.amby.dispatch(a.setPlayerSticky(!0)),setTimeout((()=>this.applyPlayerSize()),0)):this.stickyAd&&this.amby.get("player.isAdPlaying",!1)?this.amby.get(`teasers.${this.inlinePlacement-1}.inSight`,!1)?(this.isOtherWidgetSticky()||(this.wasVisible=!0),this.amby.dispatch(a.setPlayerSticky(!1))):this.wasVisible&&!this.isOtherWidgetSticky()&&this.amby.dispatch(a.setPlayerSticky(!0)):this.inlinePlacement&&!this.amby.get("player.expanded",!1)&&(this.amby.get("player.isAdPlaying",!1)?this.amby.get(`teasers.${this.inlinePlacement-1}.inSight`,!1)&&!this.focusPaused?this.amby.get("player.isPlayingOnVisible",!0)&&this.amby.dispatch(a.setTriggerToTrue("ad.actionPlay")):this.autoStart===C&&this.amby.dispatch(a.setTriggerToTrue("ad.actionPause")):this.amby.get(`teasers.${this.inlinePlacement-1}.inSight`,!1)&&!this.focusPaused?(!this.stickyAd||this.wasVisible||this.isOtherWidgetSticky()||(this.wasVisible=!0),this.amby.get("player.isPlayingOnVisible",!0)&&this.amby.dispatch(a.setTriggerToTrue("player.actionPlay"))):this.autoStart===C&&this.amby.dispatch(a.setTriggerToTrue("player.actionPause")))}onPlayerSticky(){this.amby.get("player.isSticky",!1)?(r.Helpers.addClass(this.playerContainerDiv,this.stickyClass),this.moveToBody&&this.moveToBodyComponent.attachBody()):(r.Helpers.removeClass(this.playerContainerDiv,this.stickyClass),this.moveToBody&&this.moveToBodyComponent.detachBody(this.teaserImgContainer)),this.applyPlayerSize(),setTimeout((()=>{this.applyPlayerSize()}),100)}onAdStatus(e){switch(e){case s.states.STATUS_READY:this.stickyAd=this.amby.get("formatConfig.stickyAd",!1),r.Helpers.removeClass(this.playerContainerDiv,"ad-loading"),this.amby.get(`teasers.${this.inlinePlacement-1}.inSight`,!1)?this.isOtherWidgetSticky()||(this.wasVisible=!0):this.autoStart===C&&this.amby.dispatch(a.setTriggerToTrue("player.actionPause"));break;case s.states.STATUS_PLAYING:r.Helpers.removeClass(this.playerContainerDiv,"ad-loading"),this.amby.dispatch(a.setPlayerVisible(!1)),r.Helpers.addClass(this.teaserDiv,"ad-show"),this.amby.dispatch(a.upsertState({ad:{visible:!0}}));break;case s.states.STATUS_STOPPED:this.stickyAd&&this.amby.get("player.isSticky",!1)&&(this.amby.dispatch(a.setPlayerSticky(!1)),this.amby.dispatch(a.setTriggerToTrue("player.actionPause"))),this.amby.dispatch(a.setPlayerVisible(!0)),r.Helpers.removeClass(this.teaserDiv,"ad-show")}}onClick(e=!1){if(this.itemIndex=this.amby.get("player.itemIndex"),null!==this.itemIndex){let t=this.amby.get(`playlist.${this.itemIndex}.videoExt`);"string"==typeof t&&(t=JSON.parse(atob(t)));let{clickUrl:i}=t;if(i){i=r.Helpers.fromAscii(i);const t=window.open(i,"_blank");t&&(this.amby.dispatch(a.setTriggerToTrue("player.openPage")),t.focus(),e&&this.amby.dispatch(a.setTriggerToTrue("player.actionPause")))}else!this.amby.get("player.isAdPlaying")&&e&&(this.amby.get("player.status")===s.states.STATUS_PLAYING?this.amby.dispatch(a.setTriggerToTrue("player.actionPause")):this.amby.dispatch(a.setTriggerToTrue("player.actionPlay")))}}onMuteBtnClicked(){(0,m.mgDebug)("Mute Button clicked."),this.muted=this.amby.get("player.muted",!1),this.muted?(this.amby.dispatch(a.setTriggerToTrue("player.userUnmute")),this.amby.dispatch(a.setTriggerToTrue("player.unmute")),this.amby.dispatch(a.upsertAdState({initMuted:!1}))):(this.amby.dispatch(a.setTriggerToTrue("player.userMute")),this.amby.dispatch(a.setTriggerToTrue("player.mute")),this.amby.dispatch(a.upsertAdState({initMuted:!0})))}onPlayerVisible(){this.amby.get("player.visible",!1)?r.Helpers.addClass(this.playerContainerDiv,"showed"):r.Helpers.removeClass(this.playerContainerDiv,"showed")}applyPlayerSize(e=!0){r.Helpers.vitalCall((()=>{this.videoElementPosition(),this.teaserImgPosition(e)}),this.amby.get("isVital",!0))}videoElementPosition(){this.playerContainerDiv.removeAttribute("style");const e=r.Helpers.getElemWidth(this.playerContainerDiv);let t=e,i=t/(this.aspectRatio.width/this.aspectRatio.height),s=r.Helpers.getElemHeight(this.playerContainerDiv);if(0===s){const e=r.Helpers.getImgSizeByUrl(this.teaserImg.src);e?(({height:s}=e),s<=0&&(s=i),this.playerContainerDiv.style.height=`${s}px`):s=i}s>i&&(i=s,t=i*(this.aspectRatio.width/this.aspectRatio.height)),(this.sticky||this.stickyAd)&&this.amby.get("player.isSticky",!1)&&(t=e,s=e/(this.aspectRatio.width/this.aspectRatio.height),i=s,this.playerDiv.style.width=`${t}px`,this.playerContainerDiv.style.width=`${t}px`),this.playerContainerDiv.style.height=`${s}px`,this.playerDiv.style.height=`${i}px`;const n={width:e,height:s,pWidth:t,pHeight:i};r.Helpers.isIE()&&(n.top=0,n.left=0),this.amby.dispatch(a.upsertState({videoElemPosition:n,player:{size:{width:t,height:i}}}))}teaserImgPosition(e){const t=this.teaserImgContainer.getBoundingClientRect();this.amby.dispatch(a.setPlayerTeaserPosition({top:t.top-this.widget.block.getBoundingClientRect().top,left:t.left-this.widget.block.getBoundingClientRect().left,width:t.width,height:t.height||0})),e&&(this.amby.dispatch(a.setTriggerToTrue("player.resize")),this.amby.dispatch(a.setTriggerToTrue("player.teaserPositionChanged")))}startInSticky(){this.amby.dispatch(a.setPlayerSticky(!0)),this.applyPlayerSize(),this.playerContentStart||this.amby.dispatch(a.setTriggerToTrue("player.actionPlay"))}getVideoTeaserIndex(e){this.teasers=this.widget.block.querySelectorAll(".mgline"),this.teasers&&0!==this.teasers.length&&0!==Array.apply(null,this.teasers).filter((e=>e.className.indexOf("vrline")>=0)).length||setTimeout((()=>{this.getVideoTeaserIndex(e)}),50),this.inlinePlacement||(this.inlinePlacement=parseInt(this.amby.get("formatConfig.inlinePlacement",1),10));let t=0;for(let i=0;i<this.teasers.length;i++)if(this.teasers[i].className.indexOf("vrline")>-1){if(null!==this.inlinePlacement&&this.inlinePlacement===t+1){this.playerTeaserIndex=i,this.amby.dispatch(a.upsertState({widget:{playerTeaserIndex:this.playerTeaserIndex}})),e&&e();break}t+=1}}}i.PerformanceBase=T},{"../../redux/actionCreators":58,"../../redux/listener":59,"../../redux/storage":61,"../components/placementComponents/animatedArticleComponent":15,"../components/placementComponents/inArticleComponent":16,"../components/placementComponents/moveToBodyComponent":17,"../components/placementComponents/widgetComponent":19,"../components/playlistComponent":20,"../components/styleComponent":23,"../controllers/adPlayerComponent":27,"../debug":30,"../helpers":37,"../players/content/contentPlayerComponent":50,"../players/controls/closeButtonComponent":52,"../players/controls/logoComponent":53,"../players/controls/muteButtonComponent":54,"./formatBase":32}],37:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Helpers=void 0,i.getInObject=function(e,t,i=null){let s=e;return t.forEach((e=>{s=s&&Object.prototype.hasOwnProperty.call(s,e)?s[e]:i})),s},e("intersection-observer/intersection-observer");class s{elements=[];listeners=[];superObj;constructor(){this.interceptEventsListeners()}static init(){window.listTracker||(window.listTracker=new s)}static registerElement(e){if(-1===window.listTracker.elements.indexOf(e)){const t=[{},{}];window.listTracker.elements.push(e),window.listTracker.listeners.push(t)}return window.listTracker.listeners[window.listTracker.elements.indexOf(e)]}interceptEventsListeners(){this.superObj={addEventListener:HTMLElement.prototype.addEventListener,removeEventListener:HTMLElement.prototype.removeEventListener},Element.prototype.addEventListener=function(e,t,i){const a=s.registerElement(this);window.listTracker.superObj.addEventListener.apply(this,arguments);const r=i?1:0;a[r][e]||(a[r][e]=[]),a[r][e].push(t)},Element.prototype.removeEventListener=function(e,t,i){const a=s.registerElement(this);window.listTracker.superObj.removeEventListener.apply(this,arguments);const r=i?1:0;if(!a[r][e])return;const n=a[r][e].indexOf(t);n>-1&&a[r][e].splice(n,1)},Element.prototype.getEventListeners=function(e){const t=s.registerElement(this),i=[];for(let s,a=0;t[a];a++)s=t[a],"string"==typeof e?s[e]&&Object.keys(s[e]).forEach((t=>{i.push({type:e,listener:s[e][t],useCapture:!!a})})):Object.keys(s).forEach((t=>{Object.keys(s[e]).forEach((e=>{i.push({curType:t,listener:s[t][e],useCapture:!!a})}))}));return i}}}class a{static safeAdd(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}static bitRotateLeft(e,t){return e<<t|e>>>32-t}static md5cmn(e,t,i,s,r,n){return a.safeAdd(a.bitRotateLeft(a.safeAdd(a.safeAdd(t,e),a.safeAdd(s,n)),r),i)}static md5ff(e,t,i,s,r,n,o){return a.md5cmn(t&i|~t&s,e,t,r,n,o)}static md5gg(e,t,i,s,r,n,o){return a.md5cmn(t&s|i&~s,e,t,r,n,o)}static md5hh(e,t,i,s,r,n,o){return a.md5cmn(t^i^s,e,t,r,n,o)}static md5ii(e,t,i,s,r,n,o){return a.md5cmn(i^(t|~s),e,t,r,n,o)}static binlMD5(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let i=null,s=null,r=null,n=null,o=1732584193,l=-271733879,d=-1732584194,h=271733878;for(let t=0;t<e.length;t+=16)i=o,s=l,r=d,n=h,o=a.md5ff(o,l,d,h,e[t],7,-680876936),h=a.md5ff(h,o,l,d,e[t+1],12,-389564586),d=a.md5ff(d,h,o,l,e[t+2],17,606105819),l=a.md5ff(l,d,h,o,e[t+3],22,-1044525330),o=a.md5ff(o,l,d,h,e[t+4],7,-176418897),h=a.md5ff(h,o,l,d,e[t+5],12,1200080426),d=a.md5ff(d,h,o,l,e[t+6],17,-1473231341),l=a.md5ff(l,d,h,o,e[t+7],22,-45705983),o=a.md5ff(o,l,d,h,e[t+8],7,1770035416),h=a.md5ff(h,o,l,d,e[t+9],12,-1958414417),d=a.md5ff(d,h,o,l,e[t+10],17,-42063),l=a.md5ff(l,d,h,o,e[t+11],22,-1990404162),o=a.md5ff(o,l,d,h,e[t+12],7,1804603682),h=a.md5ff(h,o,l,d,e[t+13],12,-40341101),d=a.md5ff(d,h,o,l,e[t+14],17,-1502002290),l=a.md5ff(l,d,h,o,e[t+15],22,1236535329),o=a.md5gg(o,l,d,h,e[t+1],5,-165796510),h=a.md5gg(h,o,l,d,e[t+6],9,-1069501632),d=a.md5gg(d,h,o,l,e[t+11],14,643717713),l=a.md5gg(l,d,h,o,e[t],20,-373897302),o=a.md5gg(o,l,d,h,e[t+5],5,-701558691),h=a.md5gg(h,o,l,d,e[t+10],9,38016083),d=a.md5gg(d,h,o,l,e[t+15],14,-660478335),l=a.md5gg(l,d,h,o,e[t+4],20,-405537848),o=a.md5gg(o,l,d,h,e[t+9],5,568446438),h=a.md5gg(h,o,l,d,e[t+14],9,-1019803690),d=a.md5gg(d,h,o,l,e[t+3],14,-187363961),l=a.md5gg(l,d,h,o,e[t+8],20,1163531501),o=a.md5gg(o,l,d,h,e[t+13],5,-1444681467),h=a.md5gg(h,o,l,d,e[t+2],9,-51403784),d=a.md5gg(d,h,o,l,e[t+7],14,1735328473),l=a.md5gg(l,d,h,o,e[t+12],20,-1926607734),o=a.md5hh(o,l,d,h,e[t+5],4,-378558),h=a.md5hh(h,o,l,d,e[t+8],11,-2022574463),d=a.md5hh(d,h,o,l,e[t+11],16,1839030562),l=a.md5hh(l,d,h,o,e[t+14],23,-35309556),o=a.md5hh(o,l,d,h,e[t+1],4,-1530992060),h=a.md5hh(h,o,l,d,e[t+4],11,1272893353),d=a.md5hh(d,h,o,l,e[t+7],16,-155497632),l=a.md5hh(l,d,h,o,e[t+10],23,-1094730640),o=a.md5hh(o,l,d,h,e[t+13],4,681279174),h=a.md5hh(h,o,l,d,e[t],11,-358537222),d=a.md5hh(d,h,o,l,e[t+3],16,-722521979),l=a.md5hh(l,d,h,o,e[t+6],23,76029189),o=a.md5hh(o,l,d,h,e[t+9],4,-640364487),h=a.md5hh(h,o,l,d,e[t+12],11,-421815835),d=a.md5hh(d,h,o,l,e[t+15],16,530742520),l=a.md5hh(l,d,h,o,e[t+2],23,-995338651),o=a.md5ii(o,l,d,h,e[t],6,-198630844),h=a.md5ii(h,o,l,d,e[t+7],10,1126891415),d=a.md5ii(d,h,o,l,e[t+14],15,-1416354905),l=a.md5ii(l,d,h,o,e[t+5],21,-57434055),o=a.md5ii(o,l,d,h,e[t+12],6,1700485571),h=a.md5ii(h,o,l,d,e[t+3],10,-1894986606),d=a.md5ii(d,h,o,l,e[t+10],15,-1051523),l=a.md5ii(l,d,h,o,e[t+1],21,-2054922799),o=a.md5ii(o,l,d,h,e[t+8],6,1873313359),h=a.md5ii(h,o,l,d,e[t+15],10,-30611744),d=a.md5ii(d,h,o,l,e[t+6],15,-1560198380),l=a.md5ii(l,d,h,o,e[t+13],21,1309151649),o=a.md5ii(o,l,d,h,e[t+4],6,-145523070),h=a.md5ii(h,o,l,d,e[t+11],10,-1120210379),d=a.md5ii(d,h,o,l,e[t+2],15,718787259),l=a.md5ii(l,d,h,o,e[t+9],21,-343485551),o=a.safeAdd(o,i),l=a.safeAdd(l,s),d=a.safeAdd(d,r),h=a.safeAdd(h,n);return[o,l,d,h]}static binl2rstr(e){let t="";const i=32*e.length;for(let s=0;s<i;s+=8)t+=String.fromCharCode(e[s>>5]>>>s%32&255);return t}static rstr2binl(e){const t=[];t[(e.length>>2)-1]=void 0;for(let e=0;e<t.length;e+=1)t[e]=0;const i=8*e.length;for(let s=0;s<i;s+=8)t[s>>5]|=(255&e.charCodeAt(s/8))<<s%32;return t}static rstrMD5(e){return a.binl2rstr(a.binlMD5(a.rstr2binl(e),8*e.length))}static rstrHMACMD5(e,t){let i=a.rstr2binl(e);const s=[],r=[];s[15]=void 0,r[15]=void 0,i.length>16&&(i=a.binlMD5(i,8*e.length));for(let e=0;e<16;e+=1)s[e]=909522486^i[e],r[e]=1549556828^i[e];const n=a.binlMD5(s.concat(a.rstr2binl(t)),512+8*t.length);return a.binl2rstr(a.binlMD5(r.concat(n),640))}static rstr2hex(e){const t="0123456789abcdef";let i,s="",a=null;for(i=0;i<e.length;i+=1)a=e.charCodeAt(i),s+=t.charAt(a>>>4&15)+t.charAt(15&a);return s}static str2rstrUTF8(e){return unescape(encodeURIComponent(e))}static rawMD5(e){return a.rstrMD5(a.str2rstrUTF8(e))}static hexMD5(e){return a.rstr2hex(a.rawMD5(e))}static rawHMACMD5(e,t){return a.rstrHMACMD5(a.str2rstrUTF8(e),a.str2rstrUTF8(t))}static hexHMACMD5(e,t){return a.rstr2hex(a.rawHMACMD5(e,t))}static md5(e,t,i=!1){return t?i?a.rawHMACMD5(t,e):a.hexHMACMD5(t,e):i?a.rawMD5(e):a.hexMD5(e)}}class r{static consentData;static topWindow;static requestParams={};static consentObject={consentData:"",gdpr:!1};static userAgentDataParams={architecture:"scua",bitness:"scub",brands:"scu",fullVersionList:"scufvl",mobile:"scum",model:"scumd",platform:"scup",platformVersion:"scupv",uaFullVersion:"scufv",wow64:"scuw"};static isScrolledIntoView(e,t=1,i=0){const s=r.getViewTop(),a=s+this.getWindowHeight(),n=this.getOffsetTop(e);let o=n;if(e.offsetHeight)o+=e.offsetHeight;else{const t=this.getParentBlockByClass(e,"mgline");t&&(o+=t.offsetHeight)}return i>0&&(o+=i),o-(1-t)*e.offsetHeight<=a&&n+(1-t)*e.offsetHeight>=s}static onVisible(e,t,i=1,s=.5,a=0,r=0){const n=new IntersectionObserver((e=>{e.forEach((e=>t(Math.floor(100*e.intersectionRatio)>.9*i*100)))}),{threshold:[s,i],rootMargin:`${r}px 0px ${a}px 0px`});return n.POLL_INTERVAL=100,n.observe(e),n}static getOffsetTop(e){const t=e.getBoundingClientRect(),{body:i}=document,s=document.documentElement,a=window.pageYOffset||s.scrollTop||i.scrollTop,r=s.clientTop||i.clientTop||0,n=t.top+a-r;return Math.round(n)}static getOffsetLeft(e){const t=e.getBoundingClientRect(),{body:i}=document,s=document.documentElement,a=window.pageXOffset||s.scrollLeft||i.scrollLeft,r=s.clientLeft||i.clientLeft||0,n=t.left+a-r;return Math.round(n)}static getViewTop(){return window.pageYOffset||document.documentElement.scrollTop}static getWindowHeight(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}static getParentBlockByClass(e,t){let i=e;for(;i!==document&&i.parentNode;){if(i.className&&i.className.indexOf(t)>=0)return i;i=i.parentNode}return null}static getTeaserAlign(e,t=1){const i=document.body.scrollWidth,s=this.getRect(e,!0);return s.right*t<.3*i?"left":s.left*(1-t+1)>=.7*i?"right":"center"}static getRect(e,t){const i=e.getBoundingClientRect(),s={top:i.top,bottom:i.bottom,left:i.left,right:i.right,height:i.height?i.height:i.bottom-i.top,width:i.width?i.width:i.right-i.left};if(t){const e=this.getScroll();s.top+=e.top,s.bottom+=e.top,s.left+=e.left,s.right+=e.left}return s}static getAtf(e){const t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;return this.getOffsetTop(e)<t}static getScroll(){return{top:document.body.scrollTop||document.documentElement.scrollTop||0,left:document.body.scrollLeft||document.documentElement.scrollLeft||0}}static removeClass(e,t){e&&void 0!==e.className&&(e.className=e.className.replace(new RegExp(`(?:^|\\s)${t}`,"g"),""))}static addClass(e,t){let i=t;if(!e||void 0===e.className)return;const s=e.className;-1===s.indexOf(i)&&(""!==s&&(i=` ${i}`),e.className=s+i)}static mergeObjects(e,t,i=!1){return t&&Object.keys(t).forEach((s=>{i&&"object"==typeof t[s]&&null!==t[s]&&Object.prototype.hasOwnProperty.call(e,s)?Array.isArray(t[s])&&Array.isArray(e[s])?t[s].forEach(((t,i)=>{null!==t&&"object"==typeof t&&Object.prototype.hasOwnProperty.call(e[s],i)?e[s][i]=this.mergeObjects(e[s][i],t,!0):e[s][i]=t})):e[s]=this.mergeObjects(e[s],t[s],!0):e[s]=t[s]})),e}static isEqual(e,t){const i=Object.getOwnPropertyNames(e),s=Object.getOwnPropertyNames(t);if(i.length!==s.length)return!1;for(let s=0;s<i.length;s++){const a=i[s];if(e[a]!==t[a])return!1}return!0}static isChrome(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}static isSafari(){return/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)}static isIE(){return/MSIE\s|Trident\/|EDGE\//i.test(window.navigator.userAgent)}static isFF(){return/firefox/i.test(window.navigator.userAgent)}static iOSversion(){const e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);let t=[];return null!=e&&(t=[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||"0",10)],parseFloat(t.join(".")))}static createImg(e,t=null,i=null){const s=new Image;i&&s.addEventListener("load",(e=>{i(e)})),t&&s.addEventListener("error",(e=>{t(e)})),s.src=e}static createScriptAndRun(e,t){if(document.getElementById(e)||window[`mg${e}`])window[`mg${e}`]&&window[`mg${e}`]();else{const i=document.createElement("script");i.id=e,i.innerHTML=`(function(){window.mg${e} = function () { ${t} };})();`,document.head.appendChild(i),window[`mg${e}`]()}}static repaintSafari(){if(this.isSafari()){const{styleSheets:e}=document;if(e){const t=e.length;let i;for(i=0;i<t;i++)if(null!==e[i].rules){e[i].addRule(".mgReload","color: red;"),e[i].removeRule(e[i].rules.length-1);break}}}}static setCustomEventListenerManager(){s.init()}static isPortrait(){return window.matchMedia("(orientation: portrait)").matches}static isLandscape(){return window.matchMedia("(orientation: landscape)").matches}static fromAscii(e){let t=e.replace(/\\u([\d\w]{4})/gi,((e,t)=>String.fromCharCode(parseInt(t,16))));return t=t.replace(/\\"/g,'"').replace(/\\[nt]/g," "),t}static getUrlParam(e=""){let t=window.location!==window.parent.location?document.referrer:document.location.href;if(t===document.referrer)try{t=window.parent.location.href}catch(e){}if(e){const i=t.match(/\?\S+/);if(i){const t=i[0].substring(1).split("&");for(let i=0;i<t.length;i++)if(-1!==t[i].indexOf(e)){const e=t[i].split("=")[1];return!e||decodeURIComponent(e)}}return!1}return t}static getPlayerPos(e,t,i,s,a,r,n,o,l=null){let d,h,p,m,c=t,g=1,u=t;const y=l||document,b=e.getBoundingClientRect();let f;if(n&&y.querySelector(n)===e)f={width:b.width,height:b.height,top:e.className.indexOf("mgbox")>-1?0:this.getOffsetTop(e),left:e.className.indexOf("mgbox")>-1?0:this.getOffsetLeft(e),single:!0,pHeight:0,pWidth:0};else if(n&&y.querySelector(n)){const e=y.querySelector(n).getBoundingClientRect();f={width:e.width,height:e.height,top:e.top-b.top,left:e.left-b.left,single:!0,pHeight:0,pWidth:0}}else{const t=e.querySelectorAll(".mgline");if(t&&t.length>0&&(t[u]?d=t[u].getBoundingClientRect():(u=0,d=t[0].getBoundingClientRect())),h=d,p=d,t[u]&&t[u].clientWidth<301&&!o)for(let e=u+1;e<t.length;e++)if(t[e]&&(m=t[e].getBoundingClientRect(),h.right===d.right&&m.top===d.top&&(h=m,c=e),p.top===d.top&&d.bottom<m.top)){p=m;break}let r=u+i-1;if(i>1){t.length<r-1&&(r=t.length-1);for(let e=r;e>c;e--)if(t[e]&&(m=t[e].getBoundingClientRect(),m.top===d.top)){h=m;break}}if(s>1)for(let e=0;e<t.length&&s>g;e++)t[e]&&(m=t[e].getBoundingClientRect(),Math.floor(m.right)===Math.floor(d.right)&&m.bottom>d.bottom&&(p=m,g+=1));f={width:h.right-d.left,height:1===s?d.bottom-d.top:p.bottom-d.top,top:d.top-b.top,left:d.left-b.left,single:h.right===d.right,pHeight:0,pWidth:0},"bottom-right"===a&&t&&t.length>0&&(m=t[t.length-1].getBoundingClientRect(),f.top=m.bottom-f.height-b.top,f.left=m.right-f.width-b.left)}let v=f.width,S=v/(r.width/r.height||1.777);return S>f.height&&(S=f.height,v=S*(r.width/r.height||1.777)),[v,S]=this.adjustPlayerSize(v,S,r),f.pHeight=S,f.pWidth=v,f.pWidth>f.width&&(f.width=f.pWidth),f.pHeight>f.height&&(f.height=f.pHeight),f}static adjustPlayerSize(e,t,i){let[s,a]=[e,t];a=Math.floor(a)-2,a%2==1&&(a+=1);const r=a+8;let n=s,o=a,l=1;for(;a<=r;){a+=2,s=a*(i.width/i.height||1.777);let e=Math.floor(s);if(s-e<.2){s=e;break}if(s-e>.8){s=e+1;break}let t=s-e;t>.5&&(t=1-t,e+=1),l>t&&(l=t,n=e,o=a)}return a>r&&(s=n,a=o),[s,a]}static formatTime(e){const t=Math.floor(e/60/60);let i="";i=0===t?"":t<10?`0${t}:`:`${t}:`;const s=Math.floor(e/60),a=Math.floor(e%60);return`${i}${s<10?"0":""}${s}:${a<10?"0":""}${a}`}static parseTime(e){const t=new Date(`1970-01-01T${e}Z`);return Math.trunc(t.getTime()/1e3)}static getImgSizeByUrl(e){if(!e)return!1;let t=e.toString().match(/[?&]h=(\d+).*[?&]w=(\d+)/m);return t?{width:parseInt(t[2],10),height:parseInt(t[1],10)}:(t=e.toString().match(/[?&]w=(\d+).*[?&]h=(\d+)/m)||e.toString().match(/\/(\d+)x(\d+)\//m),!!t&&{width:parseInt(t[1],10),height:parseInt(t[2],10)})}static getElemWidth(e){const t=e.getBoundingClientRect();return t&&t.width?t.width:e.clientWidth||e.offsetWidth||e.parentNode.clientWidth||e.parentNode.offsetWidth}static getElemHeight(e){const t=e.getBoundingClientRect();return t.height?t.height:e.clientHeight||e.offsetHeight||e.parentNode.clientHeight||e.parentNode.offsetHeight}static checkIframe(e){try{const t=e.contentDocument||e.contentWindow.document;return!(!t||e.src&&r.getHostFromUrl(e.src))&&t}catch(e){return!1}}static getHostFromUrl(e){try{return new URL(e).host}catch(e){return""}}static getTranslated(e,t,i){const s=e.get("language","en");return e.get(`lang.${t}.${s}`,e.get(`libConfig.lang.${t}.${s}`))||e.get(`lang.${t}.en`,e.get(`libConfig.lang.${t}.en`,i))}static getCookie(e){const t=document.cookie.match(new RegExp(`(?:^|; )${e.replace(/([.$?*|{}()[\]\\/+^])/g,"\\$1")}=([^;]*)`));return t?decodeURIComponent(t[1]):void 0}static parseXml(e){let t;return window.DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):(t=new ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(e)),t}static getFromDocumentByTagName(e,t){let i="";const s=e.getElementsByTagName(t);return s&&s[0]&&(i=(s[0].textContent??"").trim()),i}static cyrb53(e,t=0){let i=3735928559^t,s=1103547991^t;for(let t,a=0;a<e.length;a++)t=e.charCodeAt(a),i=Math.imul(i^t,2654435761),s=Math.imul(s^t,1597334677);return i=Math.imul(i^i>>>16,2246822507)^Math.imul(s^s>>>13,3266489909),s=Math.imul(s^s>>>16,2246822507)^Math.imul(i^i>>>13,3266489909),(4294967296*(2097151&s)+(i>>>0)).toString()}static md5(e){return a.md5(e)}static getConsentData(){if(!this.consentObject.consentData)try{if(this.getMostTopWindow().localStorage){let e=JSON.parse(this.getMostTopWindow().localStorage.getItem("MG_ConsentData"));null!=e&&void 0!==e.gdprApplies&&void 0!==e.consentData&&(e.gdprApplies&&(this.consentObject.gdpr=!0),this.consentObject.consentData=e.consentData),e=JSON.parse(this.getMostTopWindow().localStorage.getItem("MG_tcfv2Data")),null!=e&&void 0!==e.gdprApplies&&void 0!==e.tcString&&(e.gdprApplies&&(this.consentObject.gdpr=!0),this.consentObject.consentData=e.tcString)}}catch(e){}return this.consentObject}static replaceAll(e,t,i){return e.split(t).join(i)}static getMostTopWindow(){if(!this.topWindow){let e=window;for(;e!==e.parent;)try{e.parent.document.body;e=e.parent}catch(e){break}this.topWindow=e}return this.topWindow}static getMostTopWindowUrl(){const e=r.getMostTopWindow();return r.isAMP()?e?.context.canonicalUrl:e.location.href}static getMostTopWindowReferrer(){const e=r.getMostTopWindow();return r.isAMP()?e?.context.referrer.length?e?.context.referrer:new URL(r.getMostTopWindowUrl()).host:e.document.referrer.length?e.document.referrer:e.location.host}static isAMP(){return r.getMostTopWindow()?.ampSeen??!1}static parseUrl(e){const t=new RegExp(/(http|https):\/\/([\w_-]+(?:(?:\.[\w_-]+)+))([\w.,@^=%&\\/~+#-]*)/).exec(decodeURI(e));return t?t[0]:null}static callScriptURL(){const e=((new Error).stack??"").trim().split(".js?r=");if(e){const t=e[e.length-1];return r.parseUrl(t)}return null}static getPageScriptsList(){const e=Array.from(document.getElementsByTagName("script")),t=[];return t.push(window.location.href.split("?")[0]),e.forEach((e=>{e.src&&t.push(r.parseUrl(e.src))})),t}static getDntVal(){const e=void 0!==navigator.doNotTrack?navigator.doNotTrack:void 0!==window.doNotTrack?window.doNotTrack:void 0!==navigator.msDoNotTrack?navigator.msDoNotTrack:null;return 1===parseInt(e,10)||"yes"===e?"1":"0"}static getCcpa(){let e=null;try{e=r.getCookie("usprivacy")||r.getMostTopWindow().localStorage.MG_uspString}catch(e){}return e}static prepareAdSourceMacroses(e){if(-1===e.indexOf("{"))return e;let t=r.replaceAll(e,"{dnt}",r.getDntVal());return t=r.replaceAll(t,"{url}",encodeURIComponent(r.getMostTopWindowUrl())),t=r.replaceAll(t,"{referer_url}",encodeURIComponent(r.getMostTopWindowReferrer())),t=r.replaceAll(t,"{ccpa}",r.getCcpa()||"1---"),t=r.replaceAll(t,"{gdpr_consent}",r.getConsentData().consentData),t=r.attachRequestParams(t),t}static tryCorrectZeroSizes(e,t,i){t<1&&i<1&&(t=r.getElemWidth(e),i=r.getElemHeight(e));const s=16/9;return t<1&&i>=1?t=i*s:i<1&&t>=1&&(i=t/s),{width:t,height:i}}static vitalCall(e,t){if(!e||"function"!=typeof e)throw new Error("callback must be a function");t?setTimeout((()=>e()),0):e()}static replaceAdSource(e,t){let i=e.replace("vpaid","vast");return i=i.replace(/\?.*/,"").concat("?mgwteaser=",t),i}static initClientHintData(e){r.getMostTopWindow().navigator.userAgentData?.getHighEntropyValues(Object.keys(r.userAgentDataParams)).then((t=>{Object.keys(t).forEach((e=>{const i=t[e];let s="";"object"==typeof i&&(s=i.map((e=>`"${e.brand}";v="${e.version}"`)).join(", ")),"boolean"==typeof i&&(s=i?"?1":"?0"),"string"==typeof i&&i.length&&(s=i),Array.isArray(i)&&i.length&&(s=i.reduce(((e,t,i,s)=>`${e}"${t.brand}";v="${t.version}"`+(i!==s.length-1?", ":"")),"")),r.requestParams[r.userAgentDataParams[e]]=encodeURIComponent(s)})),"function"==typeof e&&e()}))}static attachRequestParams(e){const t=new URL(e);Object.entries(r.requestParams).forEach((([e,i])=>{t.searchParams.append(e,i.toString())}));let i=t.href;return i=r.replaceAll(i,"%7B","{"),i=r.replaceAll(i,"%7D","}"),i}}i.Helpers=r,Math.imul||(Math.imul=function(e,t){const i=65535&e,s=65535&t;return i*s+((e>>>16&65535)*s+i*(t>>>16&65535)<<16>>>0)|0})},{"intersection-observer/intersection-observer":6}],38:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Loader=void 0;i.Loader=class{constructor(e,t,i="0"){this.config=e,this.callback=t,this.widgetIndex=i,this.loaded={},this.loading={},this.allLoaded=!1,this.checkAgain=!1;const{protocol:s}=document.location;this.protocol=0===s.indexOf("http")?s:"https:",Object.keys(this.config).forEach((e=>{if(Object.prototype.hasOwnProperty.call(this.config[e],"exists"))if(this.loading[e]=!1,document.getElementById(`${e}_${this.widgetIndex}`)||window[`${e}_${this.widgetIndex}`])window[`mg${e}_${this.widgetIndex}`]&&(this.loaded[e]=window[`mg${e}_${this.widgetIndex}`]());else{const t=document.createElement("script");t.id=`${e}_${this.widgetIndex}`,t.innerHTML=`(function(){window.mg${e}_${this.widgetIndex} = function () { return !!(${this.config[e].exists});};})();`,document.head.insertBefore(t,document.head.querySelector("script")||document.head.lastChild),this.loaded[e]=window[`mg${e}_${this.widgetIndex}`]()}}))}checkLoaded(){this.allLoaded=!0,this.checkAgain=!1,Object.keys(this.loaded).forEach((e=>{if(!this.loaded[e]){let t=!0;if(Object.prototype.hasOwnProperty.call(this.config[e],"dep"))for(let i=0;i<this.config[e].dep.length;i++)this.loaded[this.config[e].dep[i]]||(t=!1);t&&(this.allLoaded=this.allLoaded&&this.createScript(e))}})),this.checkAgain?this.checkLoaded():this.allLoaded&&this.callback()}createScript(e){let t=document.getElementById(e);if(t)if(t.getAttribute("data-loaded")||this.loading[e]){if(t.getAttribute("data-loaded"))return this.loaded[e]=!0,this.checkAgain=!0,!0}else this.loading[e]=!0,t.addEventListener("load",(()=>{this.onLoadScript(t)}));else t=document.createElement("script"),t.id=e,0===this.config[e].url.indexOf("http")?t.src=this.config[e].url:t.src=`${this.protocol}${this.config[e].url}`,t.addEventListener("load",(()=>{this.onLoadScript(t)})),document.head.appendChild(t),this.loading[e]=!0;return!1}onLoadScript(e,t=null){e.setAttribute("data-loaded",!0),this.loaded[e.id]=!0,this.checkLoaded(),t&&t()}}},{}],39:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.AniviewBase=void 0;var s=e("../../debug"),a=e("../../helpers");class r{constructor(e,t){this.amby=e.amby,this.ref1=t.ref1}getRef1(){let e=this.amby.get("formatConfig.name");"attachedWidget"===e&&(e="outstream");let t=`AV_CDIM1=${this.amby.get("cappingData.dt","desktop")}`;try{t+=`&AV_CUSTOM1=${window.localStorage.mgMuidn}`}catch(e){(0,s.mgDebug)(e)}if(t+=`&AV_CDIM2=${this.amby.get("cappingData.isBot",0)}&AV_CDIM3=${e}&AV_CDIM4=${this.amby.get("sensorCid")}&AV_CDIM5=${this.amby.get("uuid")}&AV_CDIM6=${this.amby.get("cappingData.iv",0)}${this.ref1?"&":""}${this.ref1||""}`,"native"===e){const e=this.getVideoExt(),i=this.amby.get("player.itemIndex",0);t+=`&AV_CUSTOM2=${(0,a.getInObject)(e,["duration"],0)}&AV_CUSTOM3=${encodeURIComponent(this.amby.get(`playlist.${i}.title`))}&AV_CUSTOM4=${r.getKrono((0,a.getInObject)(e,["duration"],0))}&AV_CUSTOM5=`+(this.amby.get("formatConfig.sticky")?7:2)+"&AV_CUSTOM6="+(a.Helpers.iOSversion()?1:3)+`&AV_CUSTOM7=${(0,a.getInObject)(e,["gpmdCategory","cat1"],0)}`+`&AV_CUSTOM8=${(0,a.getInObject)(e,["gpmdCategory","cat2"],0)}`}return t}static getKrono(e){let t=0;return[30,30,30,30,60,60,60,300,300,900,1800,1800,1800,1800].reduce(((i,s,a)=>(e>i&&(t=a),i+s))),t}getVideoExt(){let e=this.amby.get(`playlist.${this.amby.get("player.itemIndex")}.videoExt`);return"string"==typeof e&&(e=JSON.parse(atob(e))),e||!1}}i.AniviewBase=r},{"../../debug":30,"../../helpers":37}],40:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.AniViewComponent=void 0;var s=e("../../../redux/storage"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=m(t);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var n=a?Object.getOwnPropertyDescriptor(e,r):null;n&&(n.get||n.set)?Object.defineProperty(s,r,n):s[r]=e[r]}s.default=e,i&&i.set(e,s);return s}(e("../../../redux/actionCreators")),r=e("../../helpers"),n=e("../../debug"),o=e("../../loader"),l=e("../../components/noSoundComponent"),d=e("../../components/unmuteDetectComponent"),h=e("./aniViewBase"),p=e("../../components/proxyConsoleComponent");function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(m=function(e){return e?i:t})(e)}const c="mgAniViewLib";class g extends h.AniviewBase{constructor(e,t){super(e,t),this.amby=e.amby;const{name:i="ad",publisherId:o,channelId:h,playerDivId:m,playerDiv:c=null,vastRetry:g,errorLimit:u,maxrun:y,waterfall:b,logLevel:f,timeout:v,soundButton:S,pauseButton:_,timeLine:C,aniviewParams:T,nextAdTimeout:w,skipoffset:P,noCompleteTimeout:A,verifiedSources:k,initSize:x}=t;this.inited=!1,this.closed=!1,this.needToCreate=!1,this.name=i,this.playerDivId=m,this.rootElement=e.rootElement,this.playerDiv=c||this.rootElement.querySelector(`#${this.playerDivId}`),this.resendTime=parseInt(this.amby.get("formatConfig.resendTime"),10),this.mgVideoIndex=this.amby.get("mgVideoIndex"),this.currentImpressions=0,this.errorsNumber=0,this.startRequestSent=!1,this.pauseRequestSent=!1,this.amby.get("formatConfig.forceMute",!1)&&(this.noSoundComponent=new l.NoSoundComponent(this.amby,{playerDiv:this.playerDiv,adName:i})),this.amby.get("formatConfig.detectUnmute",!0)&&(this.unmuteDetectComponent=new d.UnmuteDetectComponent(e)),this.amby.get("formatConfig.hideConsole",!1)&&-1===window.location.href.indexOf("mgwdebug")&&(this.proxyConsoleComponent=new p.ProxyConsoleComponent(this.amby,{playerDiv:this.playerDiv})),P&&(this.skipObserver=new MutationObserver((e=>{e.forEach((e=>{"attributes"===e.type&&e.target.style&&"none"!==e.target.style.display&&this.amby.dispatch(a.upsertState({skipBtn:{skipable:!0}}))}))}))),this.eventStack={},this.config={publisherId:o,channelId:h,width:100,height:0,HD:!1,autoPlay:!1,loop:this.amby.get("formatConfig.loop",!1),mode:0,soundButton:null==S||S,pauseButton:null==_||_,timelinemode:C||"bottom",skip:!!P,skipTimer:parseInt(P,10)||!1,closeButton:!1,position:this.playerDivId,positionDiv:this.playerDiv,logLevel:parseInt(f,10)||0,antihjck:!0,lastFrame:!this.amby.get("formatConfig.loop",!1)},y&&(this.config.maxrun=y),this.errorLimit=parseInt(u,10)||1,this.config.errorLimit=this.errorLimit,g&&(this.config.vastRetry=parseInt(g,10)),this.verifiedSources=[],k&&(this.verifiedSources=k),x&&(this.initSize=x),Array.isArray(b)&&b.length>0&&(this.config.updatewaterfall=e=>{Array.isArray(e)&&e.length>0&&e.forEach(((e,t)=>{b[t]&&(e.type="vast",e.url=b[t])}))}),this.loadAdSrcNoUiList(),this.config.maximp=this.amby.get("formatConfig.maximp",5),this.config=r.Helpers.mergeObjects(this.config,T||{}),this.stopRequestTime=v,this.nextAdTimeoutTime=w||10,this.noCompleteTimeoutTime=A||60,this.amby.dispatch(a.setAdInit(null,this.name)),this.amby.addSubListener(`${this.name}.init`,(()=>{[s.states.INIT_NEEDED,s.states.INIT_RESET].indexOf(this.amby.get(`${this.name}.init`))>-1&&(0,n.mgDebug)("Ad starts search."),r.Helpers.vitalCall((()=>this.initPlayer()),this.amby.get("isVital",!0))})),this.amby.addTriggerListener(`${this.name}.actionPlay`,(()=>{const e=this.amby.get(`${this.name}.status`);!this.player||e&&e===s.states.STATUS_PLAYING||this.startRequestSent||(this.apiAction=!0,this.startRequestSent=!0,e&&e!==s.states.STATUS_READY?((0,n.mgDebug)("Aniview: ResumeAd requested."),this.player.resume()):((0,n.mgDebug)("Aniview: StartAd requested."),this.player.startAd())),this.player&&e&&-1!==[s.states.STATUS_READY,s.states.STATUS_PAUSED].indexOf(e)||(this.startRequested=!0)})),this.amby.addTriggerListener(`${this.name}.actionPause`,(()=>{const e=this.amby.get(`${this.name}.status`);this.player&&e===s.states.STATUS_PLAYING&&!this.pauseRequestSent&&(this.apiAction=!0,this.pauseRequestSent=!0,this.player.pause())})),this.amby.addTriggerListener(`${this.name}.actionStop`,(()=>{this.amby.get(`${this.name}.status`)!==s.states.STATUS_STOPPED&&(this.apiAction=!0,this.close())})),this.amby.addTriggerListener(`${this.name}.actionClose`,(()=>{this.amby.dispatch(a.setAdVisible(!1,this.name)),this.player&&[s.states.STATUS_PLAYING,s.states.STATUS_PAUSED].indexOf(this.amby.get(`${i}.status`))>-1&&(this.skipApiAction=!0,this.close())})),this.amby.addTriggerListener("ad.mute",(()=>{this.mute()})),this.amby.addTriggerListener("ad.unmute",(()=>{this.unmute()})),this.amby.addTriggerListener("ad.resize",(()=>{this.onResize()})),this.amby.addSubListener("popup.visible",(()=>{this.onPlayerChangedLocation()})),this.amby.get("formatConfig.moveToBody",!1)&&this.amby.addSubListener("player.isSticky",(()=>{this.onPlayerChangedLocation()})),this.amby.addSubListener("ad.mouseOver",(()=>{this.player&&this.amby.get("ad.isUnmuteOnHover")&&this.amby.get("ad.containerClicked")&&"mobile"!==this.amby.get("deviceType")&&"tablet"!==this.amby.get("deviceType")&&(this.amby.get("ad.mouseOver")?this.unmute():this.mute())})),window.addEventListener("keydown",(e=>{if(!this.eventStackSent&&e.ctrlKey&&e.shiftKey&&"KeyA"===e.code&&(this.eventStackSent=!0,this.unmuteDetectComponent)){const e=this.unmuteDetectComponent.getUnMutedElements(),t=this.unmuteDetectComponent.findIframes(document.body),i={};Object.entries(this.eventStack).forEach((([e,t])=>{const s=[];t.forEach((e=>{s.push(e.event)})),i[e]=s}));const s={video:e,iframes:t,campaigns:i};(0,n.mgDebug)(s),this.amby.dispatch(a.upsertState({soundNotify:JSON.stringify(s)}))}}))}initPlayer(){switch(this.amby.get(`${this.name}.init`)){case s.states.INIT_NEEDED:if(this.amby.dispatch(a.setAdInit(s.states.INIT_IN_PROGRESS,this.name)),document.getElementById(c))return void(window.avPlayer?this.amby.dispatch(a.setAdInit(s.states.INIT_RESET,this.name)):document.getElementById(c).getAttribute("data-loaded")?(this.createPlayer(),this.amby.dispatch(a.setAdInit(s.states.INIT_DONE,this.name)),this.inited=!0):document.getElementById(c).addEventListener("load",(()=>{this.createPlayer(),this.amby.dispatch(a.setAdInit(s.states.INIT_DONE,this.name)),this.inited=!0})));this.stopRequestTime&&this.stopRequestTime>0&&(this.stopRequestTimeout=setTimeout((()=>{(0,n.mgDebug)("Aniview StopRequestTimeout"),this.passback(),this.reset(),this.amby.dispatch(a.setAdStatus(s.states.STATUS_ERROR,this.name))}),1e3*this.stopRequestTime)),(new Image).src=`https://track1.aniview.com/track?pid=${this.config.publisherId}&cid=${this.config.channelId}&e=playerLoaded&cb=${Date.now()}`,this.script=document.createElement("script"),this.script.src=this.amby.get("ad.playerUrl")||"https://player.aniview.com/script/6.1/aniview.js",this.script.id=c,this.script.addEventListener("load",(()=>{this.script.setAttribute("data-loaded",!0),this.createPlayer(),this.amby.dispatch(a.setAdInit(s.states.INIT_DONE,this.name)),this.inited=!0})),document.head.appendChild(this.script);break;case s.states.INIT_RESET:this.amby.dispatch(a.setAdInit(s.states.INIT_IN_PROGRESS,this.name)),this.stopRequestTimeout&&(clearTimeout(this.stopRequestTimeout),this.stopRequestTimeout=null),this.stopRequestTime&&this.stopRequestTime>0&&(this.stopRequestTimeout=setTimeout((()=>{(0,n.mgDebug)("Aniview StopRequestTimeout"),this.passback(),this.reset(),this.amby.dispatch(a.setAdStatus(s.states.STATUS_ERROR,this.name))}),1e3*this.stopRequestTime)),this.createPlayer(),this.amby.dispatch(a.setAdInit(s.states.INIT_DONE,this.name));break;case s.states.INIT_STOP:this.reset()}}createPlayer(){if(!this.amby.get("cappingData"))return this.initRequested=!0,void(this.cappingDataListener||(this.amby.addSubListener("cappingData",(()=>{this.amby.get("cappingData")&&this.initRequested&&(this.initRequested=!1,this.createPlayer())})),this.cappingDataListener=!0));if(this.closed||[s.states.STATUS_PLAYING,s.states.STATUS_PAUSED,s.states.STATUS_READY].indexOf(this.amby.get(`${this.name}.status`))>-1)this.needToCreate=!0;else{if((0,n.mgDebug)("Creating aniview player."),this.amby.dispatch(a.setAdStatus(s.states.STATUS_INIT,this.name)),this.currentImpressions=0,this.errorsNumber=0,this.initSize)this.config.width=this.initSize.width??this.amby.get("ad.size.width",300),this.config.height=this.initSize.height??this.amby.get("ad.size.height",300);else{const e=this.amby.get("ad.size",{width:300,height:169});this.config.width=e.width,this.config.height=e.height}this.config.autoSound=!this.amby.get("ad.initMuted",!0),this.config.ref1=this.getRef1(),!this.amby.get("formatConfig.forceMute",!1)&&r.Helpers.iOSversion()||(this.config.autoSound=!1),this.player=new window.avPlayer(this.config),this.player.onLoad=()=>{(0,n.mgDebug)("Aniview onLoad event."),this.resetTimeout&&(clearTimeout(this.resetTimeout),this.resetTimeout=null),this.skipButton=this.playerDiv.querySelector("#skip-btn"),this.skipButton.innerHTML=r.Helpers.getTranslated(this.amby,"skipText","Skip"),this.skipObserver&&(this.skipObserver.disconnect(),this.skipObserver.observe(this.skipButton,{attributes:!0})),this.initSize&&this.onResize(),this.amby.get("formatConfig.forceMute",!1)&&(this.soundButton=this.playerDiv.querySelector("#sound"),this.soundButton&&this.soundButton.addEventListener("click",(()=>{this.amby.dispatch(a.upsertAdState({soundButtonClicked:!0}))}))),this.startRequestSent=!1,this.amby.dispatch(a.setAdStatus(s.states.STATUS_READY,this.name)),this.startRequested&&(this.startRequested=!1,this.amby.dispatch(a.setTriggerToTrue(`${this.name}.actionPlay`)))},this.player.onPlay=({asid:e,videoUrl:t,clickThrough:i})=>{(0,n.mgDebug)("Aniview onPlay event.");const o=(0,r.getInObject)(window,["_mgAdSrcNoUi"]);Array.isArray(o)&&-1!==o.indexOf(e)?((0,n.mgDebug)(`Controls hided for AdSource ${e}`),r.Helpers.addClass(this.playerDiv,"adplayer-no-ui")):this.playerDiv.classList.contains("adplayer-no-ui")&&((0,n.mgDebug)(`Controls showed for AdSource ${e}`),r.Helpers.removeClass(this.playerDiv,"adplayer-no-ui")),this.updateEventStack(e,{time:(new Date).toISOString().replace("Z","MG"),adTag:e,event:"play",cid:this.amby.get("widgetId"),videoUrl:t,clickThrough:i}),this.amby.dispatch(a.upsertState({skipBtn:{skipable:!1}})),this.errorsNumber=0,this.stopRequestTimeout&&(clearTimeout(this.stopRequestTimeout),this.stopRequestTimeout=null),this.nextAdTimeout&&(clearTimeout(this.nextAdTimeout),this.nextAdTimeout=null);let l=i;i&&(l=i.toString().match(/[?&]_redirect=(.+)(&|$)/m),l?[,l]=l:l=i),l&&(l=l.toString().replace(/(^\s+|\s+$)/gm,""));let d=t;if(t&&(d=t.toString().replace(/(^\s+|\s+$)/gm,"")),this.amby.dispatch(a.upsertAdState({adTag:e,videoUrl:d,vpaid:!0,adPlayer:1,adClickUrl:decodeURIComponent(l)})),this.apiAction||this.amby.dispatch(a.upsertPlayerState({isPlayingOnVisible:!0})),this.apiAction=!1,this.amby.get("ad.initMuted",!0)||this.amby.get("formatConfig.forceMute",!1)||r.Helpers.iOSversion()?this.player.muted||this.mute():this.unmute(),this.amby.dispatch(a.upsertState({[this.name]:{linkBtn:{link:i},clickCover:{link:i}}})),this.startRequestSent=!1,this.amby.dispatch(a.upsertAdState({currentImpressions:this.amby.get("ad.currentImpressions",0)+1})),this.amby.dispatch(a.setAdStatus(s.states.STATUS_PLAYING,this.name)),this.noCompleteTimeoutTime&&((0,n.mgDebug)("Creating noCompleteTimeout"),this.noCompleteTimeoutTimer=0,this.runNoCompleteInterval()),this.amby.get("formatConfig.moveToBody",!1)){let e=this.playerDiv.querySelectorAll("video");e=Array.apply(null,e),e.forEach((e=>{e.paused||(this.currentVideoElem=e)}))}this.resizeNeeded&&this.onResize()},this.player.onPlay100=()=>{this.noCompleteTimeoutTime&&this.noCompleteTimeout&&((0,n.mgDebug)("Removing noCompleteTimeout"),clearInterval(this.noCompleteTimeout),this.noCompleteTimeout=null),this.amby.dispatch(a.setTriggerToTrue("ad.complete")),this.checkMuted(),this.currentImpressions+=1,!this.amby.get("formatConfig.loop",!1)||this.config.maximp<=this.currentImpressions?(this.close(),this.amby.dispatch(a.setAdStatus(s.states.STATUS_STOPPED,this.name))):(this.nextAdTimeout&&(clearTimeout(this.nextAdTimeout),this.nextAdTimeout=null),this.nextAdTimeout=setTimeout((()=>{this.amby.get("ad.status")===s.states.STATUS_STOPPED&&((0,n.mgDebug)("Next AD Timeout."),this.reset(),this.amby.dispatch(a.setAdStatus(s.states.STATUS_STOPPED,this.name)))}),1e3*this.nextAdTimeoutTime))},this.player.onPlay25=()=>{this.amby.dispatch(a.upsertAdState({position:Math.ceil(this.player.getAdDuration()/4),duration:this.player.getAdDuration()}))},this.player.onPlay50=()=>{this.amby.dispatch(a.upsertAdState({position:Math.ceil(this.player.getAdDuration()/2),duration:this.player.getAdDuration()}))},this.player.onPlay75=()=>{this.amby.dispatch(a.upsertAdState({position:Math.ceil(this.player.getAdDuration()/4*3),duration:this.player.getAdDuration()}))},this.player.onResume=()=>{this.apiAction||this.amby.dispatch(a.upsertPlayerState({isPlayingOnVisible:!0})),this.noCompleteTimeoutTime&&((0,n.mgDebug)("Resuming noCompleteTimeout"),this.runNoCompleteInterval()),this.apiAction=!1,this.startRequestSent=!1,this.amby.dispatch(a.setAdStatus(s.states.STATUS_PLAYING,this.name))},this.player.onPause=()=>{this.apiAction||this.skipApiAction||this.amby.dispatch(a.upsertPlayerState({isPlayingOnVisible:!1})),this.noCompleteTimeoutTime&&((0,n.mgDebug)("Pausing noCompleteTimeout"),this.noCompleteTimeout&&(clearInterval(this.noCompleteTimeout),this.noCompleteTimeout=null)),this.apiAction=!1,this.skipApiAction=!1,this.pauseRequestSent=!1,this.amby.dispatch(a.setAdStatus(s.states.STATUS_PAUSED,this.name))},this.player.onError=e=>{this.errorsNumber+=1,(this.errorsNumber>this.errorLimit||e&&e.errorlimit)&&(this.noCompleteTimeoutTime&&this.noCompleteTimeout&&((0,n.mgDebug)("Removing noCompleteTimeout"),clearInterval(this.noCompleteTimeout),this.noCompleteTimeout=null),this.passback(),this.reset(),this.amby.dispatch(a.setAdStatus(s.states.STATUS_ERROR,this.name))),this.resendTime&&(this.resendLimit||(this.resendLimit=parseInt(this.amby.get("formatConfig.resendLimit"),10)||1),(0,n.mgDebug)(`No ads found. Retry in ${this.resendTime} sec. Iteration number: ${this.amby.get(`${this.name}.resendNumber`,0)+1}`),!this.resetTimeout&&this.amby.get(`${this.name}.resendNumber`,0)<this.resendLimit?this.resetTimeout=setTimeout((()=>{(0,n.mgDebug)("Resetting player..."),this.resetTimeout=null,this.amby.dispatch(a.upsertState({[this.name]:{resendNumber:this.amby.get(`${this.name}.resendNumber`,0)+1}})),this.amby.dispatch(a.setAdStatus(s.states.STATUS_INIT,this.name)),this.amby.dispatch(a.setAdInit(s.states.INIT_RESET,this.name))}),1e3*this.resendTime):this.resendLimit&&(0,n.mgDebug)(`Iteration limit is ${this.resendLimit}. Iteration aborted.`))},this.player.onClose=()=>{this.noCompleteTimeoutTime&&this.noCompleteTimeout&&((0,n.mgDebug)("Removing noCompleteTimeout"),clearInterval(this.noCompleteTimeout),this.noCompleteTimeout=null),this.checkMuted(),this.reset(),this.amby.dispatch(a.setAdStatus(s.states.STATUS_STOPPED,this.name))},this.player.onSkip=()=>{this.noCompleteTimeoutTime&&this.noCompleteTimeout&&((0,n.mgDebug)("Removing noCompleteTimeout"),clearInterval(this.noCompleteTimeout),this.noCompleteTimeout=null),this.checkMuted(),this.amby.dispatch(a.setTriggerToTrue("ad.skip"))},this.player.onMute=()=>{(0,n.mgDebug)("Aniview AD muted."),this.apiMuteAction||this.noSoundComponent&&!this.amby.get("ad.soundButtonClicked",!1)||(this.amby.dispatch(a.upsertAdState({isUnmuteOnHover:!1,initMuted:!0})),this.amby.dispatch(a.setTriggerToTrue("player.mute")),this.amby.dispatch(a.setTriggerToTrue("ad.mute"))),this.apiMuteAction=!1,this.amby.dispatch(a.setAdMuted(!0))},this.player.onUnmute=()=>{(0,n.mgDebug)("Aniview AD unmuted."),this.apiMuteAction||this.noSoundComponent&&!this.amby.get("ad.soundButtonClicked",!1)||(this.amby.dispatch(a.upsertAdState({isUnmuteOnHover:!0,initMuted:!1})),this.amby.dispatch(a.setTriggerToTrue("player.unmute")),this.amby.dispatch(a.setTriggerToTrue("ad.unmute"))),this.apiMuteAction=!1,this.amby.dispatch(a.setAdMuted(!1));const e=this.amby.get("ad.adTag");this.updateEventStack(e,{time:(new Date).toISOString().replace("Z","MG"),adTag:e,event:"unmute",cid:this.amby.get("widgetId")})},this.player.onClick=()=>{this.amby.dispatch(a.setTriggerToTrue("ad.clicked"))},this.player.onInventory=()=>{(0,n.mgDebug)("Aniview onInventory fired."),this.amby.dispatch(a.setTriggerToTrue("ad.inventory"))},this.player.onEvent=(e,t,i)=>{if((0,n.mgDebug)(`AniView onEvent: ${e} ${t} ${JSON.stringify(i)}`),this.updateEventStack(t,{time:(new Date).toISOString().replace("Z","MG"),adTag:t,event:e,cid:this.amby.get("widgetId"),params:JSON.stringify(i)}),"startAd"===e){const e=(0,r.getInObject)(window,["_mgAdTrSrc"]);(this.verifiedSources.indexOf(t)>-1||Array.isArray(e)&&e.indexOf(t)>-1)&&(this.amby.dispatch(a.upsertAdState({adTag:t,adPlayer:1})),this.amby.dispatch(a.setAdStatus(s.states.STATUS_PLAYING)),this.amby.dispatch(a.setAdVisible(!0,this.name)))}},this.player.play(this.config)}}onResize(){if(this.player){const e=this.amby.get("ad.size",{width:300,height:169});this.player.resize(parseFloat(e.width),parseFloat(e.height))}-1===[s.states.STATUS_READY,s.states.STATUS_PLAYING,s.states.STATUS_PAUSED].indexOf(this.amby.get(`${this.name}.status`))&&(this.resizeNeeded=!0)}reset(){if(this.closed||this.closedTimeout)return;for((0,n.mgDebug)("Aniview: Deleting AD player."+(this.amby.get("ad.adTag")?` Ad source: ${this.amby.get("ad.adTag")}`:"")),this.close(),this.playerDiv||(this.playerDiv=this.rootElement.querySelector(`#${this.config.position}`));this.playerDiv.firstChild;)this.playerDiv.removeChild(this.playerDiv.firstChild);let e=document.querySelectorAll(`#AVLoader${this.config.position}`);e=Array.apply(null,e),e.forEach((e=>{e.parentNode&&e.parentNode.removeChild(e)})),this.startRequestSent=!1,this.pauseRequestSent=!1}checkMuted(){this.player.muted&&this.amby.get("ad.initMuted",!0)?(this.amby.dispatch(a.upsertAdState({initMuted:!0})),this.amby.dispatch(a.setTriggerToTrue("player.mute"))):this.amby.get("ad.initMuted",!0)&&(this.amby.dispatch(a.upsertAdState({initMuted:!1})),this.amby.dispatch(a.setTriggerToTrue("player.unmute")))}onPlayerChangedLocation(){if(this.amby.get("player.isAdPlaying",!1)&&this.player&&this.amby.get(`${this.name}.status`)===s.states.STATUS_PLAYING&&this.amby.get("formatConfig.inlinePlacement"))if(this.currentVideoElem&&this.currentVideoElem.paused){const e=this.currentVideoElem.play();void 0!==e&&e.catch((e=>{(0,n.mgDebug)(`ERROR: ${e.message}`)}))}else this.player.resume()}mute(){r.Helpers.vitalCall((()=>{this.player&&!this.player.muted&&this.player.getAdVolume()>0&&((0,n.mgDebug)("Aniview AD mute request sent."),this.apiMuteAction=!0,this.player.mute())}),this.amby.get("isVital",!0))}unmute(){this.player&&this.player.muted&&0===this.player.getAdVolume()&&((0,n.mgDebug)("Aniview AD unmute request sent."),this.apiMuteAction=!0,this.player.unmute())}close(){this.player&&((0,n.mgDebug)(`AD closing... Ad source: ${this.amby.get("ad.adTag")}`),this.amby.dispatch(a.upsertAdState({adTag:null})),this.player.close(),this.closed=!0,this.closedTimeout||(this.closedTimeout=setTimeout((()=>{(0,n.mgDebug)("AD closed."),this.closedTimeout=null,this.closed=!1,this.needToCreate&&(this.needToCreate=!1,this.createPlayer())}),3e3)))}passback(){if(this.amby.get("passback",!1)){this.amby.dispatch(a.setTriggerToTrue("ad.passback"));try{r.Helpers.createScriptAndRun(`Passback_${this.amby.get("mgVideoIndex")}`,this.amby.get("passback",!1))}catch(e){(0,n.mgDebug)(e)}}}loadAdSrcNoUiList(){const e=this.amby.get("libConfig.adSrcNoUiUrlTemplate").replace("{{DOMAIN}}",this.amby.get("subnetDomain",""));let{protocol:t}=document.location;t=0===t.indexOf("http")?t:"https:";const i=`${t}${e}`;new o.Loader({adSrcNoUi:{url:i,exists:"typeof window._mgAdSrcNoUi !== 'undefined'"}},(()=>{})).checkLoaded()}runNoCompleteInterval(){this.noCompleteTimeout||(this.noCompleteTimeout=setInterval((()=>{this.noCompleteTimeoutTimer+=1,this.noCompleteTimeoutTimer>=10*(this.player.getAdDuration()+this.noCompleteTimeoutTime)&&((0,n.mgDebug)(`noCompleteTimeout on ${this.noCompleteTimeoutTime} sec of waiting`),clearInterval(this.noCompleteTimeout),this.noCompleteTimeout=null,this.reset(),this.amby.dispatch(a.setAdStatus(s.states.STATUS_STOPPED,this.name)))}),100))}updateEventStack(e,t){this.eventStack[e]||(this.eventStack[e]=[]),this.eventStack[e].length>=20&&this.eventStack[e].shift(),this.eventStack[e].push(t)}}i.AniViewComponent=g},{"../../../redux/actionCreators":58,"../../../redux/storage":61,"../../components/noSoundComponent":13,"../../components/proxyConsoleComponent":21,"../../components/unmuteDetectComponent":24,"../../debug":30,"../../helpers":37,"../../loader":38,"./aniViewBase":39}],41:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.AniviewDirectComponent=void 0;var s=e("../../../redux/storage"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=h(t);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var n=a?Object.getOwnPropertyDescriptor(e,r):null;n&&(n.get||n.set)?Object.defineProperty(s,r,n):s[r]=e[r]}s.default=e,i&&i.set(e,s);return s}(e("../../../redux/actionCreators")),r=e("../../debug"),n=e("./aniViewBase"),o=e("../../components/noSoundComponent"),l=e("../../components/unmuteDetectComponent"),d=e("../../components/proxyConsoleComponent");function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(h=function(e){return e?i:t})(e)}class p extends n.AniviewBase{constructor(e,t){super(e,t),this.amby=e.amby,this.rootElement=e.rootElement,this.widgetBlock=document.querySelector(`[id*="ScriptRootC${this.amby.get("widgetId")}"]`);const{name:i="ad",container:s,publisherId:a,tagId:n}=t;this.rootElement=e.rootElement,this.name=i,this.playerContainerDiv=s,this.publisherId=a,this.tagId=n,this.playerId=this.playerContainerDiv.id,this.addedNodes=[];const{protocol:h}=document.location;this.protocol=0===h.indexOf("http")?h:"https:",(0,r.mgDebug)("AniViewDirectComponent initializing."),this.amby.get("formatConfig.forceMute",!1)&&(this.noSoundComponent=new o.NoSoundComponent(this.amby,{playerDiv:this.playerContainerDiv,adName:i})),this.amby.get("formatConfig.hideConsole",!1)&&-1===window.location.href.indexOf("mgwdebug")&&(this.proxyConsoleComponent=new d.ProxyConsoleComponent(this.amby,{playerDiv:this.playerContainerDiv})),this.amby.get("formatConfig.detectUnmute",!0)&&(this.unmuteDetectComponent=new l.UnmuteDetectComponent(e)),this.amby.addSubListener(`${this.name}.init`,(()=>{this.onPlayerInit()}))}onPlayerInit(){switch(this.amby.get(`${this.name}.init`)){case s.states.INIT_NEEDED:this.amby.dispatch(a.setAdInit(s.states.INIT_IN_PROGRESS,this.name)),setTimeout((()=>this.initPlayer()),0);break;case s.states.INIT_RESET:this.amby.dispatch(a.setAdInit(s.states.INIT_IN_PROGRESS,this.name)),this.initPlayer();case s.states.INIT_STOP:}}initPlayer(){if(!this.amby.get("cappingData"))return this.initRequested=!0,void(this.cappingDataListener||(this.amby.addSubListener("cappingData",(()=>{this.amby.get("cappingData")&&this.initRequested&&(this.initRequested=!1,this.initPlayer())})),this.cappingDataListener=!0));this.script||(window[`av_getPosition_${this.tagId}_${this.amby.get("widgetId")}`]||(window[`av_getPosition_${this.tagId}_${this.amby.get("widgetId")}`]=e=>(e.posType="in",this.playerContainerDiv)),this.script=document.createElement("script"),this.script.id=`AV${this.tagId}`,this.script.dataset.positionApi=`av_getPosition_${this.tagId}_${this.amby.get("widgetId")}`,this.script.async=!0,this.script.setAttribute("type","text/javascript"),this.script.src=this.getScriptUrl(),this.script.addEventListener("load",(()=>{this.onPlayerLoad()})),this.widgetBlock.parentNode.appendChild(this.script),"ad"===this.name&&(this.observer=this.getObserver((e=>{this.waitForPlaying(e)})),this.observer.observe(this.playerContainerDiv,{childList:!0,subtree:!0})),this.isInDOM()||this.amby.dispatch(a.setTriggerToTrue("widget.newBox")))}onPlayerLoad(){this.amby.dispatch(a.setAdInit(s.states.INIT_DONE,this.name)),this.amby.dispatch(a.setAdStatus(s.states.STATUS_READY,this.name)),"ad"!==this.name&&this.amby.dispatch(a.setAdStatus(s.states.STATUS_PLAYING,this.name)),setTimeout((()=>{if(this.playerContainer=this.rootElement.querySelector(`div.AV${this.tagId}`),!this.playerContainer&&(this.playerContainer=document.querySelector(`div.AV${this.tagId}`),this.playerContainer)){this.playerGUI=this.playerContainer.querySelector(".avp-p-gui");this.findCss().forEach((e=>{this.playerContainerDiv.appendChild(e.cloneNode(!0)),this.playerContainerDiv.appendChild(this.playerContainer)}))}this.amby.get("formatConfig.forceMute",!1)&&(this.soundDirectButton=this.playerContainerDiv.querySelector("div.avp-p-cn-s.avp-btn"),this.soundDirectButton&&this.soundDirectButton.addEventListener("click",(()=>{this.amby.dispatch(a.upsertAdState({initMuted:!this.amby.get("ad.initMuted",!0)}))}))),this.directCloseButton=this.playerContainerDiv.querySelector("avp-close-button.avp-close-button"),this.directCloseButton&&this.directCloseButton.addEventListener("click",(()=>{this.amby.dispatch(a.setAdStatus(s.states.STATUS_STOPPED))}))}),1e3),this.playerContainerDiv.addEventListener("transitionend",(()=>{let e=this.rootElement.querySelector("#aniBox>div");e||(e=document.querySelector("#aniBox>div")),e&&(e.style.height=`${this.amby.get("ad.size.height")}px`)})),this.amby.addSubListener("player.isSticky",(()=>{let e=this.rootElement.querySelector("#aniBox>div");e||(e=document.querySelector("#aniBox>div")),this.amby.get("player.isSticky",!1)?setTimeout((()=>{e&&(e.style.height=`${this.amby.get("ad.size.height")}px`)}),50):setTimeout((()=>{e&&e.style.removeProperty("height")}),50)}))}getObserver(e){return new MutationObserver((t=>{t.forEach((t=>{if("childList"===t.type&&t.addedNodes.length){const i=Array.prototype.slice.call(t.addedNodes);this.addedNodes.push(i),e(i)}}))}))}waitForPlaying(e){e.forEach((e=>{if("VIDEO"===e.tagName)e.addEventListener("playing",(()=>{this.amby.dispatch(a.setAdStatus(s.states.STATUS_PLAYING,this.name)),this.observer.disconnect()}));else if(e.querySelectorAll&&e.querySelectorAll("video")){const t=e.querySelectorAll("video");for(let e=0;e<t.length;e++)t[e].addEventListener("playing",(()=>{this.amby.dispatch(a.setAdStatus(s.states.STATUS_PLAYING,this.name)),this.observer.disconnect()}))}}))}isInDOM(){let e=this.playerContainerDiv;for(;e!==document&&e.parentNode;)e=e.parentNode;return e===document}findCss(){if(!this.playerGUI)return[];const e=[],t=document.styleSheets;this.playerGUI.matches=this.playerGUI.matches||this.playerGUI.webkitMatchesSelector||this.playerGUI.mozMatchesSelector||this.playerGUI.msMatchesSelector||this.playerGUI.oMatchesSelector;for(let i=0;i<t.length;i++)if("STYLE"===t[i].ownerNode.tagName){const s=t[i].rules||t[i].cssRules;for(let a=0;a<s.length;a++)if(this.playerGUI.matches(s[a].selectorText)){e.push(t[i].ownerNode);break}}return e}getScriptUrl(){return`${this.protocol}//tg1.aniview.com/api/adserver/spt?AV_TAGID=${this.tagId}&AV_PUBLISHERID=${this.publisherId}&${this.getRef1()}`}}i.AniviewDirectComponent=p},{"../../../redux/actionCreators":58,"../../../redux/storage":61,"../../components/noSoundComponent":13,"../../components/proxyConsoleComponent":21,"../../components/unmuteDetectComponent":24,"../../debug":30,"./aniViewBase":39}],42:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.CustomEngine=void 0;var s=e("../../../redux/storage"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=o(t);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var n=a?Object.getOwnPropertyDescriptor(e,r):null;n&&(n.get||n.set)?Object.defineProperty(s,r,n):s[r]=e[r]}s.default=e,i&&i.set(e,s);return s}(e("../../../redux/actionCreators")),r=e("../../debug"),n=e("../../helpers");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(o=function(e){return e?i:t})(e)}i.CustomEngine=class{constructor(e,t){this.amby=e.amby;const{name:i="ad",container:s,adSource:a}=t;this.adSource=a,this.name=i,this.playerContainerDiv=s,this.addedNodes=[],this.amby.addSubListener(`${this.name}.init`,(()=>{this.onPlayerInit()}))}onPlayerInit(){switch(this.amby.get(`${this.name}.init`)){case s.states.INIT_NEEDED:this.amby.dispatch(a.setAdInit(s.states.INIT_IN_PROGRESS,this.name)),setTimeout((()=>this.initPlayer()),0);break;case s.states.INIT_RESET:this.amby.dispatch(a.setAdInit(s.states.INIT_IN_PROGRESS,this.name)),this.initPlayer();case s.states.INIT_STOP:}}initPlayer(){if(n.Helpers.addClass(this.playerContainerDiv.parentElement,"noanim"),this.adSource){this.adSource=decodeURIComponent(this.adSource).replace(/\+/g," "),this.script=document.createElement("script");try{const[,e]=this.adSource.match(/render *\(['|"](\S+)['|"]\)/);this.script.id=e}catch(e){(0,r.mgDebug)(`Unsuccessful parsing id tag: ${e}`)}this.script.async=!0,this.script.setAttribute("type","text/javascript"),this.script.innerHTML=this.adSource,this.playerContainerDiv.appendChild(this.script),(0,r.mgDebug)("onPlayerLoad load"),this.onPlayerLoad()}"ad"===this.name&&(this.observer=this.getObserver((e=>{this.waitForPlaying(e)})),this.observer.observe(this.playerContainerDiv,{childList:!0,subtree:!0}))}waitForPlaying(e){e.forEach((e=>{if("VIDEO"===e.tagName)e.addEventListener("playing",(()=>{this.amby.dispatch(a.setAdStatus(s.states.STATUS_PLAYING,this.name)),this.observer.disconnect()}));else if(e.querySelectorAll&&e.querySelectorAll("video")){const t=e.querySelectorAll("video");for(let e=0;e<t.length;e++)t[e].addEventListener("playing",(()=>{this.amby.dispatch(a.setAdStatus(s.states.STATUS_PLAYING,this.name)),this.observer.disconnect()}));const i=e.querySelectorAll("img");for(let e=0;e<i.length;e++)i[e].complete?(this.amby.dispatch(a.setAdStatus(s.states.STATUS_PLAYING,this.name)),this.observer.disconnect()):i[e].addEventListener("load",(()=>{this.amby.dispatch(a.setAdStatus(s.states.STATUS_PLAYING,this.name)),this.observer.disconnect()}))}}))}getObserver(e){return new MutationObserver((t=>{t.forEach((t=>{if("childList"===t.type&&t.addedNodes.length){const i=Array.prototype.slice.call(t.addedNodes);this.addedNodes.push(i),e(i)}}))}))}onPlayerLoad(){this.amby.dispatch(a.setAdInit(s.states.INIT_DONE,this.name)),this.amby.dispatch(a.setAdStatus(s.states.STATUS_READY,this.name)),"ad"!==this.name&&this.amby.dispatch(a.setAdStatus(s.states.STATUS_PLAYING,this.name))}}},{"../../../redux/actionCreators":58,"../../../redux/storage":61,"../../debug":30,"../../helpers":37}],43:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ExcoComponent=void 0;var s=e("../../../redux/storage"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=n(t);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=a?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(s,r,o):s[r]=e[r]}s.default=e,i&&i.set(e,s);return s}(e("../../../redux/actionCreators")),r=e("../../debug");function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(n=function(e){return e?i:t})(e)}i.ExcoComponent=class{constructor(e,t){this.amby=e.amby;const{name:i="ad",container:s,adSource:a}=t;this.rootElement=e.rootElement,this.name=i,this.playerContainerDiv=s,this.adSource=a,this.playerId=this.playerContainerDiv.id;const{protocol:n}=document.location;this.protocol=0===n.indexOf("http")?n:"https:",(0,r.mgDebug)("ExCoComponent initializing."),this.amby.addSubListener(`${this.name}.init`,(()=>{this.onPlayerInit()}))}onPlayerInit(){switch(this.amby.get(`${this.name}.init`)){case s.states.INIT_NEEDED:this.amby.dispatch(a.setAdInit(s.states.INIT_IN_PROGRESS,this.name)),setTimeout((()=>this.initPlayer()),0);break;case s.states.INIT_RESET:this.amby.dispatch(a.setAdInit(s.states.INIT_IN_PROGRESS,this.name)),this.reset(),this.initPlayer();break;case s.states.INIT_STOP:this.reset()}}initPlayer(){if(this.amby.dispatch(a.setAdStatus(s.states.STATUS_INIT,this.name)),!this.script){const e=document.createElement("div");e.id=this.adSource,this.playerContainerDiv.appendChild(e),this.script=document.createElement("script"),this.script.setAttribute("type","text/javascript"),this.script.className="exco-player",this.script.src=`${this.protocol}//player.ex.co/player/${this.adSource}`;const t=document.getElementsByName("script");t&&t.length>0?t[0].parentNode.insertBefore(this.script,t[0]):document.head.insertBefore(this.script,document.head.firstChild),this.addPlayerListeners()}}addPlayerListeners(){window.addEventListener("message",(e=>{if("exco-event"===e.data.type)switch(e.data.name){case"player-load":this.amby.dispatch(a.upsertState({[this.name]:{adTag:e.data.metadata.playerId}})),this.amby.dispatch(a.setAdInit(s.states.INIT_DONE,this.name)),this.amby.dispatch(a.setAdStatus(s.states.STATUS_READY,this.name)),this.amby.get("ad.visible",!1)||this.amby.dispatch(a.setAdStatus(s.states.STATUS_PLAYING,this.name));break;case"ad-impression":case"ad-completed":case"cta-clicked":case"player-closed":case"player-muted":case"player-unmuted":break;case"player-playing":this.amby.dispatch(a.setAdStatus(s.states.STATUS_PLAYING,this.name));break;case"player-paused":this.amby.dispatch(a.setAdStatus(s.states.STATUS_PAUSED,this.name))}}))}reset(){this.amby.dispatch(a.upsertAdState({adTag:null,adHash:null}))}}},{"../../../redux/actionCreators":58,"../../../redux/storage":61,"../../debug":30}],44:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ImaSdkComponent=void 0;var s=e("../../../redux/storage"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=d(t);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var n=a?Object.getOwnPropertyDescriptor(e,r):null;n&&(n.get||n.set)?Object.defineProperty(s,r,n):s[r]=e[r]}s.default=e,i&&i.set(e,s);return s}(e("../../../redux/actionCreators")),r=e("../../debug"),n=e("../../components/noSoundComponent"),o=e("../../helpers"),l=e("../../loader");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(d=function(e){return e?i:t})(e)}const h="mgImaSdkLib";i.ImaSdkComponent=class{constructor(e,t){this.amby=e.amby;const{name:i="ad",adSource:l,adResponse:d,playerDivId:h,playerDiv:p=null,requestsLimit:m}=t;this.inited=!1,this.name=i,this.playerDivId=h,this.adSource=l,this.adResponse=d,this.requestsLimit=parseInt(m,10)||3,this.requestsNumber=0,this.previousHeight=null,this.playerDiv=p||e.rootElement.querySelector(`#${this.playerDivId}`),this.amby.get("formatConfig.forceMute",!1)&&(this.noSoundComponent=new n.NoSoundComponent(this.amby,{playerDiv:this.playerDiv,adName:i})),this.amby.dispatch(a.setAdInit(null,this.name)),this.amby.addSubListener(`${this.name}.init`,(()=>{[s.states.INIT_NEEDED,s.states.INIT_RESET].indexOf(this.amby.get(`${this.name}.init`))>-1&&(0,r.mgDebug)("Ad starts search."),o.Helpers.vitalCall((()=>this.initPlayer()),this.amby.get("isVital",!0))})),this.amby.addTriggerListener(`${this.name}.actionPlay`,(()=>{if((0,r.mgDebug)("IMA SDK: actionPlay"),this.adsManager){this.apiAction=!0;const e=this.amby.get(`${this.name}.status`);e&&e===s.states.STATUS_PLAYING||(e&&e!==s.states.STATUS_READY?this.adsManager.resume():this.start())}else this.playRequested=!0})),this.amby.addTriggerListener(`${this.name}.actionPause`,(()=>{const e=this.amby.get(`${this.name}.status`);this.adsManager&&this.adsManager.getCurrentAd()&&-1===[s.states.STATUS_PAUSED,s.states.STATUS_READY].indexOf(e)&&this.adsManager.pause()})),this.amby.addTriggerListener(`${this.name}.actionStop`,(()=>{this.adsManager&&this.adsManager.stop()})),this.amby.addTriggerListener(`${this.name}.actionClose`,(()=>{this.amby.dispatch(a.setAdVisible(!1,this.name)),this.skip()})),this.amby.addTriggerListener(`${this.name}.actionSkip`,(()=>{this.amby.dispatch(a.setAdVisible(!1,this.name)),this.skip()})),this.amby.addTriggerListener("ad.mute",(()=>{this.mute()})),this.amby.addTriggerListener("ad.unmute",(()=>{this.unmute()})),this.amby.addTriggerListener("ad.resize",(()=>{this.onResize()}))}initPlayer(){switch(this.amby.get(`${this.name}.init`)){case s.states.INIT_NEEDED:this.amby.dispatch(a.setAdInit(s.states.INIT_IN_PROGRESS,this.name)),document.getElementById(h)?window.google&&window.google.ima?this.amby.dispatch(a.setAdInit(s.states.INIT_RESET,this.name)):document.getElementById(h).addEventListener("load",(()=>{this.initScript(),this.amby.dispatch(a.setAdInit(s.states.INIT_DONE,this.name)),this.inited=!0})):this.addScript();break;case s.states.INIT_RESET:this.amby.dispatch(a.setAdInit(s.states.INIT_IN_PROGRESS,this.name)),this.reset(),this.createPlayer();break;case s.states.INIT_STOP:this.reset()}}addScript(){let{protocol:e}=document.location;e=0===e.indexOf("http")?e:"https:";new l.Loader({imaSdk:{url:this.amby.get("ad.playerUrl")||`${e}//imasdk.googleapis.com/js/sdkloader/ima3${window.location.href.indexOf("mgwdebug")>-1?"_debug":""}.js`,exists:"typeof window.google !== 'undefined' && typeof window.google.ima !== 'undefined'"}},(()=>{this.initScript(),this.amby.dispatch(a.setAdInit(s.states.INIT_DONE,this.name)),this.inited=!0,this.createPlayer()})).checkLoaded()}initScript(){this.ima=(0,o.getInObject)(window,["google","ima"]),this.ima?(this.videoContent=document.createElement("video"),this.videoContent.style.height="100%",this.videoContent.style.width="100%",this.videoContent.style.zIndex="-1",this.videoContent.style.position="absolute",this.videoContent.style.left="0",this.videoContent.style.top="0",this.videoContent.setAttribute("playsinline","true"),this.videoContent.setAttribute("webkit-playsinline","true"),this.playerDiv.appendChild(this.videoContent),this.adDisplayContainer=new this.ima.AdDisplayContainer(this.playerDiv,this.videoContent),this.adDisplayContainer.initialize(),this.adsLoader=new this.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.getSettings().setVpaidMode(this.ima.ImaSdkSettings.VpaidMode.INSECURE),this.renderingSettings=new this.ima.AdsRenderingSettings,this.renderingSettings.useStyledNonLinearAds=!0,this.renderingSettings.restoreCustomPlaybackStateOnAdBreakComplete=!1,this.renderingSettings.loadVideoTimeout=6e4,this.renderingSettings.enablePreloading=!0,this.adsLoader.addEventListener(this.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(e=>{(0,r.mgDebug)("IMA SDK manager loaded."),this.adsManager=e.getAdsManager({currentTime:0},this.renderingSettings),this.onAdManagerLoaded(),this.amby.dispatch(a.setAdStatus(s.states.STATUS_READY,this.name))}),!1),this.adsLoader.addEventListener(this.ima.AdErrorEvent.Type.AD_ERROR,(e=>{this.onAdError(e)}),!1)):(0,r.mgDebug)("IMA SDK ERROR: there is no IMA.")}onAdManagerLoaded(){this.adsManager.addEventListener(this.ima.AdErrorEvent.Type.AD_ERROR,(e=>{this.onAdError(e)})),this.adsManager.addEventListener(this.ima.AdEvent.Type.LOADED,(e=>{(0,r.mgDebug)("IMA SDK ads loaded."),e.getAd&&e.getAd()&&(e.getAd().getDuration&&e.getAd().getDuration()&&(this.amby.dispatch(a.upsertAdState({position:0,duration:e.getAd().getDuration()})),"ad"!==this.name&&this.amby.dispatch(a.upsertState({position:0,duration:e.getAd().getDuration()}))),e.getAd().isLinear&&this.amby.dispatch(a.upsertState({[this.name]:{isLinear:e.getAd().isLinear()}}))),this.amby.dispatch(a.setAdStatus(s.states.STATUS_READY,this.name)),this.playRequested&&this.adsManager&&(this.start(),this.playRequested=!1),this.resizeNeeded&&this.onResize()})),this.adsManager.addEventListener(this.ima.AdEvent.Type.STARTED,(()=>{(0,r.mgDebug)("IMA SDK ads started."),this.adsManager.getCurrentAd&&this.adsManager.getCurrentAd()&&this.adsManager.getCurrentAd().getDuration&&this.adsManager.getCurrentAd().getDuration()&&this.amby.dispatch(a.upsertAdState({position:0,duration:this.adsManager.getCurrentAd().getDuration()})),this.onResize(),this.amby.dispatch(a.setAdStatus(s.states.STATUS_PLAYING,this.name))})),this.adsManager.addEventListener(this.ima.AdEvent.Type.PAUSED,(()=>{this.amby.dispatch(a.setAdStatus(s.states.STATUS_PAUSED,this.name))})),this.adsManager.addEventListener(this.ima.AdEvent.Type.RESUMED,(()=>{this.amby.dispatch(a.setAdStatus(s.states.STATUS_PLAYING,this.name))})),this.adsManager.addEventListener(this.ima.AdEvent.Type.IMPRESSION,(()=>{(0,r.mgDebug)("IMA SDK ads impression."),this.amby.dispatch(a.setTriggerToTrue(`${this.name}.impression`))})),this.adsManager.addEventListener(this.ima.AdEvent.Type.SKIPPED,(()=>{(0,r.mgDebug)("IMA SDK Skipped"),setTimeout((()=>{this.adsManager.destroy()}),400),this.amby.dispatch(a.setTriggerToTrue(`${this.name}.skip`)),this.amby.dispatch(a.setAdStatus(s.states.STATUS_STOPPED,this.name))})),this.adsManager.addEventListener(this.ima.AdEvent.Type.USER_CLOSE,(()=>{(0,r.mgDebug)("IMA SDK user close"),setTimeout((()=>{this.adsManager.destroy()}),400),this.amby.dispatch(a.setTriggerToTrue(`${this.name}.complete`)),this.amby.dispatch(a.setAdStatus(s.states.STATUS_STOPPED,this.name))})),this.adsManager.addEventListener(this.ima.AdEvent.Type.COMPLETE,(()=>{(0,r.mgDebug)("IMA SDK complete"),this.amby.dispatch(a.setTriggerToTrue(`${this.name}.complete`))})),this.adsManager.addEventListener(this.ima.AdEvent.Type.ALL_ADS_COMPLETED,(()=>{(0,r.mgDebug)("IMA SDK ALL complete"),setTimeout((()=>{this.adsManager.destroy()}),400),this.amby.dispatch(a.setAdStatus(s.states.STATUS_STOPPED,this.name))})),this.adsManager.addEventListener(this.ima.AdEvent.Type.CLICK,(()=>{this.amby.dispatch(a.setTriggerToTrue(`${this.name}.clicked`))})),this.adsManager.addEventListener(this.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,(()=>{this.amby.dispatch(a.setAdStatus(s.states.STATUS_READY,this.name))})),this.adsManager.addEventListener(this.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,(()=>{this.adsManager.destroy(),this.amby.dispatch(a.setAdStatus(s.states.STATUS_STOPPED,this.name))})),this.adsManager.addEventListener(this.ima.AdEvent.Type.FIRST_QUARTILE,(()=>{this.amby.dispatch(a.upsertAdState({position:Math.ceil(this.amby.get("ad.duration")/4)}))})),this.adsManager.addEventListener(this.ima.AdEvent.Type.MIDPOINT,(()=>{this.amby.dispatch(a.upsertAdState({position:Math.ceil(this.amby.get("ad.duration")/2)}))})),this.adsManager.addEventListener(this.ima.AdEvent.Type.THIRD_QUARTILE,(()=>{this.amby.dispatch(a.upsertAdState({position:this.amby.get("ad.duration")/4*3}))})),this.adsManager.addEventListener(this.ima.AdEvent.Type.VOLUME_CHANGED,(e=>{e.getAd&&e.getAd()&&e.getAd().g&&e.getAd().g.volume?this.amby.dispatch(a.setAdMuted(!1)):this.amby.dispatch(a.setAdMuted(!0))})),this.adsManager.addEventListener(this.ima.AdEvent.Type.AD_PROGRESS,(e=>{e.getAdData&&e.getAdData()&&this.amby.dispatch(a.upsertState({[this.name]:{position:e.getAdData().currentTime}}))})),this.adsManager.addEventListener(this.ima.AdEvent.Type.LINEAR_CHANGED,(e=>{e.getAd&&e.getAd()&&this.amby.dispatch(a.upsertState({[this.name]:{isLinear:e.getAd().isLinear()}}))})),this.adsManager.addEventListener(this.ima.AdEvent.Type.LOG,(e=>{this.amby.dispatch(a.upsertState({[this.name]:{logMessage:e.toString()}}))}))}createPlayer(){(0,r.mgDebug)("Creating new IMA SDK request."),this.amby.dispatch(a.setAdStatus(s.states.STATUS_INIT,this.name)),this.requestsNumber+=1,this.adsLoader.requestAds(this.getRequest())}start(){try{const e=this.amby.get("ad.size",{width:300,height:169});this.adsManager.init(e.width,e.height,this.ima.ViewMode.NORMAL),(0,r.mgDebug)("IMA SDK initialising ad...")}catch(e){(0,r.mgDebug)(e.getError()),this.amby.dispatch(a.upsertAdState({errorMessage:`${e.getError().getErrorCode()} ${e.getError().getMessage()}`})),"ad"!==this.name&&this.amby.dispatch(a.upsertState({[this.name]:{errorMessage:`${e.getError().getErrorCode()} ${e.getError().getMessage()}`}}))}(this.amby.get("ad.initMuted",!0)||o.Helpers.iOSversion())&&this.mute(),o.Helpers.iOSversion()&&this.amby.dispatch(a.upsertState({player:{muted:!0}})),this.adsManager.start(),(0,r.mgDebug)("IMA SDK start ad...")}reset(){(0,r.mgDebug)("IMA SDK: Deleting AD player."),this.close(),this.adsManager&&this.adsManager.destroy(),this.requestsNumber=0}mute(){this.amby.dispatch(a.upsertState({rawPhase:9,widget:{rawplayer:!0}})),o.Helpers.vitalCall((()=>{this.adsManager&&((0,r.mgDebug)("IMA SDK: AD mute request sent."),this.adsManager.setVolume(0),this.amby.dispatch(a.setAdMuted(!0)),this.amby.dispatch(a.upsertState({muteBtn:{muted:!0}})))}),this.amby.get("isVital",!0))}unmute(){this.adsManager&&((0,r.mgDebug)("IMA SDK: AD unmute request sent."),this.adsManager.setVolume(1),this.amby.dispatch(a.setAdMuted(!1)),this.amby.dispatch(a.upsertState({muteBtn:{muted:!1}})))}close(){this.adsManager&&this.adsManager.stop()}skip(){this.adsManager&&(this.adsManager.getAdSkippableState()?this.adsManager.skip():this.adsManager.stop())}onResize(){if(this.adsManager&&this.adsManager.getCurrentAd()){const e=this.amby.get("ad.size",{width:300,height:169});this.adsManager.resize(e.width,e.height,this.ima.ViewMode.NORMAL);const t=this.playerDiv.querySelector("iframe");if(t){const{display:e}=t.style;t.style.display="none",this.previousHeight=t.offsetHeight,t.style.display=e}}-1===[s.states.STATUS_READY,s.states.STATUS_PLAYING,s.states.STATUS_PAUSED].indexOf(this.amby.get(`${this.name}.status`))&&(this.resizeNeeded=!0)}getRequest(){this.adsRequest=new this.ima.AdsRequest,this.adResponse?this.adsRequest.adsResponse=this.adResponse:this.adsRequest.adTagUrl=this.adSource.replace(/^(http:\/\/|\/\/)/,"https://");const e=this.amby.get("ad.size",{width:300,height:169});return this.adsRequest.linearAdSlotWidth=e.width,this.adsRequest.linearAdSlotHeight=e.height,this.adsRequest.nonLinearAdSlotWidth=e.width,this.adsRequest.nonLinearAdSlotHeight=e.height,this.adsRequest.contentDuration=0,this.adsRequest.vastLoadTimeout=15e3,this.adsRequest}onAdError(e){(0,r.mgDebug)(e.getError()),this.amby.dispatch(a.upsertAdState({errorMessage:`${e.getError().getErrorCode()} ${e.getError().getMessage()}`})),"ad"!==this.name&&this.amby.dispatch(a.upsertState({[this.name]:{errorMessage:`${e.getError().getErrorCode()} ${e.getError().getMessage()}`}})),this.adsManager&&this.adsManager.destroy(),this.requestsLimit>this.requestsNumber?(this.requestsNumber+=1,setTimeout((()=>{this.adsLoader.requestAds(this.getRequest())}),500)):this.amby.dispatch(a.setAdStatus(s.states.STATUS_ERROR,this.name))}}},{"../../../redux/actionCreators":58,"../../../redux/storage":61,"../../components/noSoundComponent":13,"../../debug":30,"../../helpers":37,"../../loader":38}],45:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.MgAdPlayerComponent=void 0;var s=e("../../../redux/storage"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=l(t);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var n=a?Object.getOwnPropertyDescriptor(e,r):null;n&&(n.get||n.set)?Object.defineProperty(s,r,n):s[r]=e[r]}s.default=e,i&&i.set(e,s);return s}(e("../../../redux/actionCreators")),r=e("../../helpers"),n=e("../../debug"),o=e("../mgPlayer");function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(l=function(e){return e?i:t})(e)}const d="playing",h="paused",p="buffering",m="idle",c="hover",g="hidden";i.MgAdPlayerComponent=class{constructor(e,t){this.amby=e.amby;const{name:i="ad",container:o,mgsetup:l,quality:u,adPlaylist:y}=t;if(this.rootElement=e.rootElement,this.name=i,this.playerContainerDiv=o,this.config=l||{},this.playerId=this.playerContainerDiv.id,this.aspectRatio=this.amby.get("player.aspectratio"),!Array.isArray(y))return(0,n.mgDebug)("adPlaylist is not an array"),this.amby.dispatch(a.upsertAdState({errorMessage:"adPlaylist is not an array"})),void this.amby.dispatch(a.setAdStatus(s.states.STATUS_ERROR,this.name));this.playlist=[],y.forEach((e=>{this.playlist.push({file:"original"===u?e.link:e.link.replace(/^([^?]+?)(_360)?\.(mp4|webm)($|\?)/i,"$1_360.$3$4"),image:e.img,title:e.title,mediaid:e.id,hash:e.hash,videoExt:JSON.parse(atob(e.videoExt))})}));const b={playButton:c,startButton:g,nextButton:g,time:c,timeline:c,hdButton:g,muteButton:"visible",closeButton:g,expandButton:g,leftButton:g,rightButton:g};this.config&&this.config.buttonSettings?this.config.buttonSettings=r.Helpers.mergeObjects(b,this.config.buttonSettings):this.config.buttonSettings=b,this.currentPosition=0,this.amby.addSubListener(`${this.name}.init`,(()=>{this.onPlayerInit()})),this.amby.addTriggerListener(`${this.name}.mute`,(()=>{this.player&&this.player.setMute(!0)})),this.amby.addTriggerListener(`${this.name}.unmute`,(()=>{this.player&&this.player.setMute(!1)})),this.amby.addTriggerListener(`${this.name}.resize`,(()=>{this.onPlayerResize()})),this.amby.addTriggerListener(`${this.name}.actionPlay`,(()=>{this.player&&-1===[d,p].indexOf(this.player.getState())?this.player.play():this.playRequested=!0})),this.amby.addTriggerListener(`${this.name}.actionPause`,(()=>{this.player&&-1===[h,m].indexOf(this.player.getState())&&this.player.pause()})),this.amby.addTriggerListener(`${this.name}.actionStop`,(()=>{this.player&&-1===[h,m].indexOf(this.player.getState())&&(this.player.pause(),this.reset()),this.amby.dispatch(a.setAdStatus(s.states.STATUS_STOPPED,this.name))})),this.amby.addSubListener("popup.visible",(()=>{this.onPlayerChangedLocation()})),this.amby.get("formatConfig.moveToBody",!1)&&this.amby.addSubListener("player.isSticky",(()=>{this.onPlayerChangedLocation()})),this.observer=r.Helpers.onVisible(this.playerContainerDiv,(e=>{e||this.amby.get("player.isSticky",!1)?this.amby.dispatch(a.setPlayerInSight(!0)):this.amby.dispatch(a.setPlayerInSight(!1))}),this.amby.get("formatConfig.visiblePart",.9),this.amby.get("formatConfig.hiddenPart")),this.viewableObserver=new IntersectionObserver((e=>{e.forEach((e=>{this.amby.dispatch(a.upsertState({[this.name.toString()]:{viewable:e.isIntersecting}}))}))}),{threshold:[.5]}),this.viewableObserver.observe(this.playerContainerDiv)}onPlayerInit(){switch(this.amby.get(`${this.name}.init`)){case s.states.INIT_NEEDED:this.amby.dispatch(a.setAdInit(s.states.INIT_IN_PROGRESS,this.name)),r.Helpers.vitalCall((()=>this.initPlayer()),this.amby.get("isVital",!0));break;case s.states.INIT_RESET:this.amby.dispatch(a.setAdInit(s.states.INIT_IN_PROGRESS,this.name)),this.reset(),this.initPlayer();break;case s.states.INIT_STOP:this.reset()}}onPlayerResize(e=!1){const t=this.amby.get("ad.size");this.player&&(t?this.player.resize(t.width,t.height,this.aspectRatio):this.player.resize()),r.Helpers.isIE()&&!e&&setTimeout((()=>{this.onPlayerResize(!0)}),1200)}initPlayer(){this.amby.dispatch(a.setAdStatus(s.states.STATUS_INIT,this.name));const e=this.amby.get("formatConfig.staticRoot")||`video-native.${this.amby.get("subnetDomain","")}`,t=this.amby.get("libConfig.mgPlayerStylesUrlTemplate").replace("{{DOMAIN}}",e),i=this.amby.get("ad.initMuted",!0);this.player=new o.MgPlayer(this.playerId,this.rootElement),this.player.setup(r.Helpers.mergeObjects({autostart:!1,repeat:!1,mute:i,playlist:[],stylePath:t,seekable:!1,displayClickDefaultAction:!1,preload:"metadata"},this.config)),this.addPlayerListeners()}addPlayerListeners(){this.player.on("ready",(()=>{r.Helpers.vitalCall((()=>{r.Helpers.repaintSafari()}),this.amby.get("isVital",!0)),this.player&&this.player.load(this.playlist)})),this.player.on("playlist",(()=>{this.impressions=0,this.amby.dispatch(a.setAdInit(s.states.INIT_DONE)),this.amby.dispatch(a.setAdStatus(s.states.STATUS_READY,this.name)),this.playRequested&&this.player.play()})),this.player.on("displayClick",(()=>{if(this.amby.dispatch(a.setTriggerToTrue("ad.clicked")),this.amby.get("ad.adClickUrl")){const e=r.Helpers.fromAscii(this.amby.get("ad.adClickUrl")),t=window.open(e,"_blank");t&&(t.focus(),this.amby.dispatch(a.setTriggerToTrue("ad.actionPause")))}})),this.player.on("play",(e=>{this.amby.dispatch(a.setAdStatus(s.states.STATUS_PLAYING,this.name)),"interaction"===e.playReason&&(this.amby.dispatch(a.upsertPlayerState({isPlayingOnVisible:!0})),this.amby.dispatch(a.setTriggerToTrue("ad.userPlay")))})),this.player.on("pause",(e=>{(0,n.mgDebug)(`Player Pause Event ${e.pauseReason}`),"interaction"===e.pauseReason&&(this.amby.dispatch(a.upsertPlayerState({isPlayingOnVisible:!1})),this.amby.dispatch(a.setTriggerToTrue("ad.userPause"))),this.amby.dispatch(a.setAdStatus(s.states.STATUS_PAUSED,this.name))})),this.player.on("error",(e=>{this.amby.dispatch(a.setAdStatus(s.states.STATUS_ERROR,this.name)),(0,n.mgDebug)(e)})),this.player.on("complete",(()=>{this.impressions>=this.playlist.length&&(this.reset(),this.amby.dispatch(a.setAdStatus(s.states.STATUS_STOPPED,this.name)))})),this.player.on("mute",(e=>{this.amby.get("player.isControlsVisible",!1)&&(e.mute?(this.amby.dispatch(a.upsertAdState({initMuted:!0})),this.amby.dispatch(a.setTriggerToTrue("ad.userMute"))):(this.amby.dispatch(a.upsertAdState({initMuted:!1})),this.amby.dispatch(a.setTriggerToTrue("ad.userUnmute")))),this.amby.dispatch(a.setAdMuted(e.mute))})),this.player.on("playlistItem",(e=>{this.amby.dispatch(a.upsertAdState({adTag:this.playlist[e.index].mediaid,videoUrl:this.playlist[e.index].file,adPlayer:2,adClickUrl:(0,r.getInObject)(this.playlist[e.index],["videoExt","clickUrl"]),adHash:this.playlist[e.index].hash}))})),this.player.on("time",(e=>{e.position-this.currentPosition>1&&(this.currentPosition=Math.floor(e.position),this.amby.dispatch(a.upsertAdState({position:this.currentPosition})))})),this.player.on("firstFrame",(()=>{this.currentPosition=0,this.impressions+=1,this.player.setControls(!0),this.amby.dispatch(a.upsertAdState({duration:this.player.getDuration(),complete:!1})),this.amby.dispatch(a.setTriggerToTrue("ad.impression"))})),this.player.on("beforeComplete",(()=>{this.amby.dispatch(a.upsertAdState({complete:!0}))}))}onPlayerChangedLocation(){this.amby.get("player.isAdPlaying",!1)&&this.player&&this.amby.get("ad.status")===s.states.STATUS_PLAYING&&this.amby.get("formatConfig.inlinePlacement")&&setTimeout((()=>{this.player.play()}),0)}reset(){for((0,n.mgDebug)("mgAdPlayer: Deleting AD player."+(this.amby.get("ad.adTag")?` Ad source: ${this.amby.get("ad.adTag")}`:"")),this.amby.dispatch(a.upsertAdState({adTag:null,adHash:null}));this.playerContainerDiv&&this.playerContainerDiv.firstChild;)this.playerContainerDiv.removeChild(this.playerContainerDiv.firstChild);delete this.player}}},{"../../../redux/actionCreators":58,"../../../redux/storage":61,"../../debug":30,"../../helpers":37,"../mgPlayer":56}],46:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Vast=void 0;var s=e("../../../redux/storage"),a=e("../../helpers"),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=o(t);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var n=a?Object.getOwnPropertyDescriptor(e,r):null;n&&(n.get||n.set)?Object.defineProperty(s,r,n):s[r]=e[r]}s.default=e,i&&i.set(e,s);return s}(e("../../../redux/actionCreators")),n=e("./mgAdPlayerComponent");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(o=function(e){return e?i:t})(e)}const l="AdStarted",d="AdStopped",h="AdSkipped",p="AdLoaded",m="AdSkippableStateChange",c="AdDurationChange",g="AdRemainingTimeChange",u="AdVolumeChange",y="AdImpression",b="AdClickThru",f="AdVideoStart",v="AdVideoFirstQuartile",S="AdVideoMidpoint",_="AdVideoThirdQuartile",C="AdVideoComplete",T="AdPaused",w="AdPlaying",P="AdError",A="impression",k="click",x="error",D="start",I="firstQuartile",E="midpoint",O="thirdQuartile",L="complete",M="pause",R="resume",B="skip",N="viewable_impression";i.Vast=class{constructor(e="vast"){this.adCompanions="",this.adDuration=1,this.adExpanded=!1,this.adHeight=0,this.adIcons=!1,this.adLinear=!0,this.adRemainingTime=0,this.adSkippableState=!1,this.adVolume=0,this.adWidth=0,this.eventListeners={},this.firstTimePlay=!0,this.skipOffset=5,this.skipOffsetText="Skip in %s",this.protocol="https:",this.viewableImpressionSent=!1,this.silentMode=!1,this.amby=(0,s.createAmby)(e),(a.Helpers.getUrlParam("mgwteaser")||a.Helpers.getUrlParam("mgwcampaign"))&&(this.silentMode=!0),this.setCallbacksForCreative()}setCallbacksForCreative(){this.amby.addSubListener("ad.status",(()=>{switch(this.amby.get("ad.status")){case s.states.STATUS_READY:if((0,a.getInObject)(this.playerComponent,["player","video","duration"])>this.adDuration&&(this.adDuration=this.playerComponent.player.video.duration),this.parameters.enableDurationBalancer&&this.parameters.contentVideoDurationLimit<parseInt(this.getAdDuration().toString(),10))return void this.stopAd();this.triggerEvent(p);break;case s.states.STATUS_PLAYING:this.amby.get("ad.viewable",!1)&&(this.clearViewableTimeout(),this.viewableTimeout=window.setTimeout((()=>{this.viewableImpressionSent||(this.viewableImpressionSent=!0,this.sendTracking(N,!0))}),2e3)),this.firstTimePlay?(this.sendTracking(D),this.triggerEvent(l),this.triggerEvent(f),this.firstTimePlay=!1):(this.sendTracking(R),this.triggerEvent(w));break;case s.states.STATUS_PAUSED:this.clearViewableTimeout(),this.sendTracking(M),this.triggerEvent(T);break;case s.states.STATUS_STOPPED:this.clearViewableTimeout(),this.triggerEvent(d);break;case s.states.STATUS_ERROR:this.clearViewableTimeout(),this.sendTracking(x,!0),this.triggerEvent(P,this.amby.get("ad.errorMessage"))}})),this.amby.addSubListener("ad.position",(()=>{const e=this.amby.get("ad.position"),t=this.amby.get("ad.duration",1);if(t<=1)return;const i=e/t;i>=.25&&!this.video25?(this.sendTracking(I),this.triggerEvent(v),this.video25=!0):i>=.5&&!this.video50?(this.sendTracking(E),this.triggerEvent(S),this.video50=!0):i>=.75&&!this.video75&&(this.sendTracking(O),this.triggerEvent(_),this.video75=!0),this.adRemainingTime=Math.trunc(this.adDuration-e),this.triggerEvent(g)})),this.amby.addTriggerListener("ad.skip",(()=>{this.sendTracking(B),this.triggerEvent(h)})),this.amby.addSubListener("ad.initMuted",(()=>{this.triggerEvent(u,this.amby.get("ad.initMuted",!0)?0:1)})),this.amby.addTriggerListener("ad.complete",(()=>{this.sendTracking(L),this.triggerEvent(C)})),this.amby.addSubListener("skipBtn.skipable",(()=>{this.adSkippableState=this.amby.get("skipBtn.skipable"),this.triggerEvent(m)})),this.amby.addTriggerListener("ad.clicked",(()=>{this.sendTracking(k,!0),this.triggerEvent(b,{data:{url:this.clickThru}})})),this.amby.addTriggerListener("ad.impression",(()=>{this.sendTracking(A,!0),this.triggerEvent(y)})),this.amby.addSubListener("ad.duration",(()=>{this.previousDuration!==this.amby.get("ad.duration",1)&&(this.previousDuration=this.amby.get("ad.duration",1),this.adDuration=this.amby.get("ad.duration",1),this.triggerEvent(c))})),this.amby.addSubListener("ad.viewable",(()=>{this.amby.get("ad.viewable")?this.amby.get("ad.status")===s.states.STATUS_PLAYING&&(this.clearViewableTimeout(),this.viewableTimeout=window.setTimeout((()=>{this.viewableImpressionSent||(this.viewableImpressionSent=!0,this.sendTracking(N,!0))}),2e3)):this.clearViewableTimeout()}))}collapseAd(){}expandAd(){}getAdCompanions(){return this.adCompanions}getAdDuration(){return this.adDuration}getAdExpanded(){return this.adExpanded}getAdHeight(){return this.adHeight}getAdIcons(){return this.adIcons}getAdLinear(){return this.adLinear}getAdRemainingTime(){return this.adRemainingTime}getAdSkippableState(){return this.adSkippableState}getAdVolume(){return this.adVolume}getAdWidth(){return this.adWidth}handshakeVersion(e,t){return"2.0"}initAd(e,t,i="normal",o=256,l,d){if(this.slot=d.slot,this.videoSlot=d.videoSlot,this.rootElement=d.rootElement,this.amby.dispatch(r.setAdInit(s.states.INIT_IN_PROGRESS)),l&&l.AdParameters&&(this.parameters=JSON.parse(l.AdParameters)),this.clickThru=this.parameters.clickThru,this.domain=this.parameters.domain,this.debug=!!this.parameters.debug,this.tracking=this.parameters.tracking,this.tracking[A]=this.parameters.impressions,this.tracking[k]=[this.parameters.clickTracking],this.tracking[x]=this.parameters.errors,this.tracking[N]=this.parameters.viewableImpressions,this.cid=this.parameters.cid,this.parameters.protocol)this.protocol=this.parameters.protocol;else{const{protocol:e}=document.location;this.protocol=0===e.indexOf("http")?e:"https:"}this.clickThru&&(this.clickThru.search(/^(https?:\/\/|\/\/)/)||(this.clickThru=`//${this.clickThru}`),this.clickThru=this.clickThru.replace(/^(https?:\/\/|\/\/)/,`${this.protocol}//`)),this.amby.dispatch(r.upsertAdState({size:{width:a.Helpers.getElemWidth(this.slot),height:a.Helpers.getElemHeight(this.slot)}})),this.parameters.contentVideoDurationLimit=l?.contentVideoDurationLimit,this.adWidth=this.amby.get("ad.width"),this.adHeight=this.amby.get("ad.height"),parseInt(this.parameters.skipOffset,10)&&(this.skipOffset=parseInt(this.parameters.skipOffset,10)),this.parameters.skipOffsetText&&this.parameters.skipOffsetText.indexOf("%s")>-1&&(this.skipOffsetText=this.parameters.skipOffsetText),this.parameters.duration&&(this.adDuration=this.parameters.duration),this.adLinear=this.parameters.isLinear;const h=[];this.parameters.file&&(h.push({link:this.parameters.file,img:this.parameters.image,title:this.parameters.title,mediaid:this.parameters.id,hash:this.parameters.hash,videoExt:btoa(JSON.stringify({clickUrl:this.parameters.clickThru}))}),this.amby.dispatch(r.upsertState({formatConfig:{staticRoot:this.domain},libConfig:{mgPlayerStylesUrlTemplate:"//{{DOMAIN}}/mgPlayer/css/mgPlayer_v2.css"}})),this.playerComponent=new n.MgAdPlayerComponent({amby:this.amby,rootElement:this.rootElement},{container:this.slot,adPlaylist:h,quality:"original"}),this.amby.dispatch(r.setAdInit(s.states.INIT_NEEDED)))}pauseAd(){this.mgDebug("PauseAd requested."),this.amby.dispatch(r.setTriggerToTrue("ad.actionPause"))}resizeAd(e,t,i="normal"){this.amby.dispatch(r.upsertAdState({size:{width:e,height:t},resize:!0})),this.adHeight=t,this.adWidth=e}resumeAd(){this.mgDebug("ResumeAd requested."),this.amby.dispatch(r.setTriggerToTrue("ad.actionPlay"))}setAdVolume(e){this.mgDebug(`SetAdVolume(${e}) requested.`),0===e?this.amby.dispatch(r.upsertAdState({mute:!0,initMuted:!0})):this.amby.dispatch(r.upsertAdState({unmute:!0,initMuted:!1}))}skipAd(){this.mgDebug("SkipAd requested."),this.amby.dispatch(r.setTriggerToTrue("ad.actionSkip")),this.sendTracking(B),this.triggerEvent(h)}startAd(){this.mgDebug("StartAd requested."),this.amby.dispatch(r.setTriggerToTrue("ad.actionPlay"))}stopAd(){this.mgDebug("StopAd requested."),this.amby.dispatch(r.setTriggerToTrue("ad.actionStop"))}triggerEvent(e,...t){this.eventListeners[e]&&this.eventListeners[e].forEach((e=>{window.setTimeout((()=>{e(t)}),0)}))}subscribe(e,t){this.eventListeners[t]||(this.eventListeners[t]=[]),-1===this.eventListeners[t].indexOf(e)&&this.eventListeners[t].push(e)}unsubscribe(e,t){if(this.eventListeners[t])for(;this.eventListeners[t].indexOf(e)>-1;)this.eventListeners[t].splice(this.eventListeners[t].indexOf(e),1)}resetVars(){this.video25=!1,this.video50=!1,this.video75=!1,this.firstTimePlay=!0}mgDebug(e,t=!1){if(this.debug||t){let t=e;"object"!=typeof t&&(t=`${(new Date).toISOString().replace("Z","MG")} ${t}`),console.debug(t)}}sendTracking(e,t=!1){this.silentMode||this.tracking[e]&&this.tracking[e].forEach((i=>{let s=i;window.setTimeout((()=>{const i=a.Helpers.getConsentData(),r=i.gdpr?"gdpr":"";s=a.Helpers.replaceAll(s,"{gdpr}",String(Number(i.gdpr))),s=a.Helpers.replaceAll(s,"[REGULATIONS]",r),s=a.Helpers.replaceAll(s,"{gdpr_consent}",i.consentData),s=a.Helpers.replaceAll(s,"[GDPRCONSENT]",i.consentData),s=a.Helpers.replaceAll(s,"{cxurl}",this.amby.get("cxurl","")),t&&this.mgDebug(`${e} URL: ${s}`),a.Helpers.createImg(s)}),0)}))}clearViewableTimeout(){this.viewableTimeout&&(clearTimeout(this.viewableTimeout),this.viewableTimeout=null)}}},{"../../../redux/actionCreators":58,"../../../redux/storage":61,"../../helpers":37,"./mgAdPlayerComponent":45}],47:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TremorComponent=void 0;var s=e("./aniViewDirectComponent");class a extends s.AniviewDirectComponent{getScriptUrl(){return`${this.protocol}//tg1.unrulyvideo.com/api/adserver/spt?AV_TAGID=${this.tagId}&AV_PUBLISHERID=${this.publisherId}&${this.getRef1()}`}}i.TremorComponent=a},{"./aniViewDirectComponent":41}],48:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.VpaidPlayerBase=void 0;var s=e("../../../redux/storage"),a=e("../../helpers"),r=e("../../components/noSoundComponent"),n=e("../../components/proxyConsoleComponent"),o=e("../../debug"),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=d(t);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var n=a?Object.getOwnPropertyDescriptor(e,r):null;n&&(n.get||n.set)?Object.defineProperty(s,r,n):s[r]=e[r]}s.default=e,i&&i.set(e,s);return s}(e("../../../redux/actionCreators"));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(d=function(e){return e?i:t})(e)}i.VpaidPlayerBase=class{events={AdStarted:"AdStarted",AdStopped:"AdStopped",AdSkipped:"AdSkipped",AdLoaded:"AdLoaded",AdLinearChange:"AdLinearChange",AdSizeChange:"AdSizeChange",AdExpandedChange:"AdExpandedChange",AdSkippableStateChange:"AdSkippableStateChange",AdDurationChange:"AdDurationChange",AdRemainingTimeChange:"AdRemainingTimeChange",AdVolumeChange:"AdVolumeChange",AdImpression:"AdImpression",AdClickThru:"AdClickThru",AdInteraction:"AdInteraction",AdVideoStart:"AdVideoStart",AdVideoFirstQuartile:"AdVideoFirstQuartile",AdVideoMidpoint:"AdVideoMidpoint",AdVideoThirdQuartile:"AdVideoThirdQuartile",AdVideoComplete:"AdVideoComplete",AdUserAcceptInvitation:"AdUserAcceptInvitation",AdUserMinimize:"AdUserMinimize",AdUserClose:"AdUserClose",AdPaused:"AdPaused",AdPlaying:"AdPlaying",AdError:"AdError",AdLog:"AdLog"};amby;inited=!1;initRequested=!1;name;playerDivId;adSource;uuid;requestsLimit=0;requestsNumber;playerDiv;previousHeight;noSoundComponent;proxyConsoleComponent;vpaidManager;apiAction;playRequested;xmlDocument;mediaUrl;adParameters;iFrame;scriptFile;slot;videoSlot;adResponse;muteInterval;startedSent;positionTimeout;lastPosition=0;positionEventEmitted=!1;parameters={};wrapperNumber=0;vpaid;vastIndex=0;xmlRequestTimeoutTime;startAdRequested;wasReady;desiredBitrate;adIndex=0;vpaidMode=s.vpaidModes.INSECURE;skipOffset;rootElement;constructor(e,t){this.amby=e.amby;const{name:i="ad",adSource:d,adResponse:h=null,playerDivId:p,playerDiv:m=null,desiredBitrate:c=900,skipoffset:g=null}=t;this.rootElement=e.rootElement,this.name=i,this.playerDivId=p,this.adSource=a.Helpers.prepareAdSourceMacroses(d),this.adResponse=h,this.skipOffset=g,this.desiredBitrate=c,this.uuid=this.amby.get("uuid",""),this.previousHeight=null,this.playerDiv=m||e.rootElement.querySelector(`#${this.playerDivId}`),this.amby.get("formatConfig.forceMute",!1)&&(this.noSoundComponent=new r.NoSoundComponent(this.amby,{playerDiv:this.playerDiv,adName:i})),this.amby.get("formatConfig.hideConsole",!1)&&-1===window.location.href.indexOf("mgwdebug")&&(this.proxyConsoleComponent=new n.ProxyConsoleComponent(this.amby,{playerDiv:this.playerDiv})),this.amby.dispatch(l.setAdInit(null,this.name)),this.amby.addTriggerListener(`${this.name}.actionPause`,(()=>{const e=this.amby.get(`${this.name}.status`);this.vpaidManager&&-1===[s.states.STATUS_PAUSED,s.states.STATUS_READY].indexOf(e)&&((0,o.mgDebug)(`#${this.name}: Call vpaidManager.pauseAd`),this.vpaidManager.pauseAd())})),this.amby.addTriggerListener(`${this.name}.actionSkip`,(()=>{this.amby.dispatch(l.setAdVisible(!1,this.name)),this.vpaidManager&&((0,o.mgDebug)(`#${this.name}: Call vpaidManager.skipAd`),this.vpaidManager.skipAd(),this.amby.dispatch(l.setTriggerToTrue(`${this.name}.admgskip`)))})),this.amby.addTriggerListener("ad.unmute",(()=>{this.unmute()})),this.amby.addTriggerListener("ad.resize",(()=>{this.onResize()}))}subscribeEvents(){this.vpaidManager.subscribe((()=>{(0,o.mgDebug)(`#${this.name}: VPAID Manager: get AdPaused.`),this.amby.dispatch(l.setAdStatus(s.states.STATUS_PAUSED,this.name))}),this.events.AdPaused),this.vpaidManager.subscribe((()=>{(0,o.mgDebug)(`#${this.name}: VPAID Manager: get AdVideoComplete.`),this.amby.dispatch(l.upsertState({[this.name]:{complete:!0}}))}),this.events.AdVideoComplete),this.vpaidManager.subscribe((()=>{this.amby.dispatch(l.upsertState({[this.name]:{position:Math.ceil(this.amby.get("ad.duration")/4)}}))}),this.events.AdVideoFirstQuartile),this.vpaidManager.subscribe((()=>{this.amby.dispatch(l.upsertState({[this.name]:{position:Math.ceil(this.amby.get("ad.duration")/2)}}))}),this.events.AdVideoMidpoint),this.vpaidManager.subscribe((()=>{this.amby.dispatch(l.upsertState({[this.name]:{position:this.amby.get("ad.duration")/4*3}}))}),this.events.AdVideoThirdQuartile),this.vpaidManager.subscribe((e=>{(0,o.mgDebug)(`#${this.name}: VPAID Manager: get AdVolumeChange.`),e&&e.getAd&&e.getAd()&&e.getAd().g&&e.getAd().g.volume?this.amby.dispatch(l.setAdMuted(!1)):this.amby.dispatch(l.setAdMuted(!0))}),this.events.AdVolumeChange),this.vpaidManager.subscribe((()=>{this.positionEventEmitted=!0,this.vpaidManager&&this.amby.dispatch(l.upsertState({[this.name]:{position:Math.trunc(this.vpaidManager.getAdDuration()-this.vpaidManager.getAdRemainingTime())}}))}),this.events.AdRemainingTimeChange),this.vpaidManager.subscribe((()=>{this.vpaidManager&&this.amby.dispatch(l.upsertState({[this.name]:{duration:this.vpaidManager.getAdDuration()}}))}),this.events.AdDurationChange),this.vpaidManager.subscribe((()=>{this.amby.dispatch(l.upsertState({[this.name]:{skipable:this.vpaidManager.getAdSkippableState()},skipBtn:{skipable:this.vpaidManager.getAdSkippableState()}}))}),this.events.AdSkippableStateChange),this.vpaidManager.subscribe((()=>{this.amby.dispatch(l.setTriggerToTrue(`${this.name}.clicked`))}),this.events.AdClickThru),this.vpaidManager.subscribe((()=>{this.amby.dispatch(l.setTriggerToTrue(`${this.name}.skip`))}),this.events.AdSkipped)}unmute(){if(this.vpaidManager){(0,o.mgDebug)(`#${this.name}: Call vpaidManager.setAdVolume(1)`);try{this.vpaidManager.setAdVolume(1),this.amby.dispatch(l.setAdMuted(!1)),this.amby.dispatch(l.upsertState({muteBtn:{muted:!1}}))}catch(e){(0,o.mgDebug)(`#${this.name}: setAdVolume(1) Error: ${e}`)}}}onResize(){if(this.vpaidManager){const e=this.amby.get("ad.size",{width:300,height:169});window.setTimeout((()=>{(0,o.mgDebug)(`#${this.name}: Call vpaidManager.resizeAd`);try{this.vpaidManager.resizeAd(e.width-1,e.height,"normal"),this.vpaidManager.resizeAd(e.width,e.height,"normal")}catch(e){(0,o.mgDebug)(`#${this.name}: Resize error: ${e}`)}}),10);const t=this.playerDiv.querySelector("iframe");if(t){const{display:e}=t.style;t.style.display="none",this.previousHeight=t.offsetHeight,t.style.display=e}}}replaceMacros(e){const t=e.replace("{uuid}",this.uuid);return this.getPreparedAdSourceSizes(t)}getPreparedAdSourceSizes(e){const t=this.rootElement.querySelector(".type-v .image-container");let i=this.amby.get("ad.size.width",0)||t&&a.Helpers.getElemWidth(t),s=this.amby.get("ad.size.height",0)||t&&a.Helpers.getElemHeight(t);(s<1||i<1)&&({width:i,height:s}=a.Helpers.tryCorrectZeroSizes(this.playerDiv,i,s));const r=this.amby.get("formatConfig.name"),n="pre"===this.amby.get("ad.curAdPosition")?"pre":"mid";let o=a.Helpers.replaceAll(e,"{width}",Math.ceil(i).toString());return o=a.Helpers.replaceAll(o,"{height}",Math.ceil(s).toString()),o=a.Helpers.replaceAll(o,"{format}",r),o=a.Helpers.replaceAll(o,"{schedule}",n),o}createPositionTimeout(){this.positionEventEmitted||(this.positionTimeout=window.setTimeout((()=>{if(this.vpaidManager){const e=Math.trunc(this.vpaidManager.getAdDuration()-this.vpaidManager.getAdRemainingTime());this.lastPosition<e&&this.amby.dispatch(l.upsertState({[this.name]:{position:e}}))}this.createPositionTimeout()}),200))}getTracking(e=0){const t=this.xmlDocument.querySelectorAll("Ad");let i=t&&t[e]?t[e]:null;i||(i=this.xmlDocument.documentElement),this.parameters.errors=this.parameters.errors||[];const s=i.querySelectorAll("Error");for(let e=0;e<s.length;e++)this.parameters.errors.push(s[e].textContent.trim());this.parameters.impressions=this.parameters.impressions||[];const a=i.querySelectorAll("Impression");for(let e=0;e<a.length;e++)this.parameters.impressions.push(a[e].textContent.trim());this.parameters.tracking=this.parameters.tracking||{};const r=i.querySelectorAll("TrackingEvents > Tracking");for(let e=0;e<r.length;e++){const t=r[e].getAttribute("type")||r[e].getAttribute("event");t&&(this.parameters.tracking[t]||(this.parameters.tracking[t]=[]),this.parameters.tracking[t].push(r[e].textContent.trim()))}this.parameters.viewableImpressions=this.parameters.viewableImpressions||[];const n=this.xmlDocument.querySelectorAll("ViewableImpression>Viewable");for(let e=0;e<n.length;e++)this.parameters.viewableImpressions.push(n[e].textContent.trim())}}},{"../../../redux/actionCreators":58,"../../../redux/storage":61,"../../components/noSoundComponent":13,"../../components/proxyConsoleComponent":21,"../../debug":30,"../../helpers":37}],49:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.VpaidPlayerComponent=void 0;var s=e("./vpaidPlayerBase"),a=e("../../../redux/storage"),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=h(t);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var n=a?Object.getOwnPropertyDescriptor(e,r):null;n&&(n.get||n.set)?Object.defineProperty(s,r,n):s[r]=e[r]}s.default=e,i&&i.set(e,s);return s}(e("../../../redux/actionCreators")),n=e("../../debug"),o=e("../../components/unmuteDetectComponent"),l=e("../../helpers"),d=e("./mgvast");function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(h=function(e){return e?i:t})(e)}class p extends s.VpaidPlayerBase{config={};impressionSent=!1;teaserDebug;slotId=0;slots=[];slotsToDelete=[];hadPreRoll=!1;contentVideoDurationLimit;requestNeeded;unmuteDetectComponent;constructor(e,t){super(e,t),this.requestsLimit=parseInt(t.requestsLimit,10)||0,this.config=e.mgRec.config,this.inited=!1,this.impressionSent=!1,this.startedSent=!1,this.parameters={},this.wrapperNumber=0,this.teaserDebug=l.Helpers.getUrlParam("mgwteaser"),this.vpaid=!1,this.slotId=0,this.slots=[],this.slotsToDelete=[],this.vastIndex=0,this.vpaidMode=t.vpaidMode||a.vpaidModes.INSECURE,this.hadPreRoll=!1,this.contentVideoDurationLimit=this.getContentVideoDuration(),this.teaserDebug&&(this.adSource=l.Helpers.replaceAdSource(this.adSource,this.teaserDebug)),this.adSource||this.adResponse||(this.requestNeeded=!1,this.amby.get("ad.vastContent")?this.adResponse=this.amby.get("ad.vastContent"):this.amby.addSubListener("ad.vastContent",(()=>{this.adResponse=this.amby.get("ad.vastContent"),this.requestNeeded&&this.sendRequest()}))),this.amby.get("formatConfig.detectUnmute",!0)&&(this.unmuteDetectComponent=new o.UnmuteDetectComponent(e)),this.amby.addSubListener(`${this.name}.init`,(()=>{this.amby.get(`${this.name}.init`)===a.states.INIT_IN_PROGRESS&&(0,n.mgDebug)("Ad starts search."),l.Helpers.vitalCall((()=>this.initPlayer()),this.amby.get("isVital",!0))})),this.amby.addTriggerListener(`${this.name}.actionPlay`,(()=>{if(this.vpaidManager){this.apiAction=!0;const e=this.amby.get(`${this.name}.status`);e&&e===a.states.STATUS_PLAYING||(e&&e!==a.states.STATUS_READY?this.vpaidManager.resumeAd():this.start())}else this.playRequested=!0})),this.amby.addTriggerListener(`${this.name}.actionStop`,(()=>{this.vpaidManager&&this.vpaidManager.stopAd()})),this.amby.addTriggerListener(`${this.name}.actionClose`,(()=>{this.amby.dispatch(r.setAdVisible(!1,this.name)),this.close()})),this.amby.addTriggerListener("ad.mute",(()=>{this.mute()})),this.amby.addTriggerListener("player.firstFrame",(()=>{this.hadPreRoll&&0===this.amby.get("player.itemIndex")?this.hadPreRoll=!1:this.contentVideoDurationLimit=this.getContentVideoDuration()}))}initPlayer(){switch(this.amby.get(`${this.name}.init`)){case a.states.INIT_NEEDED:this.amby.dispatch(r.setAdInit(a.states.INIT_IN_PROGRESS,this.name)),this.sendRequest();break;case a.states.INIT_RESET:this.reset(),this.amby.dispatch(r.setAdInit(a.states.INIT_IN_PROGRESS,this.name)),this.sendRequest();break;case a.states.INIT_STOP:this.reset()}}sendRequest(){this.adSource||this.adResponse?this.adResponse?(this.xmlDocument=l.Helpers.parseXml(this.adResponse),this.proccessResponse()):this.sendXMLRequest(!0):this.requestNeeded=!0}proccessResponse(){const e=l.Helpers.getFromDocumentByTagName(this.xmlDocument,"VASTAdTagURI");if(e&&this.wrapperNumber<4)return this.wrapperNumber+=1,this.getTracking(),void this.sendXMLRequest(!0,e);this.mediaUrl=l.Helpers.getFromDocumentByTagName(this.xmlDocument,"MediaFile"),this.adParameters=l.Helpers.getFromDocumentByTagName(this.xmlDocument,"AdParameters");try{this.parameters=l.Helpers.mergeObjects(this.parameters,JSON.parse(this.adParameters||"{}"))}catch(e){this.parameters.original=this.adParameters}this.parameters.skipOffset=this.skipOffset,this.amby.dispatch(r.upsertState({[this.name]:{responseXml:this.xmlDocument.documentElement.outerHTML,responseHash:l.Helpers.cyrb53(this.xmlDocument.documentElement.outerHTML),responded:!0}})),this.amby.dispatch(r.upsertState({vastXml:this.xmlDocument.documentElement.outerHTML}));const t=this.xmlDocument.querySelector("MediaFile");if(!t){this.xmlDocument.querySelector("Ad")?this.amby.dispatch(r.setTriggerToTrue(`${this.name}.adbidinvalid`)):this.amby.dispatch(r.setTriggerToTrue(`${this.name}.adbidempty`))}this.amby.dispatch(r.setTriggerToTrue(`${this.name}.adbid`)),this.parameters.clickThru=l.Helpers.getFromDocumentByTagName(this.xmlDocument,"ClickThrough"),this.parameters.clickTracking=l.Helpers.getFromDocumentByTagName(this.xmlDocument,"ClickTracking"),this.getTracking(),t&&t.getAttribute("type")&&t.getAttribute("type").match(/video\/(mp4|webm)/)&&(this.parameters.cid=this.amby.get("widgetId"),this.parameters.file=this.mediaUrl,this.parameters.image="",this.parameters.title=l.Helpers.getFromDocumentByTagName(this.xmlDocument,"AdTitle"),this.parameters.protocol=this.amby.get("protocol"),this.parameters.domain=this.amby.get("formatConfig.staticRoot")||`video-native.${this.amby.get("subnetDomain","")}`,this.parameters.isLinear=!!this.xmlDocument.querySelector("Creative > Linear"),this.parameters.isLinear&&!this.parameters.skipOffset&&(this.parameters.skipOffset=l.Helpers.parseTime(this.xmlDocument.querySelector("Creative > Linear").getAttribute("skipoffset"))),this.amby.dispatch(r.upsertAdState({adClickUrl:this.parameters.clickThru})),this.parameters.duration=l.Helpers.parseTime(l.Helpers.getFromDocumentByTagName(this.xmlDocument,"Duration"))),(0,n.getDebugFlag)()&&(this.parameters.debug=(0,n.getDebugFlag)()),this.xmlRequestTimeoutTime&&(this.parameters.xmlRequestTimeout=this.xmlRequestTimeoutTime),this.parameters.noTracking=!0,this.parameters.downtimeDetector=this.amby.get("downtimeDetector",!1),this.parameters.downtimeTimeout=this.amby.get("downtimeTimeout",!1),this.parameters.startAdTimeout=this.amby.get("startAdTimeout",!1),this.parameters.cxurl=this.amby.get("cxurl",""),this.parameters.formatName=this.amby.get("formatConfig.name"),this.parameters.enableDurationBalancer=this.amby.get("formatConfig.enableDurationBalancer",!1),this.parameters.curAdPosition=this.amby.get("ad.curAdPosition"),this.parameters.sendDetailedEvents=this.config.sendDetailedEvents??!1,this.parameters.forceMute=this.amby.get("formatConfig.forceMute",!1),this.adParameters=JSON.stringify(this.parameters),this.mediaUrl.match(/\.(mp4|webm)/i)?this.initVastPlayer():""!==this.mediaUrl?(this.vpaid=!0,this.vpaidMode===a.vpaidModes.INSECURE?this.initScript():this.initScriptInFrame()):((0,n.mgDebug)(`#${this.name}: VPAID ERROR: No MediaFile found. [${this.adSource}]`),this.passback())}initVastPlayer(){this.createSlot(),this.playerDiv.appendChild(this.slot),this.vastIndex+=1,this.vpaidManager=new d.Vast(`${this.playerDivId}_${this.vastIndex}`),this.subscribeEvents(),this.slots.push({slot:this.slot}),(0,n.mgDebug)("vpaidManager.initAd"),this.vpaidManager.initAd(this.amby.get("ad.size.width",300),this.amby.get("ad.size.height",169),"normal",this.desiredBitrate,{AdParameters:this.adParameters,contentVideoDurationLimit:this.contentVideoDurationLimit},{slot:this.slot,videoSlot:this.videoSlot,rootElement:this.rootElement})}initScript(e=document){this.createSlot();const{body:t}=e;e===document?this.playerDiv.appendChild(this.slot):t.appendChild(this.slot),this.playerDiv.appendChild(this.slot),this.scriptFile=e.createElement("script"),this.scriptFile.type="text/javascript",this.scriptFile.id=`scriptFile${this.slotId}`,this.scriptFile.src=encodeURI(this.mediaUrl),this.slots.push({slot:this.slot,scriptFile:this.scriptFile}),this.scriptFile.addEventListener("load",(()=>{if(this.vpaidManager=window.getVPAIDAd(),parseFloat(this.vpaidManager.handshakeVersion("2.0",""))>=2){this.subscribeEvents();const e=JSON.parse(this.adParameters);this.amby.dispatch(r.setTriggerToTrue(`${this.name}.vpaidinit`)),this.vpaidManager.initAd(this.amby.get("ad.size.width",640),this.amby.get("ad.size.height",480),"normal",this.desiredBitrate,{AdParameters:e.original?e.original:this.adParameters,contentVideoDurationLimit:this.contentVideoDurationLimit},{slot:this.slot,videoSlot:this.videoSlot,rootElement:this.rootElement})}})),t.appendChild(this.scriptFile),this.amby.dispatch(r.setTriggerToTrue("widget.rawinit"))}initScriptInFrame(){this.iFrame=document.createElement("iframe"),this.iFrame.width="100%",this.iFrame.height="100%",this.iFrame.style.padding="0",this.iFrame.style.margin="0",this.iFrame.style.border="0",this.iFrame.style.position="relative",this.iFrame.addEventListener("load",(()=>{const{body:e}=this.iFrame.contentWindow.document;e.appendChild(this.slot),e.style.position="relative",e.style.margin="0",e.style.padding="0",e.style.width="100%",e.style.height="100%",e.style.overflow="hidden",this.initScript(this.iFrame.contentWindow.document)})),this.playerDiv.appendChild(this.iFrame)}subscribeEvents(){this.vpaidManager.subscribe((()=>{this.amby.get(`${this.name}.status`)!==a.states.STATUS_PLAYING&&(l.Helpers.vitalCall((()=>{this.amby.dispatch(r.setAdInit(a.states.INIT_DONE)),this.amby.dispatch(r.setAdStatus(a.states.STATUS_READY,this.name)),this.amby.dispatch(r.upsertState({[this.name]:{adloaded:!0}})),this.amby.dispatch(r.upsertState({ad:{loaded:!0}}))}),this.amby.get("isVital",!0)),this.vpaidManager.getAdDuration&&this.vpaidManager.getAdDuration()&&this.amby.dispatch(r.upsertState({[this.name]:{position:0,duration:this.vpaidManager.getAdDuration()}})),this.amby.dispatch(r.upsertState({[this.name]:{isLinear:this.vpaidManager.getAdLinear()}})),this.playRequested&&this.vpaidManager&&(this.start(),this.playRequested=!1))}),this.events.AdLoaded),this.vpaidManager.subscribe((e=>{this.onAdError(e)}),this.events.AdError),this.vpaidManager.subscribe((()=>{(0,n.mgDebug)(`#${this.name}: VPAID Manager: get AdStarted.`),this.vpaidManager&&(this.lastPosition=Math.trunc(this.vpaidManager.getAdDuration()-this.vpaidManager.getAdRemainingTime())),this.createPositionTimeout()}),this.events.AdStarted),this.vpaidManager.subscribe((()=>{this.amby.dispatch(r.setAdStatus(a.states.STATUS_PAUSED,this.name))}),this.events.AdPaused),this.vpaidManager.subscribe((()=>{this.amby.dispatch(r.setAdStatus(a.states.STATUS_PLAYING,this.name))}),this.events.AdPlaying),this.vpaidManager.subscribe((()=>{this.amby.dispatch(r.setAdStatus(a.states.STATUS_PLAYING,this.name))}),this.events.AdVideoStart),this.vpaidManager.subscribe((e=>{e&&e[0]&&(e[0].showHash&&this.amby.dispatch(r.upsertAdState({adHash:e[0].showHash})),e[0].poc&&this.amby.dispatch(r.upsertAdState({poc:e[0].poc}))),!this.amby.get("ad.adHash")||e&&e[0]&&e[0].eventFromNativeBackfill||this.amby.dispatch(r.setTriggerToTrue("ad.impression")),this.amby.dispatch(r.upsertState({skipBtn:{skipable:!1}})),setTimeout((()=>{this.amby.dispatch(r.upsertState({ad:{poc:null,adHash:null}}))})),"pre"===this.amby.get("ad.curAdPosition")&&(this.hadPreRoll=!0),(0,n.mgDebug)(`contentVideoDurationLimit: ${this.contentVideoDurationLimit}`),this.contentVideoDurationLimit-=this.vpaidManager.getAdDuration(),this.amby.dispatch(r.upsertAdState({currentImpressions:this.amby.get("ad.currentImpressions",0)+1}))}),this.events.AdImpression),this.vpaidManager.subscribe((()=>{this.amby.dispatch(r.upsertState({[this.name]:{complete:!0}})),this.amby.dispatch(r.upsertAdState({videoEnded:!0}))}),this.events.AdVideoComplete),this.vpaidManager.subscribe((()=>{window.setTimeout((()=>{this.destroy(),this.amby.dispatch(r.setAdStatus(a.states.STATUS_STOPPED,this.name))}),500)}),this.events.AdStopped)}start(){(this.amby.get("ad.initMuted",!0)||l.Helpers.iOSversion())&&this.mute(),l.Helpers.vitalCall((()=>{l.Helpers.iOSversion()&&this.amby.dispatch(r.upsertState({player:{muted:!0}}))}),this.amby.get("isVital",!0)),this.vpaidManager.startAd()}reset(){(0,n.mgDebug)("VPAID Player: Deleting AD player."),this.close(),this.destroy(),this.parameters={},this.requestsNumber=0}mute(){l.Helpers.vitalCall((()=>{this.vpaidManager&&((0,n.mgDebug)("VPAID Player: AD mute request sent."),this.vpaidManager.setAdVolume(0),this.amby.dispatch(r.setAdMuted(!0)),this.amby.dispatch(r.upsertState({muteBtn:{muted:!0}})))}),this.amby.get("isVital",!0))}unmute(){this.vpaidManager&&((0,n.mgDebug)("VPAID Player: AD unmute request sent."),this.vpaidManager.setAdVolume(1),this.amby.dispatch(r.setAdMuted(!1)),this.amby.dispatch(r.upsertState({muteBtn:{muted:!1}})))}close(){this.vpaidManager&&this.vpaidManager.stopAd&&this.vpaidManager.stopAd()}clearSlots(){for(;this.slotsToDelete.length>0;){const e=this.slotsToDelete.shift();e.slot.parentNode.removeChild(e.slot),e.scriptFile&&e.scriptFile.parentNode.removeChild(e.scriptFile)}}destroy(){(0,n.mgDebug)("Delete slots"),this.slotsToDelete=this.slots}onAdError(e){e&&e.getError&&"function"==typeof e.getError?(0,n.mgDebug)(e.getError()):(0,n.mgDebug)(JSON.stringify(e)),this.requestsLimit>this.requestsNumber?(this.requestsNumber+=1,window.setTimeout((()=>{this.destroy(),this.sendRequest()}),500)):(this.passback(),this.amby.dispatch(r.setAdStatus(a.states.STATUS_ERROR,this.name)))}replaceMacros(e){return this.getPreparedAdSourceSizes(e.replace("{uuid}",this.uuid))}createSlot(){this.clearSlots(),this.slotId+=1,this.slot=document.createElement("div"),this.slot.id=`slot${this.slotId}`,this.slot.style.position="relative",this.slot.style.top="0",this.slot.style.left="0",this.slot.style.width="100%",this.slot.style.height="100%",this.slot.style.padding="0",this.slot.style.margin="0",this.videoSlot=document.createElement("video"),this.videoSlot.setAttribute("muted","true"),this.videoSlot.setAttribute("playsinline","true"),this.videoSlot.setAttribute("webkit-playsinline","true"),this.videoSlot.style.width="100%",this.videoSlot.style.height="100%",this.videoSlot.style.zIndex="-1",this.videoSlot.style.position="absolute",this.videoSlot.style.top="0",this.videoSlot.style.left="0",this.slot.appendChild(this.videoSlot)}sendXMLRequest(e=!1,t=null){const i=new XMLHttpRequest,s=t||this.adSource;i.open("GET",this.replaceMacros(s)),i.responseType="document",i.withCredentials=e,i.timeout=6e4,i.addEventListener("load",(()=>{200!==i.status?e?this.sendXMLRequest(!1,s):(this.passback(),this.amby.dispatch(r.setAdStatus(a.states.STATUS_ERROR,this.name))):(this.xmlDocument=i.response,this.proccessResponse())})),i.addEventListener("error",(()=>{e?this.sendXMLRequest(!1,s):this.passback()})),i.addEventListener("timeout",(()=>{this.passback(),this.amby.dispatch(r.setAdStatus(a.states.STATUS_ERROR,this.name))})),i.send()}passback(){if(this.amby.get("passback",!1)){this.amby.dispatch(r.setTriggerToTrue("ad.passback"));try{l.Helpers.createScriptAndRun(`Passback_${this.amby.get("mgVideoIndex")}`,this.amby.get("passback",!1))}catch(e){(0,n.mgDebug)(e)}}}getContentVideoDuration(){let e=this.amby.get("player.duration",0);const t=this.amby.get("playlist",[]);if(!e&&t.length){const i=t[0];e=JSON.parse(atob(i.videoExt)).duration}return e}}i.VpaidPlayerComponent=p},{"../../../redux/actionCreators":58,"../../../redux/storage":61,"../../components/unmuteDetectComponent":24,"../../debug":30,"../../helpers":37,"./mgvast":46,"./vpaidPlayerBase":48}],50:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ContentPlayerComponent=void 0;var s=e("../../../redux/storage"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=d(t);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var n=a?Object.getOwnPropertyDescriptor(e,r):null;n&&(n.get||n.set)?Object.defineProperty(s,r,n):s[r]=e[r]}s.default=e,i&&i.set(e,s);return s}(e("../../../redux/actionCreators")),r=e("../../helpers"),n=e("../../loader"),o=e("../../debug"),l=e("../mgPlayer");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(d=function(e){return e?i:t})(e)}const h="playing",p="paused",m="buffering",c="idle",g="mgplayer";i.ContentPlayerComponent=class{constructor(e,t,i){if(this.amby=e.amby,this.playerType=this.amby.get("formatConfig.playerType",g),"none"===this.playerType)return;this.playerContainerDiv=t,this.config=this.amby.get("formatConfig",{}),this.mgsetup=i,this.rootElement=e.rootElement,this.jwplatformUrl=this.config.jwplatformUrl||this.amby.get("libConfig.jwPlayerIdVrw"),this.playerId=this.amby.get("player.playerId"),this.aspectRatio=this.amby.get("player.aspectratio");const s=this.amby.get("playlist",[]);this.playlist=[],s?this.fillPlaylist(s):this.amby.addSubListener("playlist",(()=>{const e=this.amby.get("playlist",[]);e&&e.length>0&&(this.fillPlaylist(e),this.loadRequested&&this.player.load(this.playlist))})),this.currentPosition=0,this.amby.addSubListener("player.init",(()=>{this.onPlayerInit()})),this.amby.addTriggerListener("player.mute",(()=>{this.player&&this.player.setMute(!0)})),this.amby.addTriggerListener("player.unmute",(()=>{this.player&&this.player.setMute(!1)})),this.amby.addTriggerListener("player.resize",(()=>{this.onPlayerResize()})),this.amby.addTriggerListener("player.actionPlay",(()=>{this.player&&-1===[h,m].indexOf(this.player.getState())&&this.player.play(!0)})),this.amby.addTriggerListener("player.actionPause",(()=>{this.player&&-1===[p,c].indexOf(this.player.getState())&&this.player.pause(!0)})),this.amby.addTriggerListener("player.actionStop",(()=>{this.player&&-1===[p,c].indexOf(this.player.getState())&&this.player.stop()})),this.amby.addSubListener("player.isControlsVisible",(()=>{this.player&&(this.amby.get("player.isControlsVisible",!1)?this.player.setControls(!0):this.player.setControls(!1))})),this.amby.addSubListener("player.itemIndex",(()=>{const e=this.amby.get("player.itemIndex");null!==e&&this.player&&this.itemIndex!==e&&this.player.playlistItem(e)})),this.amby.addSubListener("popup.visible",(()=>{this.onPlayerChangedLocation()})),this.amby.get("formatConfig.moveToBody",!1)&&this.amby.addSubListener("player.isSticky",(()=>{this.onPlayerChangedLocation()})),this.observer=r.Helpers.onVisible(this.playerContainerDiv,(e=>{e||this.amby.get("player.isSticky",!1)?((0,o.mgDebug)("Player is in sight."),this.amby.dispatch(a.setPlayerInSight(!0))):((0,o.mgDebug)("Player is out of sight."),this.amby.dispatch(a.setPlayerInSight(!1)))}),this.amby.get("formatConfig.visiblePart",.9),this.amby.get("formatConfig.hiddenPart"))}onPlayerInit(){if(this.amby.get("player.init")===s.states.INIT_NEEDED)this.amby.dispatch(a.setPlayerInit(s.states.INIT_IN_PROGRESS)),this.playerType===g?this.initPlayer():this.loadLibrary()}onPlayerResize(e=!1){const t=this.amby.get("player.size");this.player&&(t?this.player.resize(t.width,t.height,this.aspectRatio):this.player.resize()),r.Helpers.isIE()&&!e&&setTimeout((()=>{this.onPlayerResize(!0)}),1200)}loadLibrary(){new n.Loader({mgJwplatform:{url:this.jwplatformUrl,exists:"typeof window.jwplayer !== 'undefined'"}},(()=>{this.initPlayer()}),this.amby.get("mgVideoIndex")).checkLoaded()}initPlayer(){const e=this.amby.get("formatConfig.staticRoot")||`video-native.${this.amby.get("subnetDomain","")}`,t=[{description:"",image:`//${e}/XHcEUCFl-720.jpg`,file:`//${e}/XHcEUCFl-26327326.mp4`,title:"Video"}],i=this.amby.get("player.muted",!0);if("jwplayer"===this.playerType)this.player=window.jwplayer(this.playerId),this.player.setup(r.Helpers.mergeObjects({autostart:!1,repeat:!0,mute:i,advertising:{},aspectratio:this.aspectRatio,width:"100%",playlist:t},this.config.jwsetup));else{const s=this.amby.get("libConfig.mgPlayerStylesUrlTemplate").replace("{{DOMAIN}}",e);this.config.mgsetup&&this.config.mgsetup.stylePath&&(this.config.mgsetup.stylePath=this.config.mgsetup.stylePath.replace("{{DOMAIN}}",e)),this.player=new l.MgPlayer(this.playerId,this.rootElement),this.player.setup(r.Helpers.mergeObjects({autostart:!1,repeat:this.amby.get("formatConfig.repeat",!0),mute:i,playlist:t,stylePath:s,useWebm:!0},this.mgsetup))}this.addPlayerListeners()}addPlayerListeners(){this.player.on("ready",(()=>{r.Helpers.vitalCall((()=>r.Helpers.repaintSafari()),this.amby.get("isVital",!0)),this.playlist.length>0?this.player.load(this.playlist):this.loadRequested=!0})),this.player.on("playlist",(()=>{this.amby.dispatch(a.setPlayerInit(s.states.INIT_DONE)),this.amby.dispatch(a.setPlayerStatus(s.states.STATUS_READY))})),this.player.on("displayClick",(()=>{this.amby.dispatch(a.setTriggerToTrue("player.displayClicked"))})),this.player.on("play",(e=>{this.amby.dispatch(a.setPlayerStatus(s.states.STATUS_PLAYING)),"interaction"===e.playReason?this.nextButtonClicked?(this.changedQualityPaused||this.player.pause(!0),this.nextButtonClicked=!1,this.changedQualityPaused=!1):(this.amby.dispatch(a.upsertPlayerState({isPlayingOnVisible:!0})),this.amby.dispatch(a.setTriggerToTrue("player.userPlay"))):this.amby.get("player.isAdPlaying",!1)&&this.player.pause(!0),(this.amby.get("ad.status")===s.states.STATUS_PLAYING||this.amby.get("player.isAdPlaying",!1))&&this.player.pause(!0)})),this.player.on("pause",(e=>{(0,o.mgDebug)(`Player Pause Event ${e.pauseReason}`),"interaction"===e.pauseReason&&(this.amby.dispatch(a.upsertPlayerState({isPlayingOnVisible:!1})),this.amby.dispatch(a.setTriggerToTrue("player.userPause"))),this.amby.dispatch(a.setPlayerStatus(s.states.STATUS_PAUSED))})),this.player.on("error",(e=>{this.amby.dispatch(a.setPlayerStatus(s.states.STATUS_ERROR)),(0,o.mgDebug)(e)})),this.player.on("idle",(()=>{this.amby.dispatch(a.setPlayerStatus(s.states.STATUS_STOPPED))})),this.player.on("mute",(e=>{this.amby.get("player.isControlsVisible",!1)&&!this.amby.get("player.isAdPlaying",!1)&&(e.mute?(this.amby.dispatch(a.upsertAdState({initMuted:!0})),this.amby.dispatch(a.setTriggerToTrue("player.userMute"))):(this.amby.dispatch(a.upsertAdState({initMuted:!1})),this.amby.dispatch(a.setTriggerToTrue("player.userUnmute")))),this.amby.dispatch(a.setPlayerMuted(e.mute))})),this.player.on("playlistItem",(e=>{this.itemIndex=e.index,this.amby.dispatch(a.upsertPlayerState({itemIndex:e.index})),this.firstTimeNewItem?this.amby.dispatch(a.setTriggerToTrue("player.newItem")):this.firstTimeNewItem=!0})),this.player.on("time",(e=>{e.position-this.currentPosition>1&&(this.currentPosition=Math.floor(e.position),this.amby.dispatch(a.upsertPlayerState({position:this.currentPosition})))})),this.player.on("firstFrame",(()=>{this.currentPosition=0,this.amby.dispatch(a.upsertPlayerState({duration:this.player.getDuration(),complete:!1})),this.amby.dispatch(a.setTriggerToTrue("player.firstFrame"))})),this.player.on("beforeComplete",(()=>{this.amby.dispatch(a.upsertPlayerState({complete:!0}))})),this.player.on("fullscreen",(e=>{this.amby.dispatch(a.upsertPlayerState({fullscreen:e.fullscreen})),this.player.getState()===h&&setTimeout((()=>{this.player.play(!0)}),100),e.fullscreen||setTimeout((()=>{this.fullscreenTimeout()}),100)})),this.player.on("seek",(e=>{this.amby.dispatch(a.setTriggerToTrue("player.seek")),this.amby.dispatch(a.upsertPlayerState({position:Math.floor(e.offset)})),this.currentPosition=Math.floor(e.offset)})),this.player.on("controls",(()=>{const e=this.player.getContainer().querySelector(".jw-controlbar-right-group .jw-icon-next");e&&e.addEventListener("click",(e=>{this.amby.dispatch(a.setTriggerToTrue("player.nextClicked")),this.nextButtonClicked=!0,e.cancelBubble=!0}))})),this.player.on("next",(()=>{this.amby.dispatch(a.setTriggerToTrue("player.next"))})),this.player.on("previous",(()=>{this.amby.dispatch(a.setTriggerToTrue("player.previous"))})),this.player.on("next_2",(()=>{this.amby.dispatch(a.setTriggerToTrue("player.next_2"))})),this.player.on("expand",(()=>{this.amby.dispatch(a.setTriggerToTrue("player.expandBtnClicked")),this.amby.dispatch(a.setTriggerToTrue("player.expand"))})),this.player.on("quality",(e=>{this.player.getState()===p&&(this.changedQualityPaused=!0),this.amby.dispatch(a.upsertPlayerState({quality:e.quality}))}))}fullscreenTimeout(){if(!window.screenTop&&!window.screenY||void 0!==document.webkitCurrentFullScreenElement&&null!==document.webkitCurrentFullScreenElement)setTimeout((()=>{this.fullscreenTimeout()}),100);else{const e=r.Helpers.getParentBlockByClass(this.player.getContainer(),`_mgw_${this.amby.get("widgetId",0)}`)||this.player.getContainer();window.scrollTo(0,r.Helpers.getRect(e,!0).top-1)}}onPlayerChangedLocation(){!this.amby.get("player.isAdPlaying",!1)&&this.player&&this.amby.get("player.status")===s.states.STATUS_PLAYING&&this.amby.get("formatConfig.inlinePlacement",1)&&setTimeout((()=>{this.player.play(!0)}),0)}fillPlaylist(e){e.forEach((e=>{this.playlist.push({file:"original"===this.amby.get("formatConfig.quality")?e.link:e.link.replace(/^([^?]+?)(_360)?\.(mp4|webm)($|\?)/i,"$1_360.$3$4"),image:e.img,title:e.title,mediaid:e.id})}))}}},{"../../../redux/actionCreators":58,"../../../redux/storage":61,"../../debug":30,"../../helpers":37,"../../loader":38,"../mgPlayer":56}],51:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ClickThroughComponent=void 0;var s=e("../../../redux/storage"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=n(t);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=a?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(s,r,o):s[r]=e[r]}s.default=e,i&&i.set(e,s);return s}(e("../../../redux/actionCreators")),r=e("../../helpers");function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(n=function(e){return e?i:t})(e)}i.ClickThroughComponent=class{constructor(e,t){this.amby=e,this.container=t,this.elemText=r.Helpers.getTranslated(this.amby,"clickText","Learn more"),this.widgetId=this.amby.get("widgetId"),this.widgetBlock=r.Helpers.getParentBlockByClass(this.container,`_mgw_${this.widgetId}`),this.elem||this.createElement(),this.addListeners(),this.setClickListener()}removeElement(){this.elem.parentNode.removeChild(this.elem),this.elem=null}createElement(){this.widgetBlock&&(this.elem=this.widgetBlock.querySelector(`#adLinkButton_${this.widgetId}_ad`)),this.elem||(this.elem=document.createElement("div"),this.elem.className="adLinkButton",this.elem.id=`adLinkButton_${this.widgetId}_ad`,this.elem.innerText=this.elemText,this.container.appendChild(this.elem))}addListeners(){this.amby.addSubListener("linkBtn.visible",(()=>{this.amby.get("linkBtn.visible",!1)?r.Helpers.addClass(this.elem,"showed"):r.Helpers.removeClass(this.elem,"showed")})),this.amby.addSubListener("ad.adClickUrl",(()=>{this.setClickListener()})),this.amby.addTriggerListener("ad.videoEnded",(()=>{this.removeElement()})),this.amby.addSubListener("ad.status",(()=>{switch(this.amby.get("ad.status")){case s.states.STATUS_PLAYING:this.amby.get("ad.adClickUrl")&&this.amby.dispatch(a.upsertState({linkBtn:{visible:!0}}));break;case s.states.STATUS_STOPPED:this.amby.dispatch(a.upsertState({linkBtn:{visible:!1}}))}}))}setClickListener(){this.amby.get("ad.adClickUrl")?this.elem.onclick=()=>{const e=window.open(this.amby.get("ad.adClickUrl"),"_blank");e&&(this.amby.dispatch(a.setTriggerToTrue("ad.clicked")),e.focus(),this.amby.dispatch(a.setTriggerToTrue("ad.actionPause")))}:this.elem.onclick=null}}},{"../../../redux/actionCreators":58,"../../../redux/storage":61,"../../helpers":37}],52:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.CloseButtonComponent=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=n(t);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=a?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(s,r,o):s[r]=e[r]}s.default=e,i&&i.set(e,s);return s}(e("../../../redux/actionCreators")),a=e("../../helpers"),r=e("../../../redux/storage");function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(n=function(e){return e?i:t})(e)}i.CloseButtonComponent=class{constructor(e,t,i=!0){this.amby=e,this.container=t,this.widgetId=this.amby.get("widgetId"),this.getElem(),!this.elem||i?this.createElement():this.addClickListener(),this.addListeners()}createElement(){this.elem=document.createElement("div"),this.elem.className="mgCloseButton adCloseButton",this.amby.get("closeBtn.visible",!1)?a.Helpers.addClass(this.elem,"showed"):(this.amby.dispatch(s.upsertState({closeBtn:{visible:!1}})),a.Helpers.removeClass(this.elem,"showed")),this.container.appendChild(this.elem),this.addClickListener()}addListeners(){this.amby.addSubListener("closeBtn.visible",(()=>{this.amby.get("closeBtn.visible",!1)?a.Helpers.addClass(this.elem,"showed"):a.Helpers.removeClass(this.elem,"showed")})),[1,2].indexOf(this.amby.get("closeBtn.enabled"))>-1&&(1===this.amby.get("closeBtn.enabled")&&this.amby.addSubListener("skipBtn.skipable",(()=>{this.amby.get("skipBtn.skipable",!1)?this.amby.dispatch(s.upsertState({closeBtn:{visible:!0}})):this.amby.get("player.isSticky",!1)||this.amby.get("player.isAdPlaying",!1)||this.amby.dispatch(s.upsertState({closeBtn:{visible:!1}}))})),this.amby.addSubListener("ad.status",(()=>{switch(this.amby.get("ad.status")){case r.states.STATUS_PLAYING:1!==this.amby.get("closeBtn.enabled")||this.amby.get("skipBtn.skipable",!1)||this.amby.get("player.isSticky",!1)||this.amby.dispatch(s.upsertState({closeBtn:{visible:!1}}));break;case r.states.STATUS_STOPPED:case r.states.STATUS_ERROR:this.amby.get("player.isSticky",!1)||this.amby.dispatch(s.upsertState({closeBtn:{visible:!1}}))}})),this.amby.addSubListener("player.isSticky",(()=>{this.amby.get("player.isSticky",!1)&&(-1===["outstream","attachedWidget"].indexOf(this.amby.get("formatConfig.name"))||this.amby.get("skipBtn.skipable",!1)||1!==this.amby.get("closeBtn.enabled"))?this.amby.dispatch(s.upsertState({closeBtn:{visible:!0}})):(!this.amby.get("player.isAdPlaying",!1)&&-1===["outstream","attachedWidget"].indexOf(this.amby.get("formatConfig.name"))||!this.amby.get("skipBtn.skipable",!1)&&1===this.amby.get("closeBtn.enabled"))&&this.amby.dispatch(s.upsertState({closeBtn:{visible:!1}}))})))}addClickListener(){this.elem&&this.elem.addEventListener("click",(e=>{this.amby.dispatch(s.setTriggerToTrue("closeBtn.clicked")),e.cancelBubble=!0}))}getElem(){return this.widgetBlock||(this.widgetBlock=a.Helpers.getParentBlockByClass(this.container,`_mgw_${this.widgetId}`)),this.widgetBlock&&(this.elem=this.widgetBlock.querySelector(".mgCloseCrossButton")||this.widgetBlock.querySelector("div[class*=adCloseButton]")),this.elem}}},{"../../../redux/actionCreators":58,"../../../redux/storage":61,"../../helpers":37}],53:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.LogoComponent=void 0;var s=e("../../../redux/storage"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=n(t);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var o=a?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(s,r,o):s[r]=e[r]}s.default=e,i&&i.set(e,s);return s}(e("../../../redux/actionCreators")),r=e("../../helpers");function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(n=function(e){return e?i:t})(e)}i.LogoComponent=class{constructor(e,t,i=!0){this.amby=e,this.container=t,this.stickyOnly=i,this.elemText=r.Helpers.getTranslated(this.amby,"headerText","Advertisement"),this.mainBlock=r.Helpers.getParentBlockByClass(this.container,"_mgw_"),this.mainBlock&&(this.headerLinkElem=this.mainBlock.querySelector(".mgheader a"));const{protocol:s}=document.location;this.protocol=0===s.indexOf("http")?s:"https:",this.domain=this.amby.get("subnetDomain"),this.domainName=this.domain.match(/^\w+/),this.headerLink=`${this.protocol}//www.${this.domain}`,this.headerLinkElem&&this.headerLinkElem.href&&this.headerLinkElem.href.indexOf(this.domainName)>-1&&(this.headerLink=this.headerLinkElem.href.replace(/^(https?:\/\/|\/\/)/,`${this.protocol}//`)),this.container&&(this.elem=this.container.querySelector(".topBar")),this.elem||this.createElement(),this.addListeners()}createElement(){this.elem=document.createElement("div"),this.elem.className="topBar",this.elem.innerHTML=`<div class="other-logo">\n            <a href="${this.headerLink}" target="_blank" rel="nofollow noopener">\n                <img src="${this.protocol}//cdn.${this.domain}/images/logo/${this.domainName}.png" alt="" title="">\n            </a></div><span>${this.elemText}</span>`,this.container.appendChild(this.elem)}addListeners(){this.amby.addSubListener("ad.status",(()=>{switch(this.amby.get("ad.status")){case s.states.STATUS_PLAYING:this.stickyOnly&&!this.amby.get("player.isSticky",!1)||this.amby.dispatch(a.upsertState({logo:{visible:!0}}));break;case s.states.STATUS_STOPPED:this.amby.dispatch(a.upsertState({logo:{visible:!1}}))}})),this.amby.addSubListener("player.isSticky",(()=>{(!this.stickyOnly||this.amby.get("player.isSticky",!1))&&[s.states.STATUS_PAUSED,s.states.STATUS_PLAYING].indexOf(this.amby.get("ad.status"))>-1?this.amby.dispatch(a.upsertState({logo:{visible:!0}})):this.stickyOnly&&this.amby.dispatch(a.upsertState({logo:{visible:!1}}))})),this.stickyOnly?this.amby.addSubListener("logo.visible",(()=>{this.checkClasses()})):this.container.addEventListener("transitionend",(()=>{this.checkClasses()}))}checkClasses(){this.amby.get("logo.visible")?(r.Helpers.addClass(this.elem,"showed"),r.Helpers.addClass(this.container,"mglogo")):(r.Helpers.removeClass(this.elem,"showed"),r.Helpers.removeClass(this.container,"mglogo"))}}},{"../../../redux/actionCreators":58,"../../../redux/storage":61,"../../helpers":37}],54:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.MuteButtonComponent=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=r(t);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var o=a?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(s,n,o):s[n]=e[n]}s.default=e,i&&i.set(e,s);return s}(e("../../../redux/actionCreators")),a=e("../../helpers");function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(r=function(e){return e?i:t})(e)}i.MuteButtonComponent=class{constructor(e,t){this.amby=e,this.container=t,this.widgetId=this.amby.get("widgetId");const i=a.Helpers.getParentBlockByClass(this.container,`_mgw_${this.widgetId}`);i&&(this.elem=i.querySelector(".mgMuteButton")),this.elem||this.createElement(),this.amby.get("muteBtn.muted",!1)&&a.Helpers.addClass(this.elem,"muted"),this.addListeners()}createElement(){this.elem=document.createElement("div"),this.elem.className="mgMuteButton",this.container.appendChild(this.elem)}addListeners(){this.amby.addSubListener("muteBtn.muted",(()=>{this.amby.get("muteBtn.muted",!1)?a.Helpers.addClass(this.elem,"muted"):a.Helpers.removeClass(this.elem,"muted")})),this.amby.addSubListener("player.isControlsVisible",(()=>{this.amby.get("player.isControlsVisible",!1)?a.Helpers.removeClass(this.elem,"showed"):a.Helpers.addClass(this.elem,"showed")})),this.amby.addSubListener("muteBtn.visible",(()=>{this.amby.get("muteBtn.visible",!1)?a.Helpers.addClass(this.elem,"showed"):a.Helpers.removeClass(this.elem,"showed")})),this.elem.addEventListener("click",(e=>{this.amby.dispatch(s.setTriggerToTrue("muteBtn.clicked")),e.cancelBubble=!0}))}}},{"../../../redux/actionCreators":58,"../../helpers":37}],55:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.SkipAdButtonComponent=void 0;var s=e("../../../redux/storage"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=o(t);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var n=a?Object.getOwnPropertyDescriptor(e,r):null;n&&(n.get||n.set)?Object.defineProperty(s,r,n):s[r]=e[r]}s.default=e,i&&i.set(e,s);return s}(e("../../../redux/actionCreators")),r=e("../../helpers"),n=e("../../debug");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(o=function(e){return e?i:t})(e)}i.SkipAdButtonComponent=class{constructor(e,t,i){this.amby=e,this.container=t,this.playerName=i,this.widgetId=this.amby.get("widgetId"),this.elemText=r.Helpers.getTranslated(this.amby,"skipText","Skip"),this.timeToSkipText=r.Helpers.getTranslated(this.amby,"skipOffsetText","Skip ad in %s");const s=r.Helpers.getParentBlockByClass(this.container,`._mgw_${this.widgetId}`);s&&(this.elem=s.querySelector("div[class*=mgSkipButton]")),this.elem?this.addClickListeners():this.createElement(),this.addListeners(),(0,n.mgDebug)("Skip Ad Button Component initialised")}createElement(){this.elem=document.createElement("div"),this.elem.className="mgSkipButton adSkipButton",this.elem.innerText=this.elemText,this.container.appendChild(this.elem),this.addClickListeners()}addClickListeners(){this.elem&&this.elem.addEventListener("click",(e=>{this.amby.get("skipBtn.skipable",!1)&&(this.amby.dispatch(a.setTriggerToTrue(`${this.playerName}.actionSkip`)),this.stopInterval()),e.cancelBubble=!0}))}addListeners(){this.amby.addSubListener("skipBtn.visible",(()=>{this.amby.get("skipBtn.visible",!1)?r.Helpers.addClass(this.elem,"showed"):r.Helpers.removeClass(this.elem,"showed")})),this.amby.addSubListener(`${this.playerName}.status`,(()=>{switch(this.amby.get(`${this.playerName}.status`)){case s.states.STATUS_READY:this.skipoffset=this.amby.get(`${this.playerName}.skipoffset`),this.timeToSkip=parseInt(this.skipoffset,10);break;case s.states.STATUS_PLAYING:this.skipoffset&&this.createInterval();break;case s.states.STATUS_PAUSED:this.skipoffset&&this.pauseInterval();break;case s.states.STATUS_STOPPED:this.skipoffset&&this.stopInterval()}})),this.amby.addSubListener("skipBtn.skipable",(()=>{this.amby.get("skipBtn.skipable",!0)&&this.skipoffset&&this.skipIntervalId&&(this.timeToSkip=0)}))}createInterval(){if(!this.skipIntervalId){this.amby.dispatch(a.upsertState({skipBtn:{skipable:!1}}));let e=Math.ceil(this.timeToSkip);this.timeToSkip>0&&(this.elem.innerText=this.timeToSkipText.replace("%s",e)),this.skipIntervalId=setInterval((()=>{e=Math.ceil(this.timeToSkip),this.elem.innerText=this.timeToSkipText.replace("%s",e),this.timeToSkip<=0&&this.skipIntervalId?(clearInterval(this.skipIntervalId),this.skipIntervalId=null,this.elem.innerText=this.elemText,this.amby.dispatch(a.upsertState({skipBtn:{skipable:!0}}))):this.timeToSkip-=.1}),100)}this.amby.dispatch(a.upsertState({skipBtn:{visible:!0}}))}pauseInterval(){this.skipIntervalId&&(clearInterval(this.skipIntervalId),this.skipIntervalId=null)}stopInterval(){this.pauseInterval(),this.timeToSkip=parseInt(this.skipoffset,10),this.amby.dispatch(a.upsertState({skipBtn:{visible:!1,skipable:!1}}))}}},{"../../../redux/actionCreators":58,"../../../redux/storage":61,"../../debug":30,"../../helpers":37}],56:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.MgPlayer=void 0;var s=e("../helpers");const a="idle",r="hover",n="hidden",o="visible";i.MgPlayer=class{constructor(e,t=document){if(this.rootElement=t,this.container=this.rootElement.querySelector(`#${e}`),this.container||(this.container=document.querySelector(`#${e}`)),!this.container)return void console.error("MgPlayer: container not found.");const{protocol:i}=document.location;this.protocol=0===i.indexOf("http")?i:"https:",this.status=a,this.expanded=!1,this.readyRequest=!1,this.playlistRequest=!1,this.eventListeners={},this.curQuality="360p",this.qualityChanging=!1,this.currentVolumeLevel=1,this.customButtons=[],this.webmSupported=!1}setup(e){setTimeout((()=>{const{playlist:t,repeat:i,mute:a,stylePath:l,buttonSettings:d,seekable:h=!0,displayClickDefaultAction:p=!0,theme:m="mgred",events:c,customBtns:g,preload:u="none",useWebm:y=!1}=e;Array.isArray(t)&&t.length>0&&(this.playlist=t),this.seekable=h,this.displayClickDefaultAction=p,this.stylePath=l,this.theme=m,this.preload=u,this.useWebm=y,this.addTemplate();const b={playButton:r,startButton:r,nextButton:r,time:r,timeline:r,hdButton:n,muteButton:o,closeButton:n,expandButton:n,leftButton:r,rightButton:r,title:r};this.btnSettings=s.Helpers.mergeObjects(b,d),Object.entries(this.btnSettings).forEach((([e,t])=>{if(void 0!==this[e]&&null!==this[e])switch(t){case r:s.Helpers.addClass(this[e],"mghover");break;case o:s.Helpers.addClass(this[e],"showed")}}));for(let e=0;e<this.time.length;e++)switch(this.btnSettings.time){case r:s.Helpers.addClass(this.time[e],"mghover");break;case o:s.Helpers.addClass(this.time[e],"showed")}if(this.repeat=i,this.video.muted=!!a,s.Helpers.addClass(this.container,"mg2player_mute"),a||s.Helpers.removeClass(this.container,"mg2player_mute"),this.readyRequest=!0,this.addButtonListeners(),c&&Object.entries(c).forEach((([e,t])=>{"function"==typeof t?this.on(e,t):"string"==typeof t&&this.on(e,(()=>{s.Helpers.createImg(t)}))})),g&&Array.isArray(g)&&g.forEach((e=>{this.addCustomButton(e.name,e.image,e.click)})),this.useWebm&&(this.webmSupported=this.couldUseWebm(),this.webmSupported))try{this.enableWebmErrorHandler()}catch(e){}}),0)}addTemplate(){this.container.className=`mg2player${"mgred"===this.theme?" mgred":""} mg2player_preload`,"mgred"===this.theme?this.container.innerHTML=`<video class="mg2player__video" playsinline preload="${this.preload}"></video><div class="mg2player__title"></div><div class="mg2player__preload"></div><div class="mg2player__start-btn"></div><div class="mg2player__controls"><div class="mg2player__controls-cover"><div class="mg2player__controls-wrap"><div class="mg2player__play-btn"></div><div class="mg2player__play-next"></div><div class="mg2player__track"><div class="mg2player__track-wrap"><div class="mg2player__track-buffer" style="width:0;"></div><div class="mg2player__track-played" style="width:0;"></div><div class="mg2player__track-point" style="left:0;"></div></div></div><div class="mg2player__time"></div><div class="mg2player__time mg2player__time_slash">/</div><div class="mg2player__time"></div><div class="mg2player_HD mg2player_HD_disabled"></div></div></div></div><div class="mg2player__volume"><div class="mg2player__volume-bar"><div class="mg2player__volume-wrap"><div class="mg2player__volume-level"></div></div></div></div><div class="mg2player__expand"></div><div class="mg2player__btn mg2player__btn_left"></div><div class="mg2player__btn mg2player__btn_right"></div><div class="mg2player__close"></div>`:this.container.innerHTML=`<video class="mg2player__video" playsinline preload="${this.preload}"></video><div class="mg2player__title"></div><div class="mg2player__preload"></div><div class="mg2player__start-btn"></div><div class="mg2player__controls"><div class="mg2player__track"><div class="mg2player__track-wrap"><div class="mg2player__track-buffer" style="width:0;"></div><div class="mg2player__track-played" style="width:0;"></div><div class="mg2player__track-point" style="left:0;"></div></div></div><div class="mg2player__controls-cover"><div class="mg2player__controls-wrap"><div class="mg2player__play-btn"></div><div class="mg2player__play-next"></div><div class="mg2player__time"></div><div class="mg2player__time mg2player__time_slash">/</div><div class="mg2player__time"></div><div class="mg2player__dummy"></div><div class="mg2player_HD mg2player_HD_disabled"></div></div></div></div><div class="mg2player__volume"><div class="mg2player__volume-bar"><div class="mg2player__volume-wrap"><div class="mg2player__volume-level"></div></div></div></div><div class="mg2player__expand"></div><div class="mg2player__btn mg2player__btn_left"></div><div class="mg2player__btn mg2player__btn_right"></div><div class="mg2player__close"></div>`,this.video=this.container.querySelector("video"),this.video||(this.video=document.createElement("video"),this.video.className="mg2player__video",this.container.appendChild(this.video)),this.progressElem=this.container.querySelector(".mg2player__track-played"),this.progressPointElem=this.container.querySelector(".mg2player__track-point"),this.bufferProgressElem=this.container.querySelector(".mg2player__track-buffer"),this.muteButton=this.container.querySelector(".mg2player__volume"),this.volumeBar=this.container.querySelector(".mg2player__volume-bar"),this.volumeWrap=this.container.querySelector(".mg2player__volume-wrap"),this.volumeLevel=this.container.querySelector(".mg2player__volume-level"),this.playButton=this.container.querySelector(".mg2player__play-btn"),this.startButton=this.container.querySelector(".mg2player__start-btn"),this.time=this.container.querySelectorAll(".mg2player__time"),this.timeline=this.container.querySelector(".mg2player__track"),this.hdButton=this.container.querySelector(".mg2player_HD"),this.expandButton=this.container.querySelector(".mg2player__expand"),this.leftButton=this.container.querySelector(".mg2player__btn_left"),this.rightButton=this.container.querySelector(".mg2player__btn_right"),this.nextButton=this.container.querySelector(".mg2player__play-next"),this.closeButton=this.container.querySelector(".mg2player__close"),this.controlsContainer=this.container.querySelector(".mg2player__controls"),this.controlsWrapper=this.container.querySelector(".mg2player__controls-wrap"),this.title=this.container.querySelector(".mg2player__title"),this.addVideoListeners(),"none"!==this.video.preload&&Array.isArray(this.playlist)&&0!==this.playlist.length||this.fireEvent("ready")}addVideoListeners(){this.container.oncontextmenu=e=>{e.preventDefault()},this.video&&(this.video.onplaying=()=>{this.video.seeking?this.pause():(this.status="playing",s.Helpers.addClass(this.container,"mg2player_playing"),s.Helpers.removeClass(this.container,"mg2player_preload"),this.fireEvent("play",{playReason:this.playBtnClicked?"interaction":"external"}),this.playBtnClicked=!1,this.firstFrameFired||(this.fireEvent("firstFrame"),this.firstFrameFired=!0),this.qualityChanged&&(this.startButton.style.removeProperty("visibility"),this.startButton.style.removeProperty("opacity"),this.qualityChanged=!1))},this.video.addEventListener("pause",(()=>{this.status="paused",s.Helpers.removeClass(this.container,"mg2player_playing"),this.fireEvent("pause",{pauseReason:this.playBtnClicked?"interaction":"external"}),this.playBtnClicked=!1})),this.video.addEventListener("ended",(()=>{this.status=a,this.fireEvent("beforeComplete"),setTimeout((()=>{this.fireEvent("complete"),this.playlistItem(this.currentIndex+1)}),500)})),this.video.addEventListener("error",(()=>{console.error(this.video.error),this.fireEvent("error",`ERROR: ${this.video.error}`)})),this.video.addEventListener("seeking",(()=>{this.qualityChanged&&this.deletingVideoPaused&&(this.startButton.style.removeProperty("visibility"),this.startButton.style.removeProperty("opacity"),this.qualityChanged=!1),this.fireEvent("seek",{offset:this.video.currentTime})})),this.video.onseeked=()=>{this.fireEvent("seeked")},this.video.addEventListener("timeupdate",(()=>{s.Helpers.removeClass(this.container,"mg2player_preload"),this.progress=this.video.currentTime/this.video.duration*100,this.progressElem.style.width=`${this.progress}%`,this.progressPointElem.style.left=`${this.progress}%`,this.time[0].innerText=s.Helpers.formatTime(this.video.currentTime),this.fireEvent("time",{position:this.video.currentTime,duration:this.video.duration})})),this.video.addEventListener("volumechange",(()=>{this.video&&(this.video.muted?s.Helpers.addClass(this.container,"mg2player_mute"):s.Helpers.removeClass(this.container,"mg2player_mute")),this.fireEvent("mute",{mute:this.video.muted})})),this.video.addEventListener("progress",(e=>{this.updateProgress(e)})),this.video.onclick=e=>{this.displayClickDefaultAction&&this.onPlayBtnClick(),this.fireEvent("displayClick"),e.cancelBubble=!0},this.video.addEventListener("loadstart",(()=>{"none"!==this.video.preload?this.status="buffering":this.time[2].innerText=s.Helpers.formatTime(0)})),this.video.addEventListener("durationchange",(()=>{this.time[0].innerText=s.Helpers.formatTime(this.video.currentTime),this.time[2].innerText=s.Helpers.formatTime(this.video.duration)})),this.video.oncanplay=()=>{this.onCanPlay()},this.video.onwaiting=()=>{s.Helpers.addClass(this.container,"mg2player_preload")},this.video.onloadedmetadata=()=>{this.onCanPlay()})}addButtonListeners(){this.btnSettings.muteButton!==n&&(this.muteButton.addEventListener("click",(e=>{this.video&&this.setMute(!this.video.muted),e.cancelBubble=!0})),this.volumeWrap.addEventListener("click",(e=>{const t=this.volumeWrap.getBoundingClientRect();this.currentVolumeLevel=(t.height-(e.clientY-t.top))/t.height,this.currentVolumeLevel>1&&(this.currentVolumeLevel=1),this.currentVolumeLevel<0&&(this.currentVolumeLevel=0),this.video&&(this.currentVolumeLevel>0&&this.setMute(!1),this.video.volume=this.currentVolumeLevel,this.volumeLevel.style.height=100*this.currentVolumeLevel+"%"),e.cancelBubble=!0})),this.volumeBar.addEventListener("click",(e=>{e.cancelBubble=!0}))),this.btnSettings.playButton!==n&&this.playButton.addEventListener("click",(e=>{this.onPlayBtnClick(),e.cancelBubble=!0})),this.btnSettings.startButton!==n&&this.startButton.addEventListener("click",(e=>{this.onPlayBtnClick(),this.fireEvent("displayClick"),e.cancelBubble=!0})),this.btnSettings.timeline!==n&&this.timeline.addEventListener("click",(e=>{if(this.seekable){const t=this.timeline.getBoundingClientRect(),i=(e.clientX-t.left)/t.width;this.video&&this.seek(Math.floor(i*this.video.duration))}e.cancelBubble=!0})),this.btnSettings.nextButton!==n&&this.nextButton.addEventListener("click",(e=>{this.playlistItem(this.currentIndex+1),this.fireEvent("next"),e.cancelBubble=!0})),this.btnSettings.expandButton!==n&&this.expandButton.addEventListener("click",(e=>{this.fireEvent("expand"),e.cancelBubble=!0})),this.btnSettings.leftButton!==n&&this.leftButton.addEventListener("click",(e=>{this.playlistItem(this.currentIndex-1),this.fireEvent("previous"),e.cancelBubble=!0})),this.btnSettings.rightButton!==n&&this.rightButton.addEventListener("click",(e=>{this.playlistItem(this.currentIndex+1),this.fireEvent("next_2"),e.cancelBubble=!0})),this.controlsContainer.addEventListener("click",(e=>{this.displayClickDefaultAction&&this.onPlayBtnClick(),this.fireEvent("displayClick"),e.cancelBubble=!0})),this.btnSettings.hdButton!==n&&this.hdButton.addEventListener("click",(e=>{this.qualityChanging||(this.hdButton.className.indexOf("mg2player_HD_disabled")>-1?this.changeQuality("720p",(()=>{s.Helpers.removeClass(this.hdButton,"mg2player_HD_disabled"),this.curQuality="720p",this.fireEvent("quality",{quality:"720p"}),this.qualityChanged=!0})):this.changeQuality("360p",(()=>{s.Helpers.addClass(this.hdButton,"mg2player_HD_disabled"),this.curQuality="360p",this.fireEvent("quality",{quality:"360p"}),this.qualityChanged=!0}))),e.cancelBubble=!0}))}play(){this.video&&(s.Helpers.isIE()?this.video.play():this.video.play().catch((()=>{this.video.muted=!0,this.video.play().catch((e=>{console.error(`ERROR: ${e.name} MESSAGE: ${e.message}`)}))})))}pause(){this.video&&this.video.pause()}setMute(e){this.video.muted=!!e}couldUseWebm(){const e="video/webm; codecs=av01.0.01M.08,opus";return!!(window.MediaError&&MediaError.MEDIA_ERR_DECODE&&(t=e,window.MediaSource&&MediaSource.isTypeSupported&&MediaSource.isTypeSupported(t)||(e=>this.video.canPlayType&&this.video.canPlayType(e).replace(/no/,""))(e)));var t}enableWebmErrorHandler(){const e=[MediaError.MEDIA_ERR_DECODE,MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED],t=new RegExp(/(_360)\.webm($|\?)/);this.video.addEventListener("error",(i=>{const{video:s}=this;if(s.currentTime<1&&e.indexOf(s.error.code)>-1&&t.test(s.src)){const e=!s.paused,{currentTime:a}=s;s.src=s.src.replace(t,"$1.mp4$2"),a>0&&(s.currentTime=a),e&&s.paused&&s.play(),i.preventDefault(),i.stopPropagation()}}),{capture:!0,passive:!1})}setSuitableExt(e){return this.useWebm&&this.webmSupported?e.replace(/\.mp4/,".webm"):e}playlistItem(e,t=!0){if(e>=this.playlist.length?this.currentIndex=0:this.currentIndex=e<0?this.playlist.length-1:e,this.video&&Object.prototype.hasOwnProperty.call(this.playlist,this.currentIndex)){let e=this.playlist[this.currentIndex].file;e=e.replace(/^(https?:\/\/|\/\/)/,`${this.protocol}//`),e="720p"===this.curQuality?e.replace(/^([^?]+)_360\.(mp4|webm)($|\?)/i,"$1.$2$3"):this.setSuitableExt(e),this.video.src=e,this.video.poster=this.playlist[this.currentIndex].image.replace(/^(https?:\/\/|\/\/)/,`${this.protocol}//`),s.Helpers.addClass(this.container,"mg2player_preload")}this.title.innerText=this.playlist[this.currentIndex].title||"",this.firstFrameFired=!1,t&&(e<this.playlist.length||this.repeat)&&this.play(),this.fireEvent("playlistItem",{index:this.currentIndex})}setControls(e){e?s.Helpers.addClass(this.container,"mg2player_controls"):s.Helpers.removeClass(this.container,"mg2player_controls"),this.fireEvent("controls")}seek(e){this.video&&this.video.duration>=e&&(this.video.currentTime=e)}resize(e=null,t=null,i=null){if(this.aspectRatio=(i||"16:9").match(/(\d+):(\d+)/).reduce(((e,t,i)=>(e[["ratio","width","height"][i]]=t,e)),{}),this.aspectRatio.width=parseInt(this.aspectRatio.width,10),this.aspectRatio.height=parseInt(this.aspectRatio.height,10),null===e?this.container.removeAttribute("style"):(this.container.style.width=`${e}px`,this.container.style.height=`${t}px`),this.video&&(null===e?this.video.removeAttribute("style"):(this.video.style.width=`${e}px`,this.video.style.height=e/(this.aspectRatio.width/this.aspectRatio.height)+"px"),parseFloat(this.video.style.height)>parseFloat(this.container.style.height)&&(this.video.style.height=`${t}px`,this.video.style.width=t*(this.aspectRatio.width/this.aspectRatio.height)+"px"),"mgred"===this.theme)){(this.video.clientWidth||this.video.offsetWidth)<=350?this.time.forEach((e=>{s.Helpers.removeClass(e,"showed"),s.Helpers.removeClass(e,"mghover")})):this.time.forEach((e=>{this.btnSettings.time===r&&s.Helpers.addClass(e,"mghover"),this.btnSettings.time===o&&s.Helpers.addClass(e,"showed")}))}}load(e){setTimeout((()=>{Array.isArray(e)?this.playlist=e:e&&"object"==typeof e&&(this.playlist=[e]),this.playlistItem(0,!1),this.playlistRequest=!0,"none"===this.video.preload&&this.fireEvent("playlist")}),0)}updateProgress(e){e.lengthComputable?this.buffered=e.loaded/e.total*100:this.buffered=100,this.bufferProgressElem.style.width=`${this.buffered}%`}getDuration(){return this.video.duration}getState(){return this.status}getContainer(){return this.container}onPlayBtnClick(){this.video&&(this.video.paused||this.video.ended?this.play():this.pause()),this.playBtnClicked=!0}on(e,t){Object.prototype.hasOwnProperty.call(this.eventListeners,e)||(this.eventListeners[e]=[]),this.eventListeners[e].push(t)}fireEvent(e,t=null){Object.prototype.hasOwnProperty.call(this.eventListeners,e)&&this.eventListeners[e].forEach((e=>{e(t)}))}changeQuality(e,t){if(e&&e!==this.curQuality)switch(e){case"720p":this.video.src.indexOf("_360.")>-1&&this.loadVideoSilent(this.video.src.replace(/^([^?]+)_360\.(mp4|webm)($|\?)/i,"$1.$2$3"),t);break;case"360p":-1===this.video.src.indexOf("_360.")&&this.loadVideoSilent(this.video.src.replace(/^([^?]+?)(_360)?\.(mp4|webm)($|\?)/i,"$1_360.$3$4"),t)}}loadVideoSilent(e,t){e&&(this.qualityChanging=!0,this.startButton.style.visibility="hidden",this.startButton.style.opacity="0",this.loadingVideo=this.video.cloneNode(!0),this.loadingVideo.src=`${e}#t=${this.video.currentTime}`,this.loadingVideo.style.visibility="hidden",this.loadingVideo.style.opacity="0",this.loadingVideo.duration&&(this.loadingVideo.currentTime=this.video.currentTime),this.loadingVideo.oncanplay=()=>{this.onNewVideoCanPlay()},(s.Helpers.isSafari()||s.Helpers.iOSversion())&&(this.loadingVideo.onloadedmetadata=()=>{this.onNewVideoCanPlay()}),this.loadingVideo.onplaying=()=>{s.Helpers.removeClass(this.container,"mg2player_preload"),this.qualityTimeout||(this.qualityTimeout=setTimeout((()=>{this.deletingVideoElem=this.video,this.loadingVideo.currentTime=this.video.currentTime,this.deletingVideoPaused=this.video.paused,this.loadingVideo.muted=this.video.muted,this.deletingVideoElem.pause(),this.deletingVideoElem.style.visibility="hidden",this.deletingVideoElem.style.opacity="0",this.loadingVideo.style.removeProperty("visibility"),this.loadingVideo.style.removeProperty("opacity"),this.deletingVideoElem.parentNode.removeChild(this.deletingVideoElem),this.video=this.loadingVideo,this.deletingVideoPaused&&this.pause(),this.addVideoListeners(),this.qualityChanging=!1,this.loadingVideoPlayRequested=!1,this.qualityTimeout=null,t&&t()}),500))},this.loadingVideo.onwaiting=()=>{s.Helpers.addClass(this.container,"mg2player_preload")},s.Helpers.isIE()||this.video.addEventListener("timeupdate",(()=>{this.loadingVideo&&this.loadingVideo.duration&&!this.loadingVideo.paused&&(this.loadingVideo.currentTime=this.video.currentTime)})),this.video.parentNode.insertBefore(this.loadingVideo,this.video))}onNewVideoCanPlay(){this.loadingVideoPlayRequested||(this.loadingVideo.muted=!0,s.Helpers.isIE()?this.video.play():this.loadingVideo.play().catch((e=>{console.error(`ERROR: ${e.name} MESSAGE: ${e.message}`)})),this.loadingVideoPlayRequested=!0)}onCanPlay(){s.Helpers.removeClass(this.container,"mg2player_preload"),this.status=a,"none"!==this.video.preload?(this.readyRequest&&(this.readyRequest=!1,this.fireEvent("ready")),this.playlistRequest&&(this.playlistRequest=!1,this.fireEvent("playlist"))):this.play()}addCustomButton(e,t,i){const s=document.createElement("DIV"),a=document.createElement("IMG");a.src=t,a.title=e.toString(),s.className="mg2player__custom-btn mghover",s.title=e.toString(),"function"==typeof i?s.addEventListener("click",(e=>{e.cancelBubble=!0,i(e)})):"string"==typeof i&&s.addEventListener("click",(e=>{e.cancelBubble=!0;const t=(this.rootElement.ownerDocument||this.rootElement).defaultView.open(i,"_blank");t&&t.focus()})),s.appendChild(a),this.controlsWrapper.appendChild(s),this.customButtons.push({name:e,image:t,onClick:i,elem:s})}removeCustomButton(e){const t=e.toString();this.customButtons.forEach((e=>{e.name.toString()===t&&(e.elem.parentNode.removeChild(e.elem),this.customButtons.unshift(e))}))}}},{"../helpers":37}],57:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Script=void 0;var s=e("./loader"),a=e("./helpers");i.Script=class{static init(e){new s.Loader((0,a.getInObject)(e,["mgRec","config","extLibraries"],{}),(()=>{this.addCustomScripts(e)}),`${(0,a.getInObject)(e,["mgRec","cid"],0)}_${e.getWidgets().length}`).checkLoaded()}static addCustomScripts(e){const t=e.block.querySelectorAll("script"),i=`${e.mgRec.cid}_${e.getWidgets().length}`;for(let e=0;e<t.length;e++){if(!document.getElementById(`Custom_${i}_${e}`)){const s=document.createElement("script");s.innerHTML=t[e].innerHTML,s.id=`Custom_${i}_${e}`,document.head.appendChild(s)}}}}},{"./helpers":37,"./loader":38}],58:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.deleteProperty=function(e){return{type:"DELETE_PROPERTY",state:e}},i.setAdEnabled=function(e){return{type:"AD_ENABLED",state:e}},i.setAdInSight=function(e){return{type:"AD_IN_SIGHT",state:e}},i.setAdInit=function(e,t="ad"){return{type:"AD_INIT",state:{[t]:{init:e}}}},i.setAdMuted=function(e){return{type:"AD_MUTE",state:e}},i.setAdStatus=function(e,t="ad"){return{type:"AD_STATUS",state:{[t]:{status:e}}}},i.setAdVisible=function(e,t="ad"){return{type:"AD_VISIBLE",state:{[t]:{visible:e}}}},i.setFormatConfig=function(e){return{type:"FORMAT_CONFIG",state:e}},i.setPlayerExpanded=function(e){return{type:"PLAYER_EXPANDED",state:e}},i.setPlayerInSight=function(e){return{type:"PLAYER_IN_SIGHT",state:e}},i.setPlayerInit=function(e){return{type:"PLAYER_INIT",state:e}},i.setPlayerMouseOver=function(e){return{type:"PLAYER_MOUSE_OVER",state:e}},i.setPlayerMuted=function(e){return{type:"PLAYER_MUTE",state:e}},i.setPlayerStatus=function(e){return{type:"PLAYER_STATUS",state:e}},i.setPlayerSticky=function(e){return{type:"PLAYER_STICKY",state:e}},i.setPlayerTeaserPosition=function(e){return{type:"PLAYER_TEASER_POSITION",state:e}},i.setPlayerVisible=function(e){return{type:"PLAYER_VISIBLE",state:e}},i.setPopupVisible=function(e){return{type:"POPUP_VISIBLE",state:e}},i.setState=function(e){return{type:"SET_STATE",state:e}},i.setTriggerToFalse=function(e){return{type:"TRIGGER_TO_FALSE",state:e}},i.setTriggerToFalseGlobal=function(e){return{type:"TRIGGER_TO_FALSE_GLOBAL",value:e}},i.setTriggerToTrue=function(e){return{type:"TRIGGER_TO_TRUE",state:e}},i.setWidgetBlurred=function(e){return{type:"WIDGET_BLURRED",state:e}},i.setWidgetInSight=function(e){return{type:"WIDGET_IN_SIGHT",state:e}},i.upsertAdState=function(e){return{type:"AD_STATE",state:e}},i.upsertGlobalState=function(e){return{type:"UPSERT_GLOBAL_STATE",state:e}},i.upsertPlayerState=function(e){return{type:"PLAYER_STATE",state:e}},i.upsertState=function(e){return{type:"UPSERT_STATE",state:e}},i.upsertTeaser=function(e){return{type:"UPSERT_TEASER",state:e}}},{}],59:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.addSubListener=function(e,t){const i=(0,n.pathToArray)(e);d.push({path:i,subListener:t})},i.addTriggerListener=function(e,t){const i=(0,n.pathToArray)(e);c.dispatch((0,r.setTriggerToFalseGlobal)(i)),h.push({path:i,subListener:t})},i.clearListeners=function(){d=[],h=[]},i.mainListener=g,i.removeSubListener=function(e,t){const i=(0,n.pathToArray)(e);d.forEach(((e,s)=>{e.path.join(".")===i.join(".")&&e.subListener===t&&d.splice(s,1)}))},i.removeTriggerListener=function(e,t){const i=(0,n.pathToArray)(e);h.forEach(((e,s)=>{e.path.join(".")===i.join(".")&&e.subListener===t&&h.splice(s,1)}))},i.store=void 0;var s=e("redux"),a=e("../modules/helpers"),r=e("./actionCreators"),n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=o(t);if(i&&i.has(e))return i.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var n=a?Object.getOwnPropertyDescriptor(e,r):null;n&&(n.get||n.set)?Object.defineProperty(s,r,n):s[r]=e[r]}s.default=e,i&&i.set(e,s);return s}(e("./reducer"));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(o=function(e){return e?i:t})(e)}let l,d=[],h=[];const p={},m=a.Helpers.getMostTopWindowUrl().indexOf("mgwdebug")>-1,c=(0,s.createStore)(n.default,m?window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__():void 0);function g(){const e={},t=c.getState(),i=l;l=t,d.forEach((e=>{(0,a.getInObject)(i,e.path)!==(0,a.getInObject)(t,e.path)&&e.subListener(i)})),h.forEach((s=>{const r=(0,a.getInObject)(i,s.path,!1),n=(0,a.getInObject)(t,s.path);n&&r!==n&&!p[s.path.join(".")]&&(p[s.path.join(".")]=s.path,e[s.path.join(".")]=s.path,s.subListener(i),delete p[s.path.join(".")])})),Object.keys(e).forEach((t=>{c.dispatch((0,r.setTriggerToFalseGlobal)(e[t]))}))}i.store=c,c.subscribe((()=>{g()}))},{"../modules/helpers":37,"./actionCreators":58,"./reducer":60,redux:8}],60:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.pathToArray=r;var s=e("../modules/helpers");const a={};function r(e){let t=e;return"string"==typeof t?t=t.split("."):Array.isArray(t)||(t=t.getPath()),t}function n(e,t){return s.Helpers.mergeObjects(e,t,!0)}function o(e,t){return 1===t.length?delete e[t[0]]:Object.prototype.hasOwnProperty.call(e,t[0])&&("object"!=typeof e[t[0]]?delete e[t[0]]:e[t[0]]=o(e[t[0]],t.slice(1))),e}function l(e,t,i){const s=r(t),a=s.length-1;for(let t=0;t<a;++t){const i=s[t];i in e||(e[i]={}),e=e[i]}e[s[a]]=i}function d(e,t){return o(e,r(t))}var h=function(e=a,t){const{type:i,value:s,ambyNamespace:r}=t;let o=JSON.parse(JSON.stringify(e));if(!r&&-1===["TRIGGER_TO_FALSE_GLOBAL","UPSERT_GLOBAL_STATE"].indexOf(i))return o;let h=o[r];switch(void 0===h&&(h={}),i){case"SET_STATE":h=JSON.parse(JSON.stringify(s));break;case"UPSERT_STATE":case"AD_STATUS":case"AD_VISIBLE":case"AD_INIT":h=n(h,s);break;case"UPSERT_GLOBAL_STATE":o=n(o,s);break;case"TRIGGER_TO_FALSE_GLOBAL":l(o,s,!1);break;case"TRIGGER_TO_FALSE":l(h,s,!1);break;case"TRIGGER_TO_TRUE":l(h,s,!0);break;case"FORMAT_CONFIG":h=function(e,t){return{...e,formatConfig:t}}(h,s);break;case"AD_STATE":h=n(h,{ad:s});break;case"AD_MUTE":h=function(e,t){return{...e,ad:{...e.ad,muted:t}}}(h,s);break;case"AD_ENABLED":h=function(e,t){return{...e,ad:{...e.ad,enabled:t}}}(h,s);break;case"AD_IN_SIGHT":h=function(e,t){return{...e,ad:{...e.ad,inSight:t}}}(h,s);break;case"WIDGET_IN_SIGHT":h=function(e,t){return{...e,widget:{...e.widget,inSight:t}}}(h,s);break;case"WIDGET_BLURRED":h=function(e,t){return{...e,widget:{...e.widget,blurred:t}}}(h,s);break;case"UPSERT_TEASER":{const e=[];e[s.index]=s.teaser,h=n(h,{teasers:e});break}case"PLAYER_STATE":h=n(h,{player:s});break;case"PLAYER_STATUS":h=function(e,t){return{...e,player:{...e.player,status:t}}}(h,s);break;case"PLAYER_VISIBLE":h=function(e,t){return{...e,player:{...e.player,visible:t}}}(h,s);break;case"PLAYER_INIT":h=function(e,t){return{...e,player:{...e.player,init:t}}}(h,s);break;case"PLAYER_MUTE":h=function(e,t){return{...e,player:{...e.player,muted:t}}}(h,s);break;case"PLAYER_EXPANDED":h=function(e,t){return{...e,player:{...e.player,expanded:t}}}(h,s);break;case"PLAYER_MOUSE_OVER":h=function(e,t){return{...e,player:{...e.player,mouseOver:t}}}(h,s);break;case"PLAYER_TEASER_POSITION":h=function(e,t){return{...e,player:{...e.player,teaserPosition:t}}}(h,s);break;case"POPUP_VISIBLE":h=function(e,t){return{...e,popup:{...e.popup,visible:t}}}(h,s);break;case"PLAYER_STICKY":h=function(e,t){return{...e,player:{...e.player,isSticky:t}}}(h,s);break;case"PLAYER_IN_SIGHT":h=function(e,t){return{...e,player:{...e.player,inSight:t}}}(h,s);break;case"DELETE_PROPERTY":h=d(h,s)}return o[r]=h,o};i.default=h},{"../modules/helpers":37}],61:[function(e,t,i){(function(t,s){(function(){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.createAmby=function(e){const t=o();return t.putNS(e),t},i.proxyTree=o,i.vpaidModes=i.states=void 0;var a=e("../modules/helpers"),r=e("./listener");i.states={STATUS_PLAYING:"playing",STATUS_PAUSED:"paused",STATUS_READY:"ready",STATUS_STOPPED:"stopped",STATUS_ERROR:"error",STATUS_INIT:"init",INIT_NEEDED:"needed",INIT_DONE:"done",INIT_RESET:"reset",INIT_IN_PROGRESS:"progress",INIT_STOP:"stop"};var n;function o(){let e="";return function t(i){return new Proxy({},{get(s,n){if(0===i.length){if("dispatch"===n)return t=>r.store.dispatch({type:t.type,value:t.state,ambyNamespace:e});if("subscribe"===n)return t=>r.store.subscribe({handler:t,ambyNamespace:e});if("get"===n)return(t,i)=>{if(void 0===t)return r.store.getState();const s=t.split(".");return s.forEach(((e,t)=>{parseInt(e,10).toString()===e&&(s[t]=parseInt(e,10))})),(0,a.getInObject)(r.store.getState()[e],s,i)};if("getNS"===n)return()=>e;if("putNS"===n)return t=>{e=t};if("addSubListener"===n)return(t,i)=>{"string"==typeof t?(0,r.addSubListener)(`${e}.${t}`,i):(0,r.addSubListener)([e,...t],i)};if("removeSubListener"===n)return(t,i)=>{"string"==typeof t?(0,r.removeSubListener)(`${e}.${t}`,i):(0,r.removeSubListener)([e,...t],i)};if("addTriggerListener"===n)return(t,i)=>{"string"==typeof t?(0,r.addTriggerListener)(`${e}.${t}`,i):(0,r.addTriggerListener)([e,...t],i)};if("removeTriggerListener"===n)return(t,i)=>{"string"==typeof t?(0,r.removeTriggerListener)(`${e}.${t}`,i):(0,r.removeTriggerListener)([e,...t],i)}}else{if("get"===n)return t=>(0,a.getInObject)(r.store.getState()[e],i,t);if("getPath"===n)return()=>i}return t([...i,n])}})}([])}i.vpaidModes={INSECURE:"insecure",SECURE:"secure"},(n=void 0!==t&&"[object process]"==={}.toString.call(t)?s:self).Proxy||(n.Proxy=class{handlers;ambyNamespace;constructor(e,t){this.handlers=t,this.ambyNamespace=""}dispatch(e){return this.handlers.get(null,"dispatch")(e)}subscribe(e){return this.handlers.get(null,"subscribe")(e)}get(e,t){return this.handlers.get(null,"get")(e,t)}putNS(e){return this.handlers.get(null,"putNS")(e)}getNS(){return this.handlers.get(null,"getNS")()}addSubListener(e,t){return this.handlers.get(null,"addSubListener")(e,t)}addTriggerListener(e,t){return this.handlers.get(null,"addTriggerListener")(e,t)}})}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../modules/helpers":37,"./listener":59,_process:7}]},{},[10]);